var CF=Object.defineProperty,bF=Object.defineProperties;var TF=Object.getOwnPropertyDescriptors;var bd=Object.getOwnPropertySymbols,DF=Object.getPrototypeOf,J0=Object.prototype.hasOwnProperty,Z0=Object.prototype.propertyIsEnumerable,SF=Reflect.get;var Y0=(n,e,t)=>e in n?CF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,V=(n,e)=>{for(var t in e||={})J0.call(e,t)&&Y0(n,t,e[t]);if(bd)for(var t of bd(e))Z0.call(e,t)&&Y0(n,t,e[t]);return n},de=(n,e)=>bF(n,TF(e));var Td=(n,e)=>{var t={};for(var r in n)J0.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&bd)for(var r of bd(n))e.indexOf(r)<0&&Z0.call(n,r)&&(t[r]=n[r]);return t};var Ci=(n,e,t)=>SF(DF(n),t,e);var _=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});var Bm;function Dd(){return Bm}function dr(n){let e=Bm;return Bm=n,e}var X0=Symbol("NotFound");function Ns(n){return n===X0||n?.name==="\u0275NotFound"}var Ot=null,Sd=!1,$m=1,AF=null,Nt=Symbol("SIGNAL");function le(n){let e=Ot;return Ot=n,e}function Pd(){return Ot}var xs={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ks(n){if(Sd)throw new Error("");if(Ot===null)return;Ot.consumerOnSignalRead(n);let e=Ot.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Ot.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Ot.producers,t!==void 0&&t.producer===n)){Ot.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Ot&&(!r||RF(i,Ot)))return;let o=Ls(Ot),s={producer:n,consumer:Ot,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Ot.producersTail=s,e!==void 0?e.nextProducer=s:Ot.producers=s,o&&rT(n,s)}function eT(){$m++}function Od(n){if(!(Ls(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===$m)){if(!n.producerMustRecompute(n)&&!Hc(n)){Rd(n);return}n.producerRecomputeValue(n),Rd(n)}}function Hm(n){if(n.consumers===void 0)return;let e=Sd;Sd=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||MF(r)}}finally{Sd=e}}function zm(){return Ot?.consumerAllowSignalWrites!==!1}function MF(n){n.dirty=!0,Hm(n),n.consumerMarkedDirty?.(n)}function Rd(n){n.dirty=!1,n.lastCleanEpoch=$m}function Fs(n){return n&&tT(n),le(n)}function tT(n){n.producersTail=void 0,n.recomputing=!0}function $c(n,e){le(e),n&&nT(n)}function nT(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Ls(n))do t=qm(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Hc(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Od(t),r!==t.version))return!0}return!1}function zc(n){if(Ls(n)){let e=n.producers;for(;e!==void 0;)e=qm(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function rT(n,e){let t=n.consumersTail,r=Ls(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)rT(i.producer,i)}function qm(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Ls(e)){let o=e.producers;for(;o!==void 0;)o=qm(o)}return t}function Ls(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Nd(n){AF?.(n)}function RF(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function xd(n,e){return Object.is(n,e)}function kd(n,e){let t=Object.create(PF);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Od(t),ks(t),t.value===Bc)throw t.error;return t.value};return r[Nt]=t,Nd(t),r}var Ad=Symbol("UNSET"),Md=Symbol("COMPUTING"),Bc=Symbol("ERRORED"),PF=de(V({},xs),{value:Ad,dirty:!0,error:null,equal:xd,kind:"computed",producerMustRecompute(n){return n.value===Ad||n.value===Md},producerRecomputeValue(n){if(n.value===Md)throw new Error("");let e=n.value;n.value=Md;let t=Fs(n),r,i=!1;try{r=n.computation(),le(null),i=e!==Ad&&e!==Bc&&r!==Bc&&n.equal(e,r)}catch(o){r=Bc,n.error=o}finally{$c(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function OF(){throw new Error}var iT=OF;function oT(n){iT(n)}function Gm(n){iT=n}var NF=null;function Wm(n,e){let t=Object.create(Fd);t.value=n,e!==void 0&&(t.equal=e);let r=()=>sT(t);return r[Nt]=t,Nd(t),[r,s=>Vs(t,s),s=>Km(t,s)]}function sT(n){return ks(n),n.value}function Vs(n,e){zm()||oT(n),n.equal(n.value,e)||(n.value=e,xF(n))}function Km(n,e){zm()||oT(n),Vs(n,e(n.value))}var Fd=de(V({},xs),{equal:xd,value:void 0,kind:"signal"});function xF(n){n.version++,eT(),Hm(n),NF?.(n)}function se(n){return typeof n=="function"}function Us(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ld=Us(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function So(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ze=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(se(r))try{r()}catch(o){e=o instanceof Ld?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{aT(o)}catch(s){e=e??[],s instanceof Ld?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ld(e)}}add(e){var t;if(e&&e!==this)if(this.closed)aT(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&So(t,e)}remove(e){let{_finalizers:t}=this;t&&So(t,e),e instanceof n&&e._removeParent(this)}};ze.EMPTY=(()=>{let n=new ze;return n.closed=!0,n})();var Qm=ze.EMPTY;function Vd(n){return n instanceof ze||n&&"closed"in n&&se(n.remove)&&se(n.add)&&se(n.unsubscribe)}function aT(n){se(n)?n():n.unsubscribe()}var qn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var js={setTimeout(n,e,...t){let{delegate:r}=js;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=js;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ud(n){js.setTimeout(()=>{let{onUnhandledError:e}=qn;if(e)e(n);else throw n})}function qc(){}var cT=Ym("C",void 0,void 0);function uT(n){return Ym("E",void 0,n)}function lT(n){return Ym("N",n,void 0)}function Ym(n,e,t){return{kind:n,value:e,error:t}}var Ao=null;function Bs(n){if(qn.useDeprecatedSynchronousErrorHandling){let e=!Ao;if(e&&(Ao={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ao;if(Ao=null,t)throw r}}else n()}function dT(n){qn.useDeprecatedSynchronousErrorHandling&&Ao&&(Ao.errorThrown=!0,Ao.error=n)}var Mo=class extends ze{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Vd(e)&&e.add(this)):this.destination=LF}static create(e,t,r){return new bi(e,t,r)}next(e){this.isStopped?Zm(lT(e),this):this._next(e)}error(e){this.isStopped?Zm(uT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Zm(cT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},kF=Function.prototype.bind;function Jm(n,e){return kF.call(n,e)}var Xm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){jd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){jd(r)}else jd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){jd(t)}}},bi=class extends Mo{constructor(e,t,r){super();let i;if(se(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&qn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Jm(e.next,o),error:e.error&&Jm(e.error,o),complete:e.complete&&Jm(e.complete,o)}):i=e}this.destination=new Xm(i)}};function jd(n){qn.useDeprecatedSynchronousErrorHandling?dT(n):Ud(n)}function FF(n){throw n}function Zm(n,e){let{onStoppedNotification:t}=qn;t&&js.setTimeout(()=>t(n,e))}var LF={closed:!0,next:qc,error:FF,complete:qc};var $s=typeof Symbol=="function"&&Symbol.observable||"@@observable";function dn(n){return n}function Bd(...n){return ey(n)}function ey(n){return n.length===0?dn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=UF(t)?t:new bi(t,r,i);return Bs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=hT(r),new r((i,o)=>{let s=new bi({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[$s](){return this}pipe(...t){return ey(t)(this)}toPromise(t){return t=hT(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function hT(n){var e;return(e=n??qn.Promise)!==null&&e!==void 0?e:Promise}function VF(n){return n&&se(n.next)&&se(n.error)&&se(n.complete)}function UF(n){return n&&n instanceof Mo||VF(n)&&Vd(n)}function ty(n){return se(n?.lift)}function _e(n){return e=>{if(ty(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ye(n,e,t,r,i){return new ny(n,e,t,r,i)}var ny=class extends Mo{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Hs(){return _e((n,e)=>{let t=null;n._refCount++;let r=ye(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var zs=class extends ce{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ty(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ze;let t=this.getSubject();e.add(this.source.subscribe(ye(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ze.EMPTY)}return e}refCount(){return Hs()(this)}};var fT=Us(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Qe=(()=>{class n extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new $d(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new fT}next(t){Bs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Bs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Bs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Qm:(this.currentObservers=null,o.push(t),new ze(()=>{this.currentObservers=null,So(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ce;return t.source=this,t}}return n.create=(e,t)=>new $d(e,t),n})(),$d=class extends Qe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Qm}};var lt=class extends Qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ry={now(){return(ry.delegate||Date).now()},delegate:void 0};var Hd=class extends ze{constructor(e,t){super()}schedule(e,t=0){return this}};var Gc={setInterval(n,e,...t){let{delegate:r}=Gc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Gc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var qs=class extends Hd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Gc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Gc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,So(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Gs=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Gs.now=ry.now;var Ws=class extends Gs{constructor(e,t=Gs.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var iy=new Ws(qs);var zd=class extends qs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var qd=class extends Ws{};var oy=new qd(zd);var en=new ce(n=>n.complete());function pT(n){return n&&se(n.schedule)}function gT(n){return n[n.length-1]}function Gd(n){return se(gT(n))?n.pop():void 0}function Ti(n){return pT(gT(n))?n.pop():void 0}function sy(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function yT(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function mT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ro(n){return this instanceof Ro?(this.v=n,this):new Ro(n)}function vT(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,p)}}function a(y,C){r[y]&&(i[y]=function(x){return new Promise(function(O,j){o.push([y,x,O,j])>1||u(y,x)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(x){m(o[0][3],x)}}function l(y){y.value instanceof Ro?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,C){y(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function _T(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof mT=="function"?mT(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Wd=n=>n&&typeof n.length=="number"&&typeof n!="function";function Kd(n){return se(n?.then)}function Qd(n){return se(n[$s])}function Yd(n){return Symbol.asyncIterator&&se(n?.[Symbol.asyncIterator])}function Jd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function jF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Zd=jF();function Xd(n){return se(n?.[Zd])}function eh(n){return vT(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ro(t.read());if(i)return yield Ro(void 0);yield yield Ro(r)}}finally{t.releaseLock()}})}function th(n){return se(n?.getReader)}function Je(n){if(n instanceof ce)return n;if(n!=null){if(Qd(n))return BF(n);if(Wd(n))return $F(n);if(Kd(n))return HF(n);if(Yd(n))return ET(n);if(Xd(n))return zF(n);if(th(n))return qF(n)}throw Jd(n)}function BF(n){return new ce(e=>{let t=n[$s]();if(se(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function $F(n){return new ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function HF(n){return new ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ud)})}function zF(n){return new ce(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function ET(n){return new ce(e=>{GF(n,e).catch(t=>e.error(t))})}function qF(n){return ET(eh(n))}function GF(n,e){var t,r,i,o;return yT(this,void 0,void 0,function*(){try{for(t=_T(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function tn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Di(n,e=0){return _e((t,r)=>{t.subscribe(ye(r,i=>tn(r,n,()=>r.next(i),e),()=>tn(r,n,()=>r.complete(),e),i=>tn(r,n,()=>r.error(i),e)))})}function Si(n,e=0){return _e((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function IT(n,e){return Je(n).pipe(Si(e),Di(e))}function wT(n,e){return Je(n).pipe(Si(e),Di(e))}function CT(n,e){return new ce(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function bT(n,e){return new ce(t=>{let r;return tn(t,e,()=>{r=n[Zd](),tn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>se(r?.return)&&r.return()})}function nh(n,e){if(!n)throw new Error("Iterable cannot be null");return new ce(t=>{tn(t,e,()=>{let r=n[Symbol.asyncIterator]();tn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function TT(n,e){return nh(eh(n),e)}function DT(n,e){if(n!=null){if(Qd(n))return IT(n,e);if(Wd(n))return CT(n,e);if(Kd(n))return wT(n,e);if(Yd(n))return nh(n,e);if(Xd(n))return bT(n,e);if(th(n))return TT(n,e)}throw Jd(n)}function $e(n,e){return e?DT(n,e):Je(n)}function W(...n){let e=Ti(n);return $e(n,e)}function Ks(n,e){let t=se(n)?n:()=>n,r=i=>i.error(t());return new ce(e?i=>e.schedule(r,0,i):r)}function ay(n){return!!n&&(n instanceof ce||se(n.lift)&&se(n.subscribe))}var Gn=Us(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function cy(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new bi({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new Gn)}});n.subscribe(o)})}function ue(n,e){return _e((t,r)=>{let i=0;t.subscribe(ye(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:WF}=Array;function KF(n,e){return WF(e)?n(...e):n(e)}function rh(n){return ue(e=>KF(n,e))}var{isArray:QF}=Array,{getPrototypeOf:YF,prototype:JF,keys:ZF}=Object;function ih(n){if(n.length===1){let e=n[0];if(QF(e))return{args:e,keys:null};if(XF(e)){let t=ZF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function XF(n){return n&&typeof n=="object"&&YF(n)===JF}function oh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function sh(...n){let e=Ti(n),t=Gd(n),{args:r,keys:i}=ih(n);if(r.length===0)return $e([],e);let o=new ce(eL(r,e,i?s=>oh(i,s):dn));return t?o.pipe(rh(t)):o}function eL(n,e,t=dn){return r=>{ST(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)ST(e,()=>{let l=$e(n[u],e),h=!1;l.subscribe(ye(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ST(n,e,t){n?tn(t,n,e):e()}function AT(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=x=>l<r?C(x):u.push(x),C=x=>{o&&e.next(x),l++;let O=!1;Je(t(x,h++)).subscribe(ye(e,j=>{i?.(j),o?y(j):e.next(j)},()=>{O=!0},void 0,()=>{if(O)try{for(l--;u.length&&l<r;){let j=u.shift();s?tn(e,s,()=>C(j)):C(j)}m()}catch(j){e.error(j)}}))};return n.subscribe(ye(e,y,()=>{p=!0,m()})),()=>{a?.()}}function dt(n,e,t=1/0){return se(e)?dt((r,i)=>ue((o,s)=>e(r,o,i,s))(Je(n(r,i))),t):(typeof e=="number"&&(t=e),_e((r,i)=>AT(r,i,n,t)))}function MT(n=1/0){return dt(dn,n)}function RT(){return MT(1)}function Qs(...n){return RT()($e(n,Ti(n)))}function Wc(n){return new ce(e=>{Je(n()).subscribe(e)})}function uy(...n){let e=Gd(n),{args:t,keys:r}=ih(n),i=new ce(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Je(t[h]).subscribe(ye(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?oh(r,a):a),o.complete())}))}});return e?i.pipe(rh(e)):i}function hn(n,e){return _e((t,r)=>{let i=0;t.subscribe(ye(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Ai(n){return _e((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ye(t,void 0,void 0,s=>{o=Je(n(s,Ai(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function PT(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ye(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Ys(n,e){return se(e)?dt(n,e,1):dt(n,1)}function Mi(n){return _e((e,t)=>{let r=!1;e.subscribe(ye(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Wn(n){return n<=0?()=>en:_e((e,t)=>{let r=0;e.subscribe(ye(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ah(n=tL){return _e((e,t)=>{let r=!1;e.subscribe(ye(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function tL(){return new Gn}function Kc(n){return _e((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Vr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?hn((i,o)=>n(i,o,r)):dn,Wn(1),t?Mi(e):ah(()=>new Gn))}function Js(n){return n<=0?()=>en:_e((e,t)=>{let r=[];e.subscribe(ye(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ly(n,e){let t=arguments.length>=2;return r=>r.pipe(n?hn((i,o)=>n(i,o,r)):dn,Js(1),t?Mi(e):ah(()=>new Gn))}function ch(n,e){return _e(PT(n,e,arguments.length>=2,!0))}function uh(...n){let e=Ti(n);return _e((t,r)=>{(e?Qs(n,t,e):Qs(n,t)).subscribe(r)})}function nn(n,e){return _e((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ye(r,u=>{i?.unsubscribe();let l=0,h=o++;Je(n(u,h)).subscribe(i=ye(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Zs(n){return _e((e,t)=>{Je(n).subscribe(ye(t,()=>t.complete(),qc)),!t.closed&&e.subscribe(t)})}function gt(n,e,t){let r=se(n)||e||t?{next:n,error:e,complete:t}:n;return r?_e((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ye(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):dn}function OT(n){let e=le(null);try{return n()}finally{le(e)}}var Ri=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Cy=new Ri("20.3.15");var by="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",$=class extends Error{code;constructor(e,t){super($r(e,t)),this.code=e}};function nL(n){return`NG0${Math.abs(n)}`}function $r(n,e){return`${nL(n)}${e?": "+e:""}`}var Ni=globalThis;function Me(n){for(let e in n)if(n[e]===Me)return e;throw Error("")}function kT(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function jr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(jr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Ty(n,e){return n?e?`${n} ${e}`:n:e||""}var rL=Me({__forward_ref__:Me});function rn(n){return n.__forward_ref__=rn,n.toString=function(){return jr(this())},n}function bt(n){return Dy(n)?n():n}function Dy(n){return typeof n=="function"&&n.hasOwnProperty(rL)&&n.__forward_ref__===rn}function G(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function hr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Zc(n){return iL(n,fh)}function Sy(n){return Zc(n)!==null}function iL(n,e){return n.hasOwnProperty(e)&&n[e]||null}function oL(n){let e=n?.[fh]??null;return e||null}function hy(n){return n&&n.hasOwnProperty(dh)?n[dh]:null}var fh=Me({\u0275prov:Me}),dh=Me({\u0275inj:Me}),B=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=G({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ay(n){return n&&!!n.\u0275providers}var My=Me({\u0275cmp:Me}),Ry=Me({\u0275dir:Me}),Py=Me({\u0275pipe:Me}),Oy=Me({\u0275mod:Me}),Yc=Me({\u0275fac:Me}),ko=Me({__NG_ELEMENT_ID__:Me}),NT=Me({__NG_ENV_ID__:Me});function ea(n){return typeof n=="string"?n:n==null?"":String(n)}function FT(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ea(n)}var LT=Me({ngErrorCode:Me}),sL=Me({ngErrorMessage:Me}),aL=Me({ngTokenPath:Me});function Ny(n,e){return VT("",-200,e)}function ph(n,e){throw new $(-201,!1)}function VT(n,e,t){let r=new $(e,n);return r[LT]=e,r[sL]=n,t&&(r[aL]=t),r}function cL(n){return n[LT]}var fy;function UT(){return fy}function Ht(n){let e=fy;return fy=n,e}function xy(n,e,t){let r=Zc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;ph(n,"Injector")}var uL={},Po=uL,py="__NG_DI_FLAG__",gy=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Oo(t)||0;try{return this.injector.get(e,r&8?null:Po,r)}catch(i){if(Ns(i))return i;throw i}}};function lL(n,e=0){let t=Dd();if(t===void 0)throw new $(-203,!1);if(t===null)return xy(n,void 0,e);{let r=dL(e),i=t.retrieve(n,r);if(Ns(i)){if(r.optional)return null;throw i}return i}}function he(n,e=0){return(UT()||lL)(bt(n),e)}function M(n,e){return he(n,Oo(e))}function Oo(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function dL(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function my(n){let e=[];for(let t=0;t<n.length;t++){let r=bt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=hL(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(he(i,o))}else e.push(he(r))}return e}function jT(n,e){return n[py]=e,n.prototype[py]=e,n}function hL(n){return n[py]}function Pi(n,e){let t=n.hasOwnProperty(Yc);return t?n[Yc]:null}function gh(n,e){n.forEach(t=>Array.isArray(t)?gh(t,e):e(t))}function ky(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Xc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function BT(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function $T(n,e,t){let r=ta(n,e);return r>=0?n[r|1]=t:(r=~r,BT(n,r,e,t)),r}function mh(n,e){let t=ta(n,e);if(t>=0)return n[t|1]}function ta(n,e){return fL(n,e,1)}function fL(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var xi={},fn=[],An=new B(""),Fy=new B("",-1),Ly=new B(""),Jc=class{get(e,t=Po){if(t===Po){let i=VT("",-201);throw i.name="\u0275NotFound",i}return t}};function Vy(n){return n[Oy]||null}function Hr(n){return n[My]||null}function yh(n){return n[Ry]||null}function Uy(n){return n[Py]||null}function Tt(n){return{\u0275providers:n}}function HT(n){return Tt([{provide:An,multi:!0,useValue:n}])}function zT(...n){return{\u0275providers:vh(!0,n),\u0275fromNgModule:!0}}function vh(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return gh(e,s=>{let a=s;hh(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&qT(i,o),t}function qT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];jy(i,o=>{e(o,r)})}}function hh(n,e,t,r){if(n=bt(n),!n)return!1;let i=null,o=hy(n),s=!o&&Hr(n);if(!o&&!s){let u=n.ngModule;if(o=hy(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)hh(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{gh(o.imports,h=>{hh(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&qT(l,e)}if(!a){let l=Pi(i)||(()=>new i);e({provide:i,useFactory:l,deps:fn},i),e({provide:Ly,useValue:i,multi:!0},i),e({provide:An,useValue:()=>he(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;jy(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function jy(n,e){for(let t of n)Ay(t)&&(t=t.\u0275providers),Array.isArray(t)?jy(t,e):e(t)}var pL=Me({provide:String,useValue:Me});function GT(n){return n!==null&&typeof n=="object"&&pL in n}function gL(n){return!!(n&&n.useExisting)}function mL(n){return!!(n&&n.useFactory)}function No(n){return typeof n=="function"}function WT(n){return!!n.useClass}var eu=new B(""),lh={},xT={},dy;function tu(){return dy===void 0&&(dy=new Jc),dy}var Ze=class{},xo=class extends Ze{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,vy(e,s=>this.processProvider(s)),this.records.set(Fy,Xs(void 0,this)),i.has("environment")&&this.records.set(Ze,Xs(void 0,this));let o=this.records.get(eu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ly,fn,{self:!0}))}retrieve(e,t){let r=Oo(t)||0;try{return this.get(e,Po,r)}catch(i){if(Ns(i))return i;throw i}}destroy(){Qc(this),this._destroyed=!0;let e=le(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),le(e)}}onDestroy(e){return Qc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Qc(this);let t=dr(this),r=Ht(void 0),i;try{return e()}finally{dr(t),Ht(r)}}get(e,t=Po,r){if(Qc(this),e.hasOwnProperty(NT))return e[NT](this);let i=Oo(r),o,s=dr(this),a=Ht(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=IL(e)&&Zc(e);h&&this.injectableDefInScope(h)?l=Xs(yy(e),lh):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?tu():this.parent;return t=i&8&&t===Po?null:t,u.get(e,t)}catch(u){let l=cL(u);throw l===-200||l===-201?new $(l,null):u}finally{Ht(a),dr(s)}}resolveInjectorInitializers(){let e=le(null),t=dr(this),r=Ht(void 0),i;try{let o=this.get(An,fn,{self:!0});for(let s of o)s()}finally{dr(t),Ht(r),le(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(jr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=bt(e);let t=No(e)?e:bt(e&&e.provide),r=vL(e);if(!No(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Xs(void 0,lh,!0),i.factory=()=>my(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=le(null);try{if(t.value===xT)throw Ny(jr(e));return t.value===lh&&(t.value=xT,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&EL(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{le(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=bt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function yy(n){let e=Zc(n),t=e!==null?e.factory:Pi(n);if(t!==null)return t;if(n instanceof B)throw new $(204,!1);if(n instanceof Function)return yL(n);throw new $(204,!1)}function yL(n){if(n.length>0)throw new $(204,!1);let t=oL(n);return t!==null?()=>t.factory(n):()=>new n}function vL(n){if(GT(n))return Xs(void 0,n.useValue);{let e=By(n);return Xs(e,lh)}}function By(n,e,t){let r;if(No(n)){let i=bt(n);return Pi(i)||yy(i)}else if(GT(n))r=()=>bt(n.useValue);else if(mL(n))r=()=>n.useFactory(...my(n.deps||[]));else if(gL(n))r=(i,o)=>he(bt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=bt(n&&(n.useClass||n.provide));if(_L(n))r=()=>new i(...my(n.deps));else return Pi(i)||yy(i)}return r}function Qc(n){if(n.destroyed)throw new $(205,!1)}function Xs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function _L(n){return!!n.deps}function EL(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function IL(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function vy(n,e){for(let t of n)Array.isArray(t)?vy(t,e):t&&Ay(t)?vy(t.\u0275providers,e):e(t)}function et(n,e){let t;n instanceof xo?(Qc(n),t=n):t=new gy(n);let r,i=dr(t),o=Ht(void 0);try{return e()}finally{dr(i),Ht(o)}}function KT(){return UT()!==void 0||Dd()!=null}var zt=0,K=1,re=2,Xe=3,Mn=4,Rn=5,pn=6,na=7,xt=8,Pn=9,zr=10,Oe=11,ra=12,$y=13,Fo=14,on=15,Lo=16,Vo=17,Uo=18,nu=19,Hy=20,Ur=21,_h=22,ru=23,gn=24,jo=25,iu=26,Le=27,QT=1,Qn=6,fr=7,ou=8,su=9,qt=10;function mn(n){return Array.isArray(n)&&typeof n[QT]=="object"}function yn(n){return Array.isArray(n)&&n[QT]===!0}function zy(n){return(n.flags&4)!==0}function qr(n){return n.componentOffset>-1}function ia(n){return(n.flags&1)===1}function pr(n){return!!n.template}function Bo(n){return(n[re]&512)!==0}function ki(n){return(n[re]&256)===256}var YT="svg",JT="math";function vn(n){for(;Array.isArray(n);)n=n[zt];return n}function qy(n,e){return vn(e[n])}function On(n,e){return vn(e[n.index])}function oa(n,e){return n.data[e]}function ZT(n,e){return n[e]}function Gy(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Nn(n,e){let t=e[n];return mn(t)?t:t[zt]}function Eh(n){return(n[re]&128)===128}function XT(n){return yn(n[Xe])}function au(n,e){return e==null?null:n[e]}function Wy(n){n[Vo]=0}function Ky(n){n[re]&1024||(n[re]|=1024,Eh(n)&&sa(n))}function eD(n,e){for(;n>0;)e=e[Fo],n--;return e}function cu(n){return!!(n[re]&9216||n[gn]?.dirty)}function Ih(n){n[zr].changeDetectionScheduler?.notify(8),n[re]&64&&(n[re]|=1024),cu(n)&&sa(n)}function sa(n){n[zr].changeDetectionScheduler?.notify(0);let e=Oi(n);for(;e!==null&&!(e[re]&8192||(e[re]|=8192,!Eh(e)));)e=Oi(e)}function Qy(n,e){if(ki(n))throw new $(911,!1);n[Ur]===null&&(n[Ur]=[]),n[Ur].push(e)}function tD(n,e){if(n[Ur]===null)return;let t=n[Ur].indexOf(e);t!==-1&&n[Ur].splice(t,1)}function Oi(n){let e=n[Xe];return yn(e)?e[Xe]:e}function nD(n){return n[na]??=[]}function rD(n){return n.cleanup??=[]}var fe={lFrame:_D(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var _y=!1;function iD(){return fe.lFrame.elementDepthCount}function oD(){fe.lFrame.elementDepthCount++}function sD(){fe.lFrame.elementDepthCount--}function wh(){return fe.bindingsEnabled}function Yy(){return fe.skipHydrationRootTNode!==null}function aD(n){return fe.skipHydrationRootTNode===n}function cD(n){fe.skipHydrationRootTNode=n}function uD(){fe.skipHydrationRootTNode=null}function Ce(){return fe.lFrame.lView}function Gt(){return fe.lFrame.tView}function tt(n){return fe.lFrame.contextLView=n,n[xt]}function nt(n){return fe.lFrame.contextLView=null,n}function kt(){let n=Jy();for(;n!==null&&n.type===64;)n=n.parent;return n}function Jy(){return fe.lFrame.currentTNode}function lD(){let n=fe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function aa(n,e){let t=fe.lFrame;t.currentTNode=n,t.isParent=e}function Zy(){return fe.lFrame.isParent}function dD(){fe.lFrame.isParent=!1}function Xy(){return _y}function ev(n){let e=_y;return _y=n,e}function tv(){let n=fe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function hD(){return fe.lFrame.bindingIndex}function fD(n){return fe.lFrame.bindingIndex=n}function uu(){return fe.lFrame.bindingIndex++}function nv(n){let e=fe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function pD(){return fe.lFrame.inI18n}function gD(n,e){let t=fe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ch(e)}function mD(){return fe.lFrame.currentDirectiveIndex}function Ch(n){fe.lFrame.currentDirectiveIndex=n}function yD(n){let e=fe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function rv(n){fe.lFrame.currentQueryIndex=n}function wL(n){let e=n[K];return e.type===2?e.declTNode:e.type===1?n[Rn]:null}function iv(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=wL(o),i===null||(o=o[Fo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=fe.lFrame=vD();return r.currentTNode=e,r.lView=n,!0}function bh(n){let e=vD(),t=n[K];fe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function vD(){let n=fe.lFrame,e=n===null?null:n.child;return e===null?_D(n):e}function _D(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function ED(){let n=fe.lFrame;return fe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var ov=ED;function Th(){let n=ED();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ID(n){return(fe.lFrame.contextLView=eD(n,fe.lFrame.contextLView))[xt]}function Fi(){return fe.lFrame.selectedIndex}function Li(n){fe.lFrame.selectedIndex=n}function Dh(){let n=fe.lFrame;return oa(n.tView,n.selectedIndex)}function sv(){return fe.lFrame.currentNamespace}var wD=!0;function Sh(){return wD}function Gr(n){wD=n}function Ey(n,e=null,t=null,r){let i=av(n,e,t,r);return i.resolveInjectorInitializers(),i}function av(n,e=null,t=null,r,i=new Set){let o=[t||fn,zT(n)];return r=r||(typeof n=="object"?void 0:jr(n)),new xo(o,e||tu(),r||null,i)}var qe=class n{static THROW_IF_NOT_FOUND=Po;static NULL=new Jc;static create(e,t){if(Array.isArray(e))return Ey({name:""},t,e,"");{let r=e.name??"";return Ey({name:r},e.parent,e.providers,r)}}static \u0275prov=G({token:n,providedIn:"any",factory:()=>he(Fy)});static __NG_ELEMENT_ID__=-1},ht=new B(""),xn=(()=>{class n{static __NG_ELEMENT_ID__=CL;static __NG_ENV_ID__=t=>t}return n})(),Iy=class extends xn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ki(this._lView)}onDestroy(e){let t=this._lView;return Qy(t,e),()=>tD(t,e)}};function CL(){return new Iy(Ce())}var Kn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},sn=new B("",{providedIn:"root",factory:()=>{let n=M(Ze),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Kn),e.handleError(t))}}}),CD={provide:An,useValue:()=>void M(Kn),multi:!0},bL=new B("",{providedIn:"root",factory:()=>{let n=M(ht).defaultView;if(!n)return;let e=M(sn),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),M(xn).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function cv(){return Tt([HT(()=>void M(bL))])}function uv(n){return typeof n=="function"&&n[Nt]!==void 0}function _n(n,e){let[t,r,i]=Wm(n,e?.equal),o=t,s=o[Nt];return o.set=r,o.update=i,o.asReadonly=bD.bind(o),o}function bD(){let n=this[Nt];if(n.readonlyFn===void 0){let e=()=>this();e[Nt]=n,n.readonlyFn=e}return n.readonlyFn}function lv(n){return uv(n)&&typeof n.set=="function"}var Ah=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=TL}return n})();function TL(){return new Ah(Ce(),kt())}var Br=class{},ca=new B("",{providedIn:"root",factory:()=>!1});var dv=new B(""),hv=new B(""),Yn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new lt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ce(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})(),Vi=(()=>{class n{internalPendingTasks=M(Yn);scheduler=M(Br);errorHandler=M(sn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})();function lu(...n){}var fv=(()=>{class n{static \u0275prov=G({token:n,providedIn:"root",factory:()=>new wy})}return n})(),wy=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};var Mh={JSACTION:"jsaction"};function ya(n){return{toString:n}.toString()}var Rh="__parameters__";function NL(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function xL(n,e,t){return ya(()=>{let r=NL(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Rh)?u[Rh]:Object.defineProperty(u,Rh,{value:[]})[Rh];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var an=jT(xL("Optional"),8);function kL(n){return typeof n=="function"}var Vh=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function lS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Kr=(()=>{let n=()=>dS;return n.ngInherit=!0,n})();function dS(n){return n.type.prototype.ngOnChanges&&(n.setInput=LL),FL}function FL(){let n=fS(this),e=n?.current;if(e){let t=n.previous;if(t===xi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function LL(n,e,t,r,i){let o=this.declaredInputs[r],s=fS(n)||VL(n,{previous:xi,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Vh(l&&l.currentValue,t,u===xi),lS(n,e,i,t)}var hS="__ngSimpleChanges__";function fS(n){return n[hS]||null}function VL(n,e){return n[hS]=e}var TD=[];var Se=function(n,e=null,t){for(let r=0;r<TD.length;r++){let i=TD[r];i(n,e,t)}};function UL(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=dS(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function pS(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Nh(n,e,t){gS(n,e,3,t)}function xh(n,e,t,r){(n[re]&3)===t&&gS(n,e,t,r)}function pv(n,e){let t=n[re];(t&3)===e&&(t&=16383,t+=1,n[re]=t)}function gS(n,e,t,r){let i=r!==void 0?n[Vo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Vo]+=65536),(a<o||o==-1)&&(jL(n,t,e,u),n[Vo]=(n[Vo]&4294901760)+u+2),u++}function DD(n,e){Se(4,n,e);let t=le(null);try{e.call(n)}finally{le(t),Se(5,n,e)}}function jL(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[re]>>14<n[Vo]>>16&&(n[re]&3)===e&&(n[re]+=16384,DD(a,o)):DD(a,o)}var la=-1,zo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function BL(n){return(n.flags&8)!==0}function $L(n){return(n.flags&16)!==0}function HL(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];qL(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function zL(n){return n===3||n===4||n===6}function qL(n){return n.charCodeAt(0)===64}function fu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?SD(n,t,i,null,e[++r]):SD(n,t,i,null,null))}}return n}function SD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function mS(n){return n!==la}function Uh(n){return n&32767}function GL(n){return n>>16}function jh(n,e){let t=GL(n),r=e;for(;t>0;)r=r[Fo],t--;return r}var Av=!0;function Bh(n){let e=Av;return Av=n,e}var WL=256,yS=WL-1,vS=5,KL=0,gr={};function QL(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ko)&&(r=t[ko]),r==null&&(r=t[ko]=KL++);let i=r&yS,o=1<<i;e.data[n+(i>>vS)]|=o}function $h(n,e){let t=_S(n,e);if(t!==-1)return t;let r=e[K];r.firstCreatePass&&(n.injectorIndex=e.length,gv(r.data,n),gv(e,null),gv(r.blueprint,null));let i=Yv(n,e),o=n.injectorIndex;if(mS(i)){let s=Uh(i),a=jh(i,e),u=a[K].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function gv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function _S(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Yv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=bS(i),r===null)return la;if(t++,i=i[Fo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return la}function Mv(n,e,t){QL(n,e,t)}function ES(n,e,t){if(t&8||n!==void 0)return n;ph(e,"NodeInjector")}function IS(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Pn],o=Ht(void 0);try{return i?i.get(e,r,t&8):xy(e,r,t&8)}finally{Ht(o)}}return ES(r,e,t)}function wS(n,e,t,r=0,i){if(n!==null){if(e[re]&2048&&!(r&2)){let s=eV(n,e,t,r,gr);if(s!==gr)return s}let o=CS(n,e,t,r,gr);if(o!==gr)return o}return IS(e,t,r,i)}function CS(n,e,t,r,i){let o=ZL(t);if(typeof o=="function"){if(!iv(e,n,r))return r&1?ES(i,t,r):IS(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))ph(t);else return s}finally{ov()}}else if(typeof o=="number"){let s=null,a=_S(n,e),u=la,l=r&1?e[on][Rn]:null;for((a===-1||r&4)&&(u=a===-1?Yv(n,e):e[a+8],u===la||!MD(r,!1)?a=-1:(s=e[K],a=Uh(u),e=jh(u,e)));a!==-1;){let h=e[K];if(AD(o,a,h.data)){let p=YL(a,e,t,s,r,l);if(p!==gr)return p}u=e[a+8],u!==la&&MD(r,e[K].data[a+8]===l)&&AD(o,a,e)?(s=h,a=Uh(u),e=jh(u,e)):a=-1}}return i}function YL(n,e,t,r,i,o){let s=e[K],a=s.data[n+8],u=r==null?qr(a)&&Av:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=JL(a,s,t,u,l);return h!==null?Hh(e,s,h,a,i):gr}function JL(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let C=s[y];if(y<u&&t===C||y>=u&&C.type===t)return y}if(i){let y=s[u];if(y&&pr(y)&&y.type===t)return u}return null}function Hh(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof zo){let a=o;if(a.resolving){let y=FT(s[t]);throw Ny(y)}let u=Bh(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],h,p=a.injectImpl?Ht(a.injectImpl):null,m=iv(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&UL(t,s[t],e)}finally{p!==null&&Ht(p),Bh(u),a.resolving=!1,ov()}}return o}function ZL(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ko)?n[ko]:void 0;return typeof e=="number"?e>=0?e&yS:XL:e}function AD(n,e,t){let r=1<<n;return!!(t[e+(n>>vS)]&r)}function MD(n,e){return!(n&2)&&!(n&1&&e)}var Ho=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return wS(this._tNode,this._lView,e,Oo(r),t)}};function XL(){return new Ho(kt(),Ce())}function yr(n){return ya(()=>{let e=n.prototype.constructor,t=e[Yc]||Rv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Yc]||Rv(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Rv(n){return Dy(n)?()=>{let e=Rv(bt(n));return e&&e()}:Pi(n)}function eV(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[re]&2048&&!Bo(s);){let a=CS(o,s,t,r|2,gr);if(a!==gr)return a;let u=o.parent;if(!u){let l=s[Hy];if(l){let h=l.get(t,gr,r);if(h!==gr)return h}u=bS(s),s=s[Fo]}o=u}return i}function bS(n){let e=n[K],t=e.type;return t===2?e.declTNode:t===1?n[Rn]:null}function tV(){return rf(kt(),Ce())}function rf(n,e){return new Qr(On(n,e))}var Qr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=tV}return n})();var TS="ngSkipHydration",nV="ngskiphydration";function DS(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===nV)return!0}return!1}function SS(n){return n.hasAttribute(TS)}function zh(n){return(n.flags&128)===128}function AS(n){if(zh(n))return!0;let e=n.parent;for(;e;){if(zh(n)||DS(e))return!0;e=e.parent}return!1}var Jv=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Jv||{}),MS=new Map,rV=0;function iV(){return rV++}function oV(n){MS.set(n[nu],n)}function Pv(n){MS.delete(n[nu])}var RD="__ngContext__";function fa(n,e){mn(e)?(n[RD]=e[nu],oV(e)):n[RD]=e}function RS(n){return OS(n[ra])}function PS(n){return OS(n[Mn])}function OS(n){for(;n!==null&&!yn(n);)n=n[Mn];return n}var Ov;function Zv(n){Ov=n}function vu(){if(Ov!==void 0)return Ov;if(typeof document<"u")return document;throw new $(210,!1)}var vr=new B("",{providedIn:"root",factory:()=>sV}),sV="ng",of=new B(""),In=new B("",{providedIn:"platform",factory:()=>"unknown"});var sf=new B("",{providedIn:"root",factory:()=>vu().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function aV(){let n=new Ko;return n.store=cV(vu(),M(vr)),n}var Ko=(()=>{class n{static \u0275prov=G({token:n,providedIn:"root",factory:aV});store={};onSerializeCallbacks={};get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function cV(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var NS="h",xS="b",uV="f",lV="n",kS="e",FS="t",af="c",Xv="x",pu="r",LS="i",VS="n",e_="d";var US="di",jS="s",BS="p";var _u=new B(""),$S=!1,t_=new B("",{providedIn:"root",factory:()=>$S});var n_=new B(""),HS=!1,zS=new B(""),r_=new B("",{providedIn:"root",factory:()=>new Map});var Eu="ngb";var qS=(n,e,t)=>{let r=n,i=r.__jsaction_fns??new Map,o=i.get(e)??[];o.push(t),i.set(e,o),r.__jsaction_fns=i},GS=(n,e)=>{let t=n,r=t.getAttribute(Eu)??"",i=e.get(r)??new Set;i.has(t)||i.add(t),e.set(r,i)};var WS=n=>{n.removeAttribute(Mh.JSACTION),n.removeAttribute(Eu),n.__jsaction_fns=void 0},KS=new B("",{providedIn:"root",factory:()=>({})});function i_(n,e){let t=e?.__jsaction_fns?.get(n.type);if(!(!t||!e?.isConnected))for(let r of t)r(n)}var Nv=new Map;function QS(n,e){return Nv.set(n,e),()=>Nv.delete(n)}var PD=!1,YS=(n,e,t,r)=>{};function dV(n,e,t,r){YS(n,e,t,r)}function JS(){PD||(YS=(n,e,t,r)=>{let i=n[Pn].get(vr);Nv.get(i)?.(e,t,r)},PD=!0)}var cf=new B("");function uf(n){return(n.flags&32)===32}var hV="__nghData__",o_=hV,fV="__nghDeferData__",ZS=fV;var kh="ngh",XS="nghm",eA=()=>null;function pV(n,e,t=!1){let r=n.getAttribute(kh);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,u={};if(r!==""){let h=e.get(Ko,null,{optional:!0});h!==null&&(u=h.get(o_,[])[Number(r)])}let l={data:u,firstChild:n.firstChild??null};return t&&(l.firstChild=n,lf(l,0,n.nextSibling)),a?n.setAttribute(kh,a):n.removeAttribute(kh),l}function tA(){eA=pV}function nA(n,e,t=!1){return eA(n,e,t)}function rA(n){let e=n._lView;return e[K].type===2?null:(Bo(e)&&(e=e[Le]),e)}function gV(n){return n.textContent?.replace(/\s/gm,"")}function mV(n){let e=vu(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=gV(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function lf(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function xv(n,e){return n.segmentHeads?.[e]??null}function iA(n){return n.get(zS,!1,{optional:!0})}function yV(n,e){let t=n.data,r=t[kS]?.[e]??null;return r===null&&t[af]?.[e]&&(r=s_(n,e)),r}function oA(n,e){return n.data[af]?.[e]??null}function s_(n,e){let t=oA(n,e)??[],r=0;for(let i of t)r+=i[pu]*(i[Xv]??1);return r}function vV(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[e_];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function sA(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[e_];n.disconnectedNodes=t?new Set(t):null}return!!vV(n)?.has(e)}function df(n,e){let t=n[pn];return t!==null&&!Yy()&&!uf(e)&&!sA(t,e.index-Le)}function _V(n,e){let t=e.get(cf),i=e.get(Ko).get(ZS,{}),o=!1,s=n,a=null,u=[];for(;!o&&s;){o=t.has(s);let l=t.hydrating.get(s);if(a===null&&l!=null){a=l.promise;break}u.unshift(s),s=i[s][BS]}return{parentBlockPromise:a,hydrationQueue:u}}function mv(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===XS}function OD(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function aA(n){for(let r of n.body.childNodes)if(mv(r))return;let e=OD(n.body.previousSibling);if(mv(e))return;let t=OD(n.head.lastChild);if(!mv(t))throw new $(-507,!1)}function cA(n,e){let t=n.contentQueries;if(t!==null){let r=le(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];rv(o),a.contentQueries(2,e[s],s)}}}finally{le(r)}}}function kv(n,e,t){rv(0);let r=le(null);try{e(n,t)}finally{le(r)}}function a_(n,e,t){if(zy(e)){let r=le(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{le(r)}}}var Wr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Wr||{});var Fv=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${by})`}};function c_(n){return n instanceof Fv?n.changingThisBreaksApplicationSecurity:n}var EV=/^>|^->|<!--|-->|--!>|<!-$/g,IV=/(<|>)/g,wV="\u200B$1\u200B";function CV(n){return n.replace(EV,e=>e.replace(IV,wV))}function uA(n,e){return n.createText(e)}function bV(n,e,t){n.setValue(e,t)}function lA(n,e){return n.createComment(CV(e))}function u_(n,e,t){return n.createElement(e,t)}function qh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function dA(n,e,t){n.appendChild(e,t)}function ND(n,e,t,r,i){r!==null?qh(n,e,t,r,i):dA(n,e,t)}function l_(n,e,t,r){n.removeChild(null,e,t,r)}function hA(n){n.textContent=""}function TV(n,e,t){n.setAttribute(e,"style",t)}function DV(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function fA(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&HL(n,e,r),i!==null&&DV(n,e,i),o!==null&&TV(n,e,o)}function pA(n){return n.ownerDocument.body}function gA(n){return n instanceof Function?n():n}function SV(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var mA="ng-template";function AV(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&SV(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(d_(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function d_(n){return n.type===4&&n.value!==mA}function MV(n,e,t){let r=n.type===4&&!t?mA:n.value;return e===r}function RV(n,e,t){let r=4,i=n.attrs,o=i!==null?NV(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Jn(r)&&!Jn(u))return!1;if(s&&Jn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!MV(n,u,t)||u===""&&e.length===1){if(Jn(r))return!1;s=!0}}else if(r&8){if(i===null||!AV(n,i,u,t)){if(Jn(r))return!1;s=!0}}else{let l=e[++a],h=PV(u,i,d_(n),t);if(h===-1){if(Jn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Jn(r))return!1;s=!0}}}}return Jn(r)||s}function Jn(n){return(n&1)===0}function PV(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return xV(e,n)}function OV(n,e,t=!1){for(let r=0;r<e.length;r++)if(RV(n,e[r],t))return!0;return!1}function NV(n){for(let e=0;e<n.length;e++){let t=n[e];if(zL(t))return e}return n.length}function xV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function xD(n,e){return n?":not("+e.trim()+")":e}function kV(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Jn(s)&&(e+=xD(o,i),i=""),r=s,o=o||!Jn(r);t++}return i!==""&&(e+=xD(o,i)),e}function FV(n){return n.map(kV).join(",")}function LV(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Jn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Zn={};function h_(n,e,t,r,i,o,s,a,u,l,h){let p=Le+r,m=p+i,y=VV(p,m),C=typeof l=="function"?l():l;return y[K]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function VV(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Zn);return t}function UV(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=h_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function f_(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[zt]=i,p[re]=r|4|128|8|64|1024,(l!==null||n&&n[re]&2048)&&(p[re]|=2048),Wy(p),p[Xe]=p[Fo]=n,p[xt]=t,p[zr]=s||n&&n[zr],p[Oe]=a||n&&n[Oe],p[Pn]=u||n&&n[Pn]||null,p[Rn]=o,p[nu]=iV(),p[pn]=h,p[Hy]=l,p[on]=e.type==2?n[on]:p,p}function jV(n,e,t){let r=On(e,n),i=UV(t),o=n[zr].rendererFactory,s=p_(n,f_(n,i,null,yA(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function yA(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function vA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function p_(n,e){return n[ra]?n[$y][Mn]=e:n[ra]=e,n[$y]=e,e}function F(n=1){_A(Gt(),Ce(),Fi()+n,!1)}function _A(n,e,t,r){if(!r)if((e[re]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Nh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&xh(e,o,0,t)}Li(t)}var hf=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(hf||{});function Lv(n,e,t,r){let i=le(null);try{let[o,s,a]=n.inputs[t],u=null;(s&hf.SignalBased)!==0&&(u=e[o][Nt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):lS(e,u,o,r)}finally{le(i)}}var mr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(mr||{}),BV;function g_(n,e){return BV(n,e)}var pa=new Set,ff=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(ff||{}),Qo=new B(""),kD=new Set;function Yr(n){kD.has(n)||(kD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var EA=!1,Vv=class extends Qe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,KT()&&(this.destroyRef=M(xn,{optional:!0})??void 0,this.pendingTasks=M(Yn,{optional:!0})??void 0)}emit(e){let t=le(null);try{super.next(e)}finally{le(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ze&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ge=Vv;function IA(n){let e,t;function r(){n=lu;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function FD(n){return queueMicrotask(()=>n()),()=>{n=lu}}var m_="isAngularZone",Gh=m_+"_ID",$V=0,be=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ge(!1);onMicrotaskEmpty=new Ge(!1);onStable=new Ge(!1);onError=new Ge(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=EA}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,qV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(m_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new $(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,HV,lu,lu);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},HV={};function y_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function zV(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){IA(()=>{n.callbackScheduled=!1,Uv(n),n.isCheckStableRunning=!0,y_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Uv(n)}function qV(n){let e=()=>{zV(n)},t=$V++;n._inner=n._inner.fork({name:"angular",properties:{[m_]:!0,[Gh]:t,[Gh+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(GV(u))return r.invokeTask(o,s,a,u);try{return LD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),VD(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return LD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!WV(u)&&e(),VD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Uv(n),y_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Uv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function LD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function VD(n){n._nesting--,y_(n)}var Wh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ge;onMicrotaskEmpty=new Ge;onStable=new Ge;onError=new Ge;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function GV(n){return wA(n,"__ignore_ng_zone__")}function WV(n){return wA(n,"__scheduler_tick__")}function wA(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var v_=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})(),CA=[0,1,2,3],bA=(()=>{class n{ngZone=M(be);scheduler=M(Br);errorHandler=M(Kn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(Qo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Se(16),this.executing=!0;for(let r of CA)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Se(17)}register(t){let{view:r}=t;r!==void 0?((r[jo]??=[]).push(t),sa(r),r[re]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(ff.AFTER_NEXT_RENDER,t):t()}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})(),Kh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[jo];e&&(this.view[jo]=e.filter(t=>t!==this))}};function Iu(n,e){let t=e?.injector??M(qe);return Yr("NgAfterNextRender"),QV(n,t,e,!0)}function KV(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function QV(n,e,t,r){let i=e.get(v_);i.impl??=e.get(bA);let o=e.get(Qo,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(xn):null,a=e.get(Ah,null,{optional:!0}),u=new Kh(i.impl,KV(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var YV=new B("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function TA(n,e,t){let r=n.get(YV);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function JV(n,e){for(let[t,r]of e)TA(n,r.animateFns)}function UD(n,e,t,r){let i=n?.[iu]?.enter;e!==null&&i&&i.has(t.index)&&JV(r,i)}function ua(n,e,t,r,i,o,s,a){if(i!=null){let u,l=!1;yn(i)?u=i:mn(i)&&(l=!0,i=i[zt]);let h=vn(i);n===0&&r!==null?(UD(a,r,o,t),s==null?dA(e,r,h):qh(e,r,h,s||null,!0)):n===1&&r!==null?(UD(a,r,o,t),qh(e,r,h,s||null,!0)):n===2?jD(a,o,t,p=>{l_(e,h,l,p)}):n===3&&jD(a,o,t,()=>{e.destroyNode(h)}),u!=null&&l2(e,n,t,u,o,r,s)}}function ZV(n,e){DA(n,e),e[zt]=null,e[Rn]=null}function XV(n,e,t,r,i,o){r[zt]=i,r[Rn]=e,pf(n,r,t,1,i,o)}function DA(n,e){e[zr].changeDetectionScheduler?.notify(9),pf(n,e,e[Oe],2,null,null)}function e2(n){let e=n[ra];if(!e)return yv(n[K],n);for(;e;){let t=null;if(mn(e))t=e[ra];else{let r=e[qt];r&&(t=r)}if(!t){for(;e&&!e[Mn]&&e!==n;)mn(e)&&yv(e[K],e),e=e[Xe];e===null&&(e=n),mn(e)&&yv(e[K],e),t=e&&e[Mn]}e=t}}function __(n,e){let t=n[su],r=t.indexOf(e);t.splice(r,1)}function E_(n,e){if(ki(e))return;let t=e[Oe];t.destroyNode&&pf(n,e,t,3,null,null),e2(e)}function yv(n,e){if(ki(e))return;let t=le(null);try{e[re]&=-129,e[re]|=256,e[gn]&&zc(e[gn]),r2(n,e),n2(n,e),e[K].type===1&&e[Oe].destroy();let r=e[Lo];if(r!==null&&yn(e[Xe])){r!==e[Xe]&&__(r,e);let i=e[Uo];i!==null&&i.detachView(n)}Pv(e)}finally{le(t)}}function jD(n,e,t,r){let i=n?.[iu];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&pa.add(n),TA(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),t2(n,r)}else n&&pa.delete(n),r(!1)},i)}function t2(n,e){let t=n[iu]?.running;if(t){t.then(()=>{n[iu].running=void 0,pa.delete(n),e(!0)});return}e(!1)}function n2(n,e){let t=n.cleanup,r=e[na];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[na]=null);let i=e[Ur];if(i!==null){e[Ur]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[ru];if(o!==null){e[ru]=null;for(let s of o)s.destroy()}}function r2(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof zo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Se(4,a,u);try{u.call(a)}finally{Se(5,a,u)}}else{Se(4,i,o);try{o.call(i)}finally{Se(5,i,o)}}}}}function i2(n,e,t){return o2(n,e.parent,t)}function o2(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[zt];if(qr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Wr.None||i===Wr.Emulated)return null}return On(r,t)}function s2(n,e,t){return c2(n,e,t)}function a2(n,e,t){return n.type&40?On(n,t):null}var c2=a2,BD;function I_(n,e,t,r){let i=i2(n,r,e),o=e[Oe],s=r.parent||e[Rn],a=s2(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)ND(o,i,t[u],a,!1);else ND(o,i,t,a,!1);BD!==void 0&&BD(o,r,e,t,i)}function du(n,e){if(e!==null){let t=e.type;if(t&3)return On(e,n);if(t&4)return jv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return du(n,r);{let i=n[e.index];return yn(i)?jv(-1,i):vn(i)}}else{if(t&128)return du(n,e.next);if(t&32)return g_(e,n)()||vn(n[e.index]);{let r=SA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Oi(n[on]);return du(i,r)}else return du(n,e.next)}}}return null}function SA(n,e){if(e!==null){let r=n[on][Rn],i=e.projection;return r.projection[i]}return null}function jv(n,e){let t=qt+n+1;if(t<e.length){let r=e[t],i=r[K].firstChild;if(i!==null)return du(r,i)}return e[fr]}function w_(n,e,t,r,i,o,s){for(;t!=null;){let a=r[Pn];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&fa(vn(u),r),t.flags|=2),!uf(t))if(l&8)w_(n,e,t.child,r,i,o,!1),ua(e,n,a,i,u,t,o,r);else if(l&32){let h=g_(t,r),p;for(;p=h();)ua(e,n,a,i,p,t,o,r);ua(e,n,a,i,u,t,o,r)}else l&16?u2(n,e,r,t,i,o):ua(e,n,a,i,u,t,o,r);t=s?t.projectionNext:t.next}}function pf(n,e,t,r,i,o){w_(t,r,n.firstChild,e,i,o,!1)}function u2(n,e,t,r,i,o){let s=t[on],u=s[Rn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];ua(e,n,t[Pn],i,h,r,o,t)}else{let l=u,h=s[Xe];zh(r)&&(l.flags|=128),w_(n,e,l,h,i,o,!0)}}function l2(n,e,t,r,i,o,s){let a=r[fr],u=vn(r);a!==u&&ua(e,n,t,o,a,i,s);for(let l=qt;l<r.length;l++){let h=r[l];pf(h[K],h,n,e,o,a)}}function d2(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:mr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=mr.Important),n.setStyle(t,r,i,o))}}function AA(n,e,t,r,i){let o=Fi(),s=r&2;try{Li(-1),s&&e.length>Le&&_A(n,e,Le,!1),Se(s?2:0,i,t),t(r,i)}finally{Li(o),Se(s?3:1,i,t)}}function gf(n,e,t){v2(n,e,t),(t.flags&64)===64&&_2(n,e,t)}function C_(n,e,t=On){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function h2(n,e,t,r){let o=r.get(t_,$S)||t===Wr.ShadowDom,s=n.selectRootElement(e,o);return f2(s),s}function f2(n){MA(n)}var MA=()=>null;function p2(n){SS(n)?hA(n):mV(n)}function RA(){MA=p2}function g2(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function PA(n,e,t,r,i,o){let s=e[K];if(D_(n,s,e,t,r)){qr(n)&&y2(e,n.index);return}n.type&3&&(t=g2(t)),m2(n,e,t,r,i,o)}function m2(n,e,t,r,i,o){if(n.type&3){let s=On(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function y2(n,e){let t=Nn(e,n);t[re]&16||(t[re]|=64)}function v2(n,e,t){let r=t.directiveStart,i=t.directiveEnd;qr(t)&&jV(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||$h(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=Hh(e,n,s,t);if(fa(u,e),o!==null&&C2(e,s-r,u,a,t,o),pr(a)){let l=Nn(t.index,e);l[xt]=Hh(e,n,s,t)}}}function _2(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=mD();try{Li(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Ch(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&E2(u,l)}}finally{Li(-1),Ch(s)}}function E2(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function b_(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];OV(e,o.selectors,!1)&&(r??=[],pr(o)?r.unshift(o):r.push(o))}return r}function I2(n,e,t,r,i,o){let s=On(n,e);w2(e[Oe],s,o,n.value,t,r,i)}function w2(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?ea(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function C2(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Lv(r,t,u,l)}}function OA(n,e,t,r,i){let o=Le+t,s=e[K],a=i(s,e,n,r,t);e[o]=a,aa(n,!0);let u=n.type===2;return u?(fA(e[Oe],a,n),(iD()===0||ia(n))&&fa(a,e),oD()):fa(a,e),Sh()&&(!u||!uf(n))&&I_(s,e,a,n),n}function NA(n){let e=n;return Zy()?dD():(e=e.parent,aa(e,!1)),e}function T_(n,e){let t=n[Pn];if(!t)return;let r;try{r=t.get(sn,null)}catch{r=null}r?.(e)}function D_(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Lv(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];Lv(h,l,r,i),a=!0}return a}function b2(n,e){let t=Nn(e,n),r=t[K];T2(r,t);let i=t[zt];i!==null&&t[pn]===null&&(t[pn]=nA(i,t[Pn])),Se(18),S_(r,t,t[xt]),Se(19,t[xt])}function T2(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function S_(n,e,t){bh(e);try{let r=n.viewQuery;r!==null&&kv(1,r,t);let i=n.template;i!==null&&AA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Uo]?.finishViewCreation(n),n.staticContentQueries&&cA(n,e),n.staticViewQueries&&kv(2,n.viewQuery,t);let o=n.components;o!==null&&D2(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[re]&=-5,Th()}}function D2(n,e){for(let t=0;t<e.length;t++)b2(n,e[t])}function xA(n,e,t,r){let i=le(null);try{let o=e.tView,a=n[re]&4096?4096:16,u=f_(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Lo]=l;let h=n[Uo];return h!==null&&(u[Uo]=h.createEmbeddedView(o)),S_(o,u,t),u}finally{le(i)}}function Bv(n,e){return!e||e.firstChild===null||zh(n)}function gu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(vn(o)),yn(o)&&kA(o,r);let s=t.type;if(s&8)gu(n,e,t.child,r);else if(s&32){let a=g_(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=SA(e,t);if(Array.isArray(a))r.push(...a);else{let u=Oi(e[on]);gu(u[K],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function kA(n,e){for(let t=qt;t<n.length;t++){let r=n[t],i=r[K].firstChild;i!==null&&gu(r[K],r,i,e)}n[fr]!==n[zt]&&e.push(n[fr])}function FA(n){if(n[jo]!==null){for(let e of n[jo])e.impl.addSequence(e);n[jo].length=0}}var LA=[];function S2(n){return n[gn]??A2(n)}function A2(n){let e=LA.pop()??Object.create(R2);return e.lView=n,e}function M2(n){n.lView[gn]!==n&&(n.lView=null,LA.push(n))}var R2=de(V({},xs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{sa(n.lView)},consumerOnSignalRead(){this.lView[gn]=this}});function P2(n){let e=n[gn]??Object.create(O2);return e.lView=n,e}var O2=de(V({},xs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Oi(n.lView);for(;e&&!VA(e[K]);)e=Oi(e);e&&Ky(e)},consumerOnSignalRead(){this.lView[gn]=this}});function VA(n){return n.type!==2}function UA(n){if(n[ru]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[ru])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[re]&8192)}}var N2=100;function jA(n,e=0){let r=n[zr].rendererFactory,i=!1;i||r.begin?.();try{x2(n,e)}finally{i||r.end?.()}}function x2(n,e){let t=Xy();try{ev(!0),$v(n,e);let r=0;for(;cu(n);){if(r===N2)throw new $(103,!1);r++,$v(n,1)}}finally{ev(t)}}function k2(n,e,t,r){if(ki(e))return;let i=e[re],o=!1,s=!1;bh(e);let a=!0,u=null,l=null;o||(VA(n)?(l=S2(e),u=Fs(l)):Pd()===null?(a=!1,l=P2(e),u=Fs(l)):e[gn]&&(zc(e[gn]),e[gn]=null));try{Wy(e),fD(n.bindingStartIndex),t!==null&&AA(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Nh(e,y,null)}else{let y=n.preOrderHooks;y!==null&&xh(e,y,0,null),pv(e,0)}if(s||F2(e),UA(e),BA(e,0),n.contentQueries!==null&&cA(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Nh(e,y)}else{let y=n.contentHooks;y!==null&&xh(e,y,1),pv(e,1)}V2(n,e);let p=n.components;p!==null&&HA(e,p,0);let m=n.viewQuery;if(m!==null&&kv(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Nh(e,y)}else{let y=n.viewHooks;y!==null&&xh(e,y,2),pv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[_h]){for(let y of e[_h])y();e[_h]=null}o||(FA(e),e[re]&=-73)}catch(h){throw o||sa(e),h}finally{l!==null&&($c(l,u),a&&M2(l)),Th()}}function BA(n,e){for(let t=RS(n);t!==null;t=PS(t))for(let r=qt;r<t.length;r++){let i=t[r];$A(i,e)}}function F2(n){for(let e=RS(n);e!==null;e=PS(e)){if(!(e[re]&2))continue;let t=e[su];for(let r=0;r<t.length;r++){let i=t[r];Ky(i)}}}function L2(n,e,t){Se(18);let r=Nn(e,n);$A(r,t),Se(19,r[xt])}function $A(n,e){Eh(n)&&$v(n,e)}function $v(n,e){let r=n[K],i=n[re],o=n[gn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Hc(o)),s||=!1,o&&(o.dirty=!1),n[re]&=-9217,s)k2(r,n,r.template,n[xt]);else if(i&8192){let a=le(null);try{UA(n),BA(n,1);let u=r.components;u!==null&&HA(n,u,1),FA(n)}finally{le(a)}}}function HA(n,e,t){for(let r=0;r<e.length;r++)L2(n,e[r],t)}function V2(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Li(~i);else{let o=i,s=t[++r],a=t[++r];gD(s,o);let u=e[o];Se(24,u),a(2,u),Se(25,u)}}}finally{Li(-1)}}function mf(n,e){let t=Xy()?64:1088;for(n[zr].changeDetectionScheduler?.notify(e);n;){n[re]|=t;let r=Oi(n);if(Bo(n)&&!r)return n;n=r}return null}function zA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function qA(n,e,t,r=!0){let i=e[K];if(j2(i,e,n,t),r){let s=jv(t,n),a=e[Oe],u=a.parentNode(n[fr]);u!==null&&XV(i,n[Rn],a,e,u,s)}let o=e[pn];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function U2(n,e){let t=Qh(n,e);return t!==void 0&&E_(t[K],t),t}function Qh(n,e){if(n.length<=qt)return;let t=qt+e,r=n[t];if(r){let i=r[Lo];i!==null&&i!==n&&__(i,r),e>0&&(n[t-1][Mn]=r[Mn]);let o=Xc(n,qt+e);ZV(r[K],r);let s=o[Uo];s!==null&&s.detachView(o[K]),r[Xe]=null,r[Mn]=null,r[re]&=-129}return r}function j2(n,e,t,r){let i=qt+r,o=t.length;r>0&&(t[i-1][Mn]=e),r<o-qt?(e[Mn]=t[i],ky(t,qt+r,e)):(t.push(e),e[Mn]=null),e[Xe]=t;let s=e[Lo];s!==null&&t!==s&&GA(s,e);let a=e[Uo];a!==null&&a.insertView(n),Ih(e),e[re]|=128}function GA(n,e){let t=n[su],r=e[Xe];if(mn(r))n[re]|=2;else{let i=r[Xe][on];e[on]!==i&&(n[re]|=2)}t===null?n[su]=[e]:t.push(e)}var Ui=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[K];return gu(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[xt]}set context(e){this._lView[xt]=e}get destroyed(){return ki(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Xe];if(yn(e)){let t=e[ou],r=t?t.indexOf(this):-1;r>-1&&(Qh(e,r),Xc(t,r))}this._attachedToViewContainer=!1}E_(this._lView[K],this._lView)}onDestroy(e){Qy(this._lView,e)}markForCheck(){mf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[re]&=-129}reattach(){Ih(this._lView),this._lView[re]|=128}detectChanges(){this._lView[re]|=1024,jA(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Bo(this._lView),t=this._lView[Lo];t!==null&&!e&&__(t,this._lView),DA(this._lView[K],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let t=Bo(this._lView),r=this._lView[Lo];r!==null&&!t&&GA(r,this._lView),Ih(this._lView)}};var wu=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=B2;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=xA(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Ui(o)}}return n})();function B2(){return $2(kt(),Ce())}function $2(n,e){return n.type&4?new wu(e,n,rf(n,e)):null}function A_(n,e,t,r,i){let o=n.data[e];if(o===null)o=H2(n,e,t,r,i),pD()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=lD();o.injectorIndex=s===null?-1:s.injectorIndex}return aa(o,!0),o}function H2(n,e,t,r,i){let o=Jy(),s=Zy(),a=s?o:o&&o.parent,u=n.data[e]=q2(n,a,t,e,r,i);return z2(n,u,o,s),u}function z2(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function q2(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Yy()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var G2=new RegExp(`^(\\d+)*(${xS}|${NS})*(.*)`);function W2(n){let e=n.match(G2),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[u,l,h]of o.matchAll(/(f|n)(\d*)/g)){let p=parseInt(h,10)||1;a.push(l,p)}return[s,...a]}function K2(n){return!n.prev&&n.parent?.type===8}function vv(n){return n.index-Le}function Q2(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function yf(n,e,t,r){let i=vv(r),o=Q2(n,i);if(o===void 0){let s=n.data[VS];if(s?.[i])o=J2(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,u=r.prev??r.parent;if(K2(r)){let l=vv(r.parent);o=xv(n,l)}else{let l=On(u,t);if(a)o=l.firstChild;else{let h=vv(u),p=xv(n,h);if(u.type===2&&p){let y=s_(n,h)+1;o=vf(y,p)}else o=l.nextSibling}}}}return o}function vf(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function Y2(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case uV:t=t.firstChild;break;case lV:t=t.nextSibling;break}}return t}function J2(n,e){let[t,...r]=W2(n),i;if(t===NS)i=e[on][zt];else if(t===xS)i=pA(e[on][zt]);else{let o=Number(t);i=vn(e[o+Le])}return Y2(i,r)}var Z2=!1;function WA(n){Z2=n}function X2(n){let e=n[pn];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[Oe];for(let o of r.values())eU(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function eU(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Le);i&&l_(n,i,!1)}}function M_(n){let e=n[Qn]??[],r=n[Xe][Oe],i=[];for(let o of e)o.data[US]!==void 0?i.push(o):KA(o,r);n[Qn]=i}function tU(n){let{lContainer:e}=n,t=e[Qn];if(t===null)return;let i=e[Xe][Oe];for(let o of t)KA(o,i)}function KA(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[pu];for(;t<i;){let o=r.nextSibling;l_(e,r,!1),r=o,t++}}}function _f(n){M_(n);let e=n[zt];mn(e)&&Yh(e);for(let t=qt;t<n.length;t++)Yh(n[t])}function Yh(n){X2(n);let e=n[K];for(let t=Le;t<e.bindingStartIndex;t++)if(yn(n[t])){let r=n[t];_f(r)}else mn(n[t])&&Yh(n[t])}function R_(n){let e=n._views;for(let t of e){let r=rA(t);r!==null&&r[zt]!==null&&(mn(r)?Yh(r):_f(r))}}function nU(n,e,t,r){n!==null&&(t.cleanup(e),_f(n.lContainer),R_(r))}function rU(n,e){let t=[];for(let r of e)for(let i=0;i<(r[Xv]??1);i++){let o={data:r,firstChild:null};r[pu]>0&&(o.firstChild=n,n=vf(r[pu],n)),t.push(o)}return[n,t]}var QA=()=>null,iU=()=>null;function YA(){QA=oU,iU=sU}function oU(n,e){return JA(n,e)?n[Qn].shift():(M_(n),null)}function Hv(n,e){return QA(n,e)}function sU(n,e,t){if(e.tView.ssrId===null)return null;let r=Hv(n,e.tView.ssrId);return t[K].firstUpdatePass&&r===null&&aU(t,e),r}function aU(n,e){let t=e;for(;t;){if($D(n,t))return;if((t.flags&256)===256)break;t=t.prev}for(t=e.next;t&&(t.flags&512)===512;){if($D(n,t))return;t=t.next}}function JA(n,e){let t=n[Qn];return!e||t===null||t.length===0?!1:t[0].data[LS]===e}function $D(n,e){let t=e.tView?.ssrId;if(t==null)return!1;let r=n[e.index];return yn(r)&&JA(r,t)?(M_(r),!0):!1}var ZA=class{},Ef=class{},zv=class{resolveComponentFactory(e){throw new $(917,!1)}},Cu=class{static NULL=new zv},qo=class{},Bi=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>cU()}return n})();function cU(){let n=Ce(),e=kt(),t=Nn(e.index,n);return(mn(t)?t:n)[Oe]}var XA=(()=>{class n{static \u0275prov=G({token:n,providedIn:"root",factory:()=>null})}return n})();var Fh={},da=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Fh,r);return i!==Fh||t===Fh?i:this.parentInjector.get(e,t,r)}};function HD(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Ty(i,a);else if(o==2){let u=a,l=e[++s];r=Ty(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function J(n,e=0){let t=Ce();if(t===null)return he(n,e);let r=kt();return wS(r,t,bt(n),e)}function eM(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}dU(n,e,t,a,o,u,l)}o!==null&&r!==null&&uU(t,r,o)}function uU(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new $(-301,!1);r.push(e[i],o)}}function lU(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function dU(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&pr(y)&&(u=!0,lU(n,t,m)),Mv($h(t,e),n,y.type)}yU(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=vA(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=fu(t.mergedAttrs,y.hostAttrs),fU(n,t,e,p,y),mU(p,y,i),s!==null&&s.has(y)){let[x,O]=s.get(y);t.directiveToIndex.set(y.type,[p,x+t.directiveStart,O+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let C=y.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(C.ngOnChanges||C.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}hU(n,t,o)}function hU(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))zD(0,e,i,r),zD(1,e,i,r),GD(e,r,!1);else{let o=t.get(i);qD(0,e,o,r),qD(1,e,o,r),GD(e,r,!0)}}}function zD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),tM(e,o)}}function qD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),tM(e,s)}}function tM(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function GD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||d_(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function fU(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Pi(i.type,!0)),s=new zo(o,pr(i),J,null);n.blueprint[r]=s,t[r]=s,pU(n,e,r,vA(n,t,i.hostVars,Zn),i)}function pU(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;gU(s)!=a&&s.push(a),s.push(t,r,o)}}function gU(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function mU(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;pr(e)&&(t[""]=n)}}function yU(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function P_(n,e,t,r,i,o,s,a){let u=e[K],l=u.consts,h=au(l,s),p=A_(u,n,t,r,h);return o&&eM(u,e,p,au(l,a),i),p.mergedAttrs=fu(p.mergedAttrs,p.attrs),p.attrs!==null&&HD(p,p.attrs,!1),p.mergedAttrs!==null&&HD(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function O_(n,e){pS(n,e),zy(e)&&n.queries.elementEnd(e)}function N_(n){return rM(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function nM(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function rM(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function iM(n,e,t){return n[e]=t}function ji(n,e,t){if(t===Zn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function oM(n,e,t,r){let i=ji(n,e,t);return ji(n,e+1,r)||i}function _v(n,e,t){return function r(i){let o=qr(n)?Nn(n.index,e):e;mf(o,5);let s=e[xt],a=WD(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=WD(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function WD(n,e,t,r){let i=le(null);try{return Se(6,e,t),t(r)!==!1}catch(o){return T_(n,o),!1}finally{Se(7,e,t),le(i)}}function vU(n,e,t,r,i,o,s,a){let u=ia(n),l=!1,h=null;if(!r&&u&&(h=EU(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=On(n,t),m=r?r(p):p;dV(t,m,o,a);let y=i.listen(m,o,a);if(!_U(o)){let C=r?x=>r(vn(x[n.index])):n.index;sM(C,e,t,o,a,y,!1)}}return l}function _U(n){return n.startsWith("animation")||n.startsWith("transition")}function EU(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[na],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function sM(n,e,t,r,i,o,s){let a=e.firstCreatePass?rD(e):null,u=nD(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function KD(n,e,t,r,i,o){let s=e[t],a=e[K],l=a.data[t].outputs[r],p=s[l].subscribe(o);sM(n.index,a,e,i,o,p,!0)}var qv=Symbol("BINDING");var Jh=class extends Cu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Hr(e);return new ga(t,this.ngModule)}};function IU(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&hf.SignalBased)!==0};return i&&(o.transform=i),o})}function wU(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function CU(n,e,t){let r=e instanceof Ze?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new da(t,r):t}function bU(n){let e=n.get(qo,null);if(e===null)throw new $(407,!1);let t=n.get(XA,null),r=n.get(Br,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function TU(n,e){let t=aM(n);return u_(e,t,t==="svg"?YT:t==="math"?JT:null)}function aM(n){return(n.selectors[0][0]||"div").toLowerCase()}var ga=class extends Ef{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=IU(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=wU(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=FV(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Se(22);let a=le(null);try{let u=this.componentDef,l=DU(r,u,s,o),h=CU(u,i||this.ngModule,e),p=bU(h),m=p.rendererFactory.createRenderer(null,u),y=r?h2(m,r,u.encapsulation,h):TU(u,m),C=s?.some(QD)||o?.some(j=>typeof j!="function"&&j.bindings.some(QD)),x=f_(null,l,null,512|yA(u),null,null,p,m,h,null,nA(y,h,!0));x[Le]=y,bh(x);let O=null;try{let j=P_(Le,x,2,"#host",()=>l.directiveRegistry,!0,0);fA(m,y,j),fa(y,x),gf(l,x,j),a_(l,j,x),O_(l,j),t!==void 0&&AU(j,this.ngContentSelectors,t),O=Nn(j.index,x),x[xt]=O[xt],S_(l,x,null)}catch(j){throw O!==null&&Pv(O),Pv(x),j}finally{Se(23),Th()}return new Zh(this.componentType,x,!!C)}finally{le(a)}}};function DU(n,e,t,r){let i=n?["ng-version","20.3.15"]:LV(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[qv].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[qv].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=yh(p);u.push(m)}return h_(0,null,SU(o,s),1,a,u,null,null,null,[i],null)}function SU(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function QD(n){let e=n[qv].kind;return e==="input"||e==="twoWay"}var Zh=class extends ZA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=oa(t[K],Le),this.location=rf(this._tNode,t),this.instance=Nn(this._tNode.index,t)[xt],this.hostView=this.changeDetectorRef=new Ui(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=D_(r,i[K],i,e,t);this.previousInputValues.set(e,t);let s=Nn(r.index,i);mf(s,1)}get injector(){return new Ho(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function AU(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Yo=(()=>{class n{static __NG_ELEMENT_ID__=MU}return n})();function MU(){let n=kt();return PU(n,Ce())}var RU=Yo,cM=class extends RU{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return rf(this._hostTNode,this._hostLView)}get injector(){return new Ho(this._hostTNode,this._hostLView)}get parentInjector(){let e=Yv(this._hostTNode,this._hostLView);if(mS(e)){let t=jh(e,this._hostLView),r=Uh(e),i=t[K].data[r+8];return new Ho(i,t)}else return new Ho(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=YD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-qt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Hv(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Bv(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!kL(e),l;if(u)l=t;else{let O=t||{};l=O.index,r=O.injector,i=O.projectableNodes,o=O.environmentInjector||O.ngModuleRef,s=O.directives,a=O.bindings}let h=u?e:new ga(Hr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let j=(u?p:this.parentInjector).get(Ze,null);j&&(o=j)}let m=Hr(h.componentType??{}),y=Hv(this._lContainer,m?.id??null),C=y?.firstChild??null,x=h.create(p,i,C,o,s,a);return this.insertImpl(x.hostView,l,Bv(this._hostTNode,y)),x}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(XT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Xe],l=new cM(u,u[Rn],u[Xe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return qA(s,i,o,r),e.attachToViewContainerRef(),ky(Ev(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=YD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Qh(this._lContainer,t);r&&(Xc(Ev(this._lContainer),t),E_(r[K],r))}detach(e){let t=this._adjustIndex(e,-1),r=Qh(this._lContainer,t);return r&&Xc(Ev(this._lContainer),t)!=null?new Ui(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function YD(n){return n[ou]}function Ev(n){return n[ou]||(n[ou]=[])}function PU(n,e){let t,r=e[n.index];return yn(r)?t=r:(t=zA(r,e,null,n),e[n.index]=t,p_(e,t)),uM(t,e,n,r),new cM(t,n,e)}function OU(n,e){let t=n[Oe],r=t.createComment(""),i=On(e,n),o=t.parentNode(i);return qh(t,o,r,t.nextSibling(i),!1),r}var uM=lM,x_=()=>!1;function NU(n,e,t){return x_(n,e,t)}function lM(n,e,t,r){if(n[fr])return;let i;t.type&8?i=vn(r):i=OU(e,t),n[fr]=i}function xU(n,e,t){if(n[fr]&&n[Qn])return!0;let r=t[pn],i=e.index-Le;if(!r||AS(e)||sA(r,i))return!1;let s=xv(r,i),a=r.data[af]?.[i],[u,l]=rU(s,a);return n[fr]=u,n[Qn]=l,!0}function kU(n,e,t,r){x_(n,t,e)||lM(n,e,t,r)}function dM(){uM=kU,x_=xU}var Go=class{},If=class{};var Xh=class extends Go{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Jh(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Vy(e);this._bootstrapComponents=gA(o.bootstrap),this._r3Injector=av(e,t,[{provide:Go,useValue:this},{provide:Cu,useValue:this.componentFactoryResolver},...r],jr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ef=class extends If{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Xh(this.moduleType,e,[])}};var mu=class extends Go{injector;componentFactoryResolver=new Jh(this);instance=null;constructor(e){super();let t=new xo([...e.providers,{provide:Go,useValue:this},{provide:Cu,useValue:this.componentFactoryResolver}],e.parent||tu(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function va(n,e,t=null){return new mu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var FU=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=vh(!1,t.type),i=r.length>0?va([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=G({token:n,providedIn:"environment",factory:()=>new n(he(Ze))})}return n})();function ft(n){return ya(()=>{let e=hM(n),t=de(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Jv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(FU).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Wr.Emulated,styles:n.styles||fn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Yr("NgStandalone"),fM(t);let r=n.dependencies;return t.directiveDefs=JD(r,LU),t.pipeDefs=JD(r,Uy),t.id=jU(t),t})}function LU(n){return Hr(n)||yh(n)}function Jr(n){return ya(()=>({type:n.type,bootstrap:n.bootstrap||fn,declarations:n.declarations||fn,imports:n.imports||fn,exports:n.exports||fn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function VU(n,e){if(n==null)return xi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=hf.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function UU(n){if(n==null)return xi;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ve(n){return ya(()=>{let e=hM(n);return fM(e),e})}function k_(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function hM(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||xi,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||fn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:VU(n.inputs,e),outputs:UU(n.outputs),debugInfo:null}}function fM(n){n.features?.forEach(e=>e(n))}function JD(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function jU(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function BU(n){return Object.getPrototypeOf(n.prototype).constructor}function Wt(n){let e=BU(n.type),t=!0,r=[n];for(;e;){let i;if(pr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Iv(n.inputs),s.declaredInputs=Iv(n.declaredInputs),s.outputs=Iv(n.outputs);let a=i.hostBindings;a&&GU(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&zU(n,u),l&&qU(n,l),$U(n,i),kT(n.outputs,i.outputs),pr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Wt&&(t=!1)}}e=Object.getPrototypeOf(e)}HU(r)}function $U(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function HU(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=fu(i.hostAttrs,t=fu(t,i.hostAttrs))}}function Iv(n){return n===xi?{}:n===fn?[]:n}function zU(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function qU(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function GU(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function WU(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=fu(n.mergedAttrs,n.attrs);let h=n.tView=h_(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),aa(n,!1);let u=pM(t,e,n,r);Sh()&&I_(t,e,u,n),fa(u,e);let l=zA(u,e,u,n);e[r+Le]=l,p_(e,l),NU(l,n,e)}function KU(n,e,t,r,i,o,s,a,u,l,h){let p=t+Le,m;return e.firstCreatePass?(m=A_(e,p,4,s||null,a||null),wh()&&eM(e,n,m,au(e.consts,l),b_),pS(e,m)):m=e.data[p],WU(m,n,e,t,r,i,o,u),ia(m)&&gf(e,n,m),l!=null&&C_(n,m,h),m}function pe(n,e,t,r,i,o,s,a){let u=Ce(),l=Gt(),h=au(l.consts,o);return KU(u,l,n,e,t,r,i,h,void 0,s,a),pe}var pM=gM;function gM(n,e,t,r){return Gr(!0),e[Oe].createComment("")}function QU(n,e,t,r){let i=!df(e,t);Gr(i);let o=e[pn]?.data[FS]?.[r]??null;if(o!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=o),i)return gM(n,e);let s=e[pn],a=yf(s,n,e,t);lf(s,r,a);let u=s_(s,r);return vf(u,a)}function mM(){pM=QU}var En=(function(n){return n[n.NOT_STARTED=0]="NOT_STARTED",n[n.IN_PROGRESS=1]="IN_PROGRESS",n[n.COMPLETE=2]="COMPLETE",n[n.FAILED=3]="FAILED",n})(En||{}),ZD=0,YU=1,rt=(function(n){return n[n.Placeholder=0]="Placeholder",n[n.Loading=1]="Loading",n[n.Complete=2]="Complete",n[n.Error=3]="Error",n})(rt||{});var JU=0,bu=1;var ZU=4,XU=5;var ej=7,ha=8,tj=9,F_=(function(n){return n[n.Manual=0]="Manual",n[n.Playthrough=1]="Playthrough",n})(F_||{});function Lh(n,e){let t=rj(n),r=e[t];if(r!==null){for(let i of r)i();e[t]=null}}function nj(n){Lh(1,n),Lh(0,n),Lh(2,n)}function rj(n){let e=ZU;return n===1?e=XU:n===2&&(e=tj),e}function yM(n){return n+1}function _a(n,e){let t=n[K],r=yM(e.index);return n[r]}function Tu(n,e){let t=yM(e.index);return n.data[t]}function ij(n,e,t){let r=e[K],i=Tu(r,t);switch(n){case rt.Complete:return i.primaryTmplIndex;case rt.Loading:return i.loadingTmplIndex;case rt.Error:return i.errorTmplIndex;case rt.Placeholder:return i.placeholderTmplIndex;default:return null}}function XD(n,e){return e===rt.Placeholder?n.placeholderBlockConfig?.[ZD]??null:e===rt.Loading?n.loadingBlockConfig?.[ZD]??null:null}function oj(n){return n.loadingBlockConfig?.[YU]??null}function eS(n,e){if(!n||n.length===0)return e;let t=new Set(n);for(let r of e)t.add(r);return n.length===t.size?n:Array.from(t)}function sj(n,e){let t=e.primaryTmplIndex+Le;return oa(n,t)}var aj=(()=>{class n{cachedInjectors=new Map;getOrCreateInjector(t,r,i,o){if(!this.cachedInjectors.has(t)){let s=i.length>0?va(i,r,o):null;this.cachedInjectors.set(t,s)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=G({token:n,providedIn:"environment",factory:()=>new n})}return n})();var vM=new B("");function wv(n,e,t){return n.get(aj).getOrCreateInjector(e,n,t,"")}function cj(n,e,t){if(n instanceof da){let i=n.injector,o=n.parentInjector,s=wv(o,e,t);return new da(i,s)}let r=n.get(Ze);if(r!==n){let i=wv(r,e,t);return new da(n,i)}return wv(n,e,t)}function $o(n,e,t,r=!1){let i=t[Xe],o=i[K];if(ki(i))return;let s=_a(i,e),a=s[bu],u=s[ej];if(!(u!==null&&n<u)&&tS(a,n)&&tS(s[JU]??-1,n)){let l=Tu(o,e),p=!r&&!0&&(oj(l)!==null||XD(l,rt.Loading)!==null||XD(l,rt.Placeholder))?dj:lj;try{p(n,s,t,e,i)}catch(m){T_(i,m)}}}function uj(n,e){let t=n[Qn]?.findIndex(i=>i.data[jS]===e[bu])??-1;return{dehydratedView:t>-1?n[Qn][t]:null,dehydratedViewIx:t}}function lj(n,e,t,r,i){Se(20);let o=ij(n,i,r);if(o!==null){e[bu]=n;let s=i[K],a=o+Le,u=oa(s,a),l=0;U2(t,l);let h;if(n===rt.Complete){let C=Tu(s,r),x=C.providers;x&&x.length>0&&(h=cj(i[Pn],C,x))}let{dehydratedView:p,dehydratedViewIx:m}=uj(t,e),y=xA(i,u,null,{injector:h,dehydratedView:p});if(qA(t,y,l,Bv(u,p)),mf(y,2),m>-1&&t[Qn]?.splice(m,1),(n===rt.Complete||n===rt.Error)&&Array.isArray(e[ha])){for(let C of e[ha])C();e[ha]=null}}Se(21)}function tS(n,e){return n<e}function nS(n,e,t){n.loadingPromise.then(()=>{n.loadingState===En.COMPLETE?$o(rt.Complete,e,t):n.loadingState===En.FAILED&&$o(rt.Error,e,t)})}var dj=null;var wf=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var L_=new B("");function $i(n){return!!n&&typeof n.then=="function"}function V_(n){return!!n&&typeof n.subscribe=="function"}var _M=new B("");var U_=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=M(_M,{optional:!0})??[];injector=M(qe);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=et(this.injector,i);if($i(o))t.push(o);else if(V_(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hi=new B("");function EM(){Gm(()=>{let n="";throw new $(600,n)})}function IM(n){return n.isBoundToModule}var hj=10;var Ft=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(sn);afterRenderManager=M(v_);zonelessEnabled=M(ca);rootEffectScheduler=M(fv);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Qe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(Yn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ue(t=>!t))}constructor(){M(Qo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=M(Ze);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=qe.NULL){return this._injector.get(be).run(()=>{Se(10);let s=t instanceof Ef;if(!this._injector.get(U_).done){let C="";throw new $(405,C)}let u;s?u=t:u=this._injector.get(Cu).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=IM(u)?void 0:this._injector.get(Go),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(L_,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),hu(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Se(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Se(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(ff.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new $(101,!1);let t=le(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,le(t),this.afterTick.next(),Se(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(qo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<hj;)Se(14),this.synchronizeOnce(),Se(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!cu(i))continue;let o=r&&!this.zonelessEnabled?0:1;jA(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>cu(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;hu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Hi,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>hu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new $(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function fj(){let n,e;return{promise:new Promise((r,i)=>{n=r,e=i}),resolve:n,reject:e}}function wM(n,e,t){let r=e[Pn],i=e[K];if(n.loadingState!==En.NOT_STARTED)return n.loadingPromise??Promise.resolve();let o=_a(e,t),s=sj(i,n);n.loadingState=En.IN_PROGRESS,Lh(1,o);let a=n.dependencyResolverFn,u=r.get(Vi).add();return a?(n.loadingPromise=Promise.allSettled(a()).then(l=>{let h=!1,p=[],m=[];for(let y of l)if(y.status==="fulfilled"){let C=y.value,x=Hr(C)||yh(C);if(x)p.push(x);else{let O=Uy(C);O&&m.push(O)}}else{h=!0;break}if(h){if(n.loadingState=En.FAILED,n.errorTmplIndex===null){let C=new $(-750,!1);T_(e,C)}}else{n.loadingState=En.COMPLETE;let y=s.tView;if(p.length>0){y.directiveRegistry=eS(y.directiveRegistry,p);let C=p.map(O=>O.type),x=vh(!1,...C);n.providers=x}m.length>0&&(y.pipeRegistry=eS(y.pipeRegistry,m))}}),n.loadingPromise.finally(()=>{n.loadingPromise=null,u()})):(n.loadingPromise=Promise.resolve().then(()=>{n.loadingPromise=null,n.loadingState=En.COMPLETE,u()}),n.loadingPromise)}function pj(n,e){return e[Pn].get(vM,null,{optional:!0})?.behavior!==F_.Manual}function gj(n,e,t){let r=e[K],i=e[t.index];if(!pj(n,e))return;let o=_a(e,t),s=Tu(r,t);switch(nj(o),s.loadingState){case En.NOT_STARTED:$o(rt.Loading,t,i),wM(s,e,t),s.loadingState===En.IN_PROGRESS&&nS(s,t,i);break;case En.IN_PROGRESS:$o(rt.Loading,t,i),nS(s,t,i);break;case En.COMPLETE:$o(rt.Complete,t,i);break;case En.FAILED:$o(rt.Error,t,i);break;default:}}function CM(n,e,t){return _(this,null,function*(){let r=n.get(cf);if(r.hydrating.has(e))return;let{parentBlockPromise:o,hydrationQueue:s}=_V(e,n);if(s.length===0)return;o!==null&&s.shift(),vj(r,s),o!==null&&(yield o);let a=s[0];r.has(a)?yield rS(n,s,t):r.awaitParentBlock(a,()=>_(null,null,function*(){return yield rS(n,s,t)}))})}function rS(n,e,t){return _(this,null,function*(){let r=n.get(cf),i=r.hydrating,o=n.get(Yn),s=o.add();for(let u=0;u<e.length;u++){let l=e[u],h=r.get(l);if(h!=null){if(yield Ej(h),yield _j(n),mj(h)){tU(h),iS(e.slice(u),r);break}i.get(l).resolve()}else{yj(u,e,r),iS(e.slice(u),r);break}}let a=e[e.length-1];yield i.get(a)?.promise,o.remove(s),t&&t(e),nU(r.get(a),e,r,n.get(Ft))})}function mj(n){return _a(n.lView,n.tNode)[bu]===rt.Error}function yj(n,e,t){let r=n-1,i=r>-1?t.get(e[r]):null;i&&_f(i.lContainer)}function iS(n,e){let t=e.hydrating;for(let r in n)t.get(r)?.reject();e.cleanup(n)}function vj(n,e){for(let t of e)n.hydrating.set(t,fj())}function _j(n){return new Promise(e=>Iu(e,{injector:n}))}function Ej(n){return _(this,null,function*(){let{tNode:e,lView:t}=n,r=_a(t,e);return new Promise(i=>{Ij(r,i),gj(2,t,e)})})}function Ij(n,e){Array.isArray(n[ha])||(n[ha]=[]),n[ha].push(e)}function Cf(n,e,t,r){let i=Ce(),o=uu();if(ji(i,o,e)){let s=Gt(),a=Dh();I2(a,i,n,e,t,r)}return Cf}var bee=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function q(n,e,t){let r=Ce(),i=uu();if(ji(r,i,e)){let o=Gt(),s=Dh();PA(s,r,n,e,r[Oe],t)}return q}function oS(n,e,t,r,i){D_(e,n,t,i?"class":"style",r)}function R(n,e,t,r){let i=Ce(),o=i[K],s=n+Le,a=o.firstCreatePass?P_(s,i,2,e,b_,wh(),t,r):o.data[s];if(OA(a,i,n,e,bM),ia(a)){let u=i[K];gf(u,i,a),a_(u,a,i)}return r!=null&&C_(i,a),R}function S(){let n=Gt(),e=kt(),t=NA(e);return n.firstCreatePass&&O_(n,t),aD(t)&&uD(),sD(),t.classesWithoutHost!=null&&BL(t)&&oS(n,t,Ce(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&$L(t)&&oS(n,t,Ce(),t.stylesWithoutHost,!1),S}function Dt(n,e,t,r){return R(n,e,t,r),S(),Dt}var bM=(n,e,t,r,i)=>(Gr(!0),u_(e[Oe],r,sv()));function wj(n,e,t,r,i){let o=!df(e,t);if(Gr(o),o)return u_(e[Oe],r,sv());let s=e[pn],a=yf(s,n,e,t);return oA(s,i)&&lf(s,i,a.nextSibling),s&&(DS(t)||SS(a))&&qr(t)&&(cD(t),hA(a)),a}function TM(){bM=wj}function zi(n,e,t){let r=Ce(),i=r[K],o=n+Le,s=i.firstCreatePass?P_(o,r,8,"ng-container",b_,wh(),e,t):i.data[o];if(OA(s,r,n,"ng-container",DM),ia(s)){let a=r[K];gf(a,r,s),a_(a,s,r)}return t!=null&&C_(r,s),zi}function qi(){let n=Gt(),e=kt(),t=NA(e);return n.firstCreatePass&&O_(n,t),qi}var DM=(n,e,t,r,i)=>(Gr(!0),lA(e[Oe],""));function Cj(n,e,t,r,i){let o,s=!df(e,t);if(Gr(s),s)return lA(e[Oe],"");let a=e[pn],u=yf(a,n,e,t),l=yV(a,i);return lf(a,i,u),o=vf(l,u),o}function SM(){DM=Cj}function Kt(){return Ce()}var Ph=void 0;function bj(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var Tj=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ph,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ph,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ph,"{1} 'at' {0}",Ph],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",bj],Cv={};function wn(n){let e=Dj(n),t=sS(e);if(t)return t;let r=e.split("-")[0];if(t=sS(r),t)return t;if(r==="en")return Tj;throw new $(701,!1)}function sS(n){return n in Cv||(Cv[n]=Ni.ng&&Ni.ng.common&&Ni.ng.common.locales&&Ni.ng.common.locales[n]),Cv[n]}var Ye=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Ye||{});function Dj(n){return n.toLowerCase().replace(/_/g,"-")}var Du="en-US";var Sj=Du;function AM(n){typeof n=="string"&&(Sj=n.toLowerCase().replace(/_/g,"-"))}function Te(n,e,t){let r=Ce(),i=Gt(),o=kt();return MM(i,r,r[Oe],o,n,e,t),Te}function MM(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=_v(r,e,o),vU(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=_v(r,e,o),KD(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=_v(r,e,o),KD(r,e,p,i,i,u)}}function Z(n=1){return ID(n)}function Oh(n,e){return n<<17|e<<2}function Wo(n){return n>>17&32767}function Aj(n){return(n&2)==2}function Mj(n,e){return n&131071|e<<17}function Gv(n){return n|2}function ma(n){return(n&131068)>>2}function bv(n,e){return n&-131069|e<<2}function Rj(n){return(n&1)===1}function Wv(n){return n|1}function Pj(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Wo(s),u=ma(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||ta(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=Wo(n[a+1]);n[r+1]=Oh(m,a),m!==0&&(n[m+1]=bv(n[m+1],r)),n[a+1]=Mj(n[a+1],r)}else n[r+1]=Oh(a,0),a!==0&&(n[a+1]=bv(n[a+1],r)),a=r;else n[r+1]=Oh(u,0),a===0?a=r:n[u+1]=bv(n[u+1],r),u=r;l&&(n[r+1]=Gv(n[r+1])),aS(n,h,r,!0),aS(n,h,r,!1),Oj(e,h,n,r,o),s=Oh(a,u),o?e.classBindings=s:e.styleBindings=s}function Oj(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ta(o,e)>=0&&(t[r+1]=Wv(t[r+1]))}function aS(n,e,t,r){let i=n[t+1],o=e===null,s=r?Wo(i):ma(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];Nj(u,e)&&(a=!0,n[s+1]=r?Wv(l):Gv(l)),s=r?Wo(l):ma(l)}a&&(n[t+1]=r?Gv(i):Wv(i))}function Nj(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ta(n,e)>=0:!1}function kn(n,e){return xj(n,e,null,!0),kn}function xj(n,e,t,r){let i=Ce(),o=Gt(),s=nv(2);if(o.firstUpdatePass&&Fj(o,n,s,r),e!==Zn&&ji(i,s,e)){let a=o.data[Fi()];Bj(o,a,i,i[Oe],n,i[s+1]=$j(e,t),r,s)}}function kj(n,e){return e>=n.expandoStartIndex}function Fj(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Fi()],s=kj(n,t);Hj(o,r)&&e===null&&!s&&(e=!1),e=Lj(i,o,e,r),Pj(i,o,e,t,s,r)}}function Lj(n,e,t,r){let i=yD(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Tv(null,n,e,t,r),t=yu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Tv(i,n,e,t,r),o===null){let u=Vj(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Tv(null,n,e,u[1],r),u=yu(u,e.attrs,r),Uj(n,e,r,u))}else o=jj(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function Vj(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ma(r)!==0)return n[Wo(r)]}function Uj(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Wo(i)]=r}function jj(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=yu(r,s,t)}return yu(r,e.attrs,t)}function Tv(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=yu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function yu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),$T(n,s,t?!0:e[++o]))}return n===void 0?null:n}function Bj(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=Rj(l)?cS(u,e,t,i,ma(l),s):void 0;if(!tf(h)){tf(o)||Aj(l)&&(o=cS(u,null,t,i,a,s));let p=qy(Fi(),t);d2(r,s,p,i,o)}}function cS(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===Zn&&(m=p?fn:void 0);let y=p?mh(m,r):h===r?m:void 0;if(l&&!tf(y)&&(y=mh(u,r)),tf(y)&&(a=y,s))return a;let C=n[i+1];i=s?Wo(C):ma(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=mh(u,r))}return a}function tf(n){return n!==void 0}function $j(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=jr(c_(n)))),n}function Hj(n,e){return(n.flags&(e?8:16))!==0}function N(n,e=""){let t=Ce(),r=Gt(),i=n+Le,o=r.firstCreatePass?A_(r,i,1,e,null):r.data[i],s=RM(r,t,o,e,n);t[i]=s,Sh()&&I_(r,t,s,o),aa(o,!1)}var RM=(n,e,t,r,i)=>(Gr(!0),uA(e[Oe],r));function zj(n,e,t,r,i){let o=!df(e,t);if(Gr(o),o)return uA(e[Oe],r);let s=e[pn];return yf(s,n,e,t)}function PM(){RM=zj}function OM(n,e,t,r=""){return ji(n,uu(),t)?e+ea(t)+r:Zn}function qj(n,e,t,r,i,o=""){let s=hD(),a=oM(n,s,t,i);return nv(2),a?e+ea(t)+r+ea(i)+o:Zn}function Ie(n){return Ue("",n),Ie}function Ue(n,e,t){let r=Ce(),i=OM(r,n,e,t);return i!==Zn&&NM(r,Fi(),i),Ue}function Ea(n,e,t,r,i){let o=Ce(),s=qj(o,n,e,t,r,i);return s!==Zn&&NM(o,Fi(),s),Ea}function NM(n,e,t){let r=qy(e,n);bV(n[Oe],r,t)}function Fn(n,e,t){lv(e)&&(e=e());let r=Ce(),i=uu();if(ji(r,i,e)){let o=Gt(),s=Dh();PA(s,r,n,e,r[Oe],t)}return Fn}function Xn(n,e){let t=lv(n);return t&&n.set(e),t}function Ln(n,e){let t=Ce(),r=Gt(),i=kt();return MM(r,t,t[Oe],i,n,e),Ln}function j_(n,e,t=""){return OM(Ce(),n,e,t)}function Gj(n,e,t){let r=Gt();if(r.firstCreatePass){let i=pr(n);Kv(t,r.data,r.blueprint,i,!0),Kv(e,r.data,r.blueprint,i,!1)}}function Kv(n,e,t,r,i){if(n=bt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Kv(n[o],e,t,r,i);else{let o=Gt(),s=Ce(),a=kt(),u=No(n)?n:bt(n.provide),l=By(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(No(n)||!n.multi){let y=new zo(l,i,J,null),C=Sv(u,e,i?h:h+m,p);C===-1?(Mv($h(a,s),o,u),Dv(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[C]=y,s[C]=y)}else{let y=Sv(u,e,h+m,p),C=Sv(u,e,h,h+m),x=y>=0&&t[y],O=C>=0&&t[C];if(i&&!O||!i&&!x){Mv($h(a,s),o,u);let j=Qj(i?Kj:Wj,t.length,i,r,l,n);!i&&O&&(t[C].providerFactory=j),Dv(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),s.push(j)}else{let j=xM(t[i?C:y],l,!i&&r);Dv(o,n,y>-1?y:C,j)}!i&&r&&O&&t[C].componentProviders++}}}function Dv(n,e,t,r){let i=No(e),o=WT(e);if(i||o){let u=(o?bt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function xM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Sv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Wj(n,e,t,r,i){return Qv(this.multi,[])}function Kj(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Hh(r,r[K],this.providerFactory.index,i);s=u.slice(0,a),Qv(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],Qv(o,s);return s}function Qv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Qj(n,e,t,r,i,o){let s=new zo(n,t,J,null);return s.multi=[],s.index=e,s.componentProviders=0,xM(s,i,r&&!t),s}function er(n,e=[]){return t=>{t.providersResolver=(r,i)=>Gj(r,i?i(n):n,e)}}function Ia(n,e,t,r){return Yj(Ce(),tv(),n,e,t,r)}function kM(n,e){let t=n[e];return t===Zn?void 0:t}function Yj(n,e,t,r,i,o){let s=e+t;return ji(n,s,i)?iM(n,s+1,o?r.call(o,i):r(i)):kM(n,s+1)}function Jj(n,e,t,r,i,o,s){let a=e+t;return oM(n,a,i,o)?iM(n,a+2,s?r.call(s,i,o):r(i,o)):kM(n,a+2)}function tr(n,e){let t=Gt(),r,i=n+Le;t.firstCreatePass?(r=Zj(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Pi(r.type,!0)),s,a=Ht(J);try{let u=Bh(!1),l=o();return Bh(u),Gy(t,Ce(),i,l),l}finally{Ht(a)}}function Zj(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function nr(n,e,t,r){let i=n+Le,o=Ce(),s=ZT(o,i);return Xj(o,i)?Jj(o,tv(),e,s.transform,t,r,s):s.transform(t,r)}function Xj(n,e){return n[K].data[e].pure}var nf=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},B_=(()=>{class n{compileModuleSync(t){return new ef(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Vy(t),o=gA(i.declarations).reduce((s,a)=>{let u=Hr(a);return u&&s.push(new ga(u)),s},[]);return new nf(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var eB=(()=>{class n{zone=M(be);changeDetectionScheduler=M(Br);applicationRef=M(Ft);applicationErrorHandler=M(sn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),FM=new B("",{factory:()=>!1});function $_({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new be(de(V({},z_()),{scheduleInRootZone:t})),[{provide:be,useFactory:n},{provide:An,multi:!0,useFactory:()=>{let r=M(eB,{optional:!0});return()=>r.initialize()}},{provide:An,multi:!0,useFactory:()=>{let r=M(tB);return()=>{r.initialize()}}},e===!0?{provide:dv,useValue:!0}:[],{provide:hv,useValue:t??EA},{provide:sn,useFactory:()=>{let r=M(be),i=M(Ze),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Kn),o.handleError(s))})}}}]}function H_(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=$_({ngZoneFactory:()=>{let i=z_(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Yr("NgZone_CoalesceEvent"),new be(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Tt([{provide:FM,useValue:!0},{provide:ca,useValue:!1},r])}function z_(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var tB=(()=>{class n{subscription=new ze;initialized=!1;zone=M(be);pendingTasks=M(Yn);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{be.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{be.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var LM=(()=>{class n{applicationErrorHandler=M(sn);appRef=M(Ft);taskService=M(Yn);ngZone=M(be);zonelessEnabled=M(ca);tracing=M(Qo,{optional:!0});disableScheduling=M(dv,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ze;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Gh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(hv,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Wh||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?FD:IA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Gh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,FD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nB(){return typeof $localize<"u"&&$localize.locale||Du}var Su=new B("",{providedIn:"root",factory:()=>M(Su,{optional:!0,skipSelf:!0})||nB()});function mt(n){return OT(n)}function Gi(n,e){return kd(n,e?.equal)}var VM=class{[Nt];constructor(e){this[Nt]=e}destroy(){this[Nt].destroy()}};var Q_={JSACTION:"__jsaction",OWNER:"__owner"},$M={};function rB(n){return n[Q_.JSACTION]}function UM(n,e){n[Q_.JSACTION]=e}function iB(n){return $M[n]}function oB(n,e){$M[n]=e}var Y={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},sB=[Y.MOUSEENTER,Y.MOUSELEAVE,"pointerenter","pointerleave"],Vee=[Y.CLICK,Y.DBLCLICK,Y.FOCUSIN,Y.FOCUSOUT,Y.KEYDOWN,Y.KEYUP,Y.KEYPRESS,Y.MOUSEOVER,Y.MOUSEOUT,Y.SUBMIT,Y.TOUCHSTART,Y.TOUCHEND,Y.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],aB=[Y.FOCUS,Y.BLUR,Y.ERROR,Y.LOAD,Y.TOGGLE],Y_=n=>aB.indexOf(n)>=0;function cB(n){return n===Y.MOUSEENTER?Y.MOUSEOVER:n===Y.MOUSELEAVE?Y.MOUSEOUT:n===Y.POINTERENTER?Y.POINTEROVER:n===Y.POINTERLEAVE?Y.POINTEROUT:n}function uB(n,e,t,r){let i=!1;Y_(e)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return n.addEventListener(e,t,o),{eventType:e,handler:t,capture:i,passive:r}}function lB(n,e){if(n.removeEventListener){let t=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;n.removeEventListener(e.eventType,e.handler,t)}else n.detachEvent&&n.detachEvent(`on${e.eventType}`,e.handler)}function dB(n){n.preventDefault?n.preventDefault():n.returnValue=!1}var jM=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function hB(n){return n.which===2||n.which==null&&n.button===4}function fB(n){return jM&&n.metaKey||!jM&&n.ctrlKey||hB(n)||n.shiftKey}function pB(n,e,t){let r=n.relatedTarget;return(n.type===Y.MOUSEOVER&&e===Y.MOUSEENTER||n.type===Y.MOUSEOUT&&e===Y.MOUSELEAVE||n.type===Y.POINTEROVER&&e===Y.POINTERENTER||n.type===Y.POINTEROUT&&e===Y.POINTERLEAVE)&&(!r||r!==t&&!t.contains(r))}function gB(n,e){let t={};for(let r in n){if(r==="srcElement"||r==="target")continue;let i=r,o=n[i];typeof o!="function"&&(t[i]=o)}return n.type===Y.MOUSEOVER?t.type=Y.MOUSEENTER:n.type===Y.MOUSEOUT?t.type=Y.MOUSELEAVE:n.type===Y.POINTEROVER?t.type=Y.POINTERENTER:t.type=Y.POINTERLEAVE,t.target=t.srcElement=e,t.bubbles=!1,t._originalEvent=n,t}var mB=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Sf=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,t,r){mB&&(this.element.style.cursor="pointer"),this.handlerInfos.push(uB(this.element,e,t(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)lB(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},yB={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function Wi(n){return n.eventType}function J_(n,e){n.eventType=e}function Tf(n){return n.event}function HM(n,e){n.event=e}function zM(n){return n.targetElement}function qM(n,e){n.targetElement=e}function GM(n){return n.eic}function vB(n,e){n.eic=e}function _B(n){return n.timeStamp}function EB(n,e){n.timeStamp=e}function Df(n){return n.eia}function WM(n,e,t){n.eia=[e,t]}function q_(n){n.eia=void 0}function bf(n){return n[1]}function IB(n){return n.eirp}function KM(n,e){n.eirp=e}function QM(n){return n.eir}function YM(n,e){n.eir=e}function JM(n){return{eventType:n.eventType,event:n.event,targetElement:n.targetElement,eic:n.eic,eia:n.eia,timeStamp:n.timeStamp,eirp:n.eirp,eiack:n.eiack,eir:n.eir}}function wB(n,e,t,r,i,o,s,a){return{eventType:n,event:e,targetElement:t,eic:r,timeStamp:i,eia:o,eirp:s,eiack:a}}var G_=class n{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return Wi(this.eventInfo)}setEventType(e){J_(this.eventInfo,e)}getEvent(){return Tf(this.eventInfo)}setEvent(e){HM(this.eventInfo,e)}getTargetElement(){return zM(this.eventInfo)}setTargetElement(e){qM(this.eventInfo,e)}getContainer(){return GM(this.eventInfo)}setContainer(e){vB(this.eventInfo,e)}getTimestamp(){return _B(this.eventInfo)}setTimestamp(e){EB(this.eventInfo,e)}getAction(){let e=Df(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){q_(this.eventInfo);return}WM(this.eventInfo,e.name,e.element)}getIsReplay(){return IB(this.eventInfo)}setIsReplay(e){KM(this.eventInfo,e)}getResolved(){return QM(this.eventInfo)}setResolved(e){YM(this.eventInfo,e)}clone(){return new n(JM(this.eventInfo))}},CB={},bB=/\s*;\s*/,TB=Y.CLICK,W_=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:t=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=t}resolveEventType(e){this.clickModSupport&&Wi(e)===Y.CLICK&&fB(Tf(e))?J_(e,Y.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){QM(e)||(this.populateAction(e,zM(e)),YM(e,!0))}resolveParentAction(e){let t=Df(e),r=t&&bf(t);q_(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,t){let r=t;for(;r&&r!==GM(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!Df(e));)r=this.getParentNode(r);let i=Df(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(Wi(e)===Y.MOUSEENTER||Wi(e)===Y.MOUSELEAVE||Wi(e)===Y.POINTERENTER||Wi(e)===Y.POINTERLEAVE)))if(pB(Tf(e),Wi(e),bf(i))){let o=gB(Tf(e),bf(i));HM(e,o),qM(e,bf(i))}else q_(e)}getParentNode(e){let t=e[Q_.OWNER];if(t)return t;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,t){let r=this.parseActions(e),i=r[Wi(t)];i!==void 0&&WM(t,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,t,r)}parseActions(e){let t=rB(e);if(!t){let r=e.getAttribute(Mh.JSACTION);if(!r)t=CB,UM(e,t);else{if(t=iB(r),!t){t={};let i=r.split(bB);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let a=s.indexOf(yB.EVENT_ACTION_SEPARATOR),u=a!==-1,l=u?s.substr(0,a).trim():TB,h=u?s.substr(a+1).trim():s;t[l]=h}oB(r,t)}UM(e,t)}}return t}addA11yClickSupport(e,t,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=t,this.populateClickOnlyAction=r}},ZM=(function(n){return n[n.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",n})(ZM||{}),K_=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:t,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=t,this.eventReplayer=r}dispatch(e){let t=new G_(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=t.getAction();if(r&&DB(r.element,t)&&dB(t.getEvent()),this.eventReplayer&&t.getIsReplay()){this.scheduleEventInfoWrapperReplay(t);return}this.dispatchDelegate(t)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function DB(n,e){return n.tagName==="A"&&(e.getEventType()===Y.CLICK||e.getEventType()===Y.CLICKMOD)}var XM=Symbol.for("propagationStopped"),Z_={REPLAY:101};var SB="`preventDefault` called during event replay.";var AB="`composedPath` called during event replay.",Af=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,t=!0){this.dispatchDelegate=e,this.clickModSupport=t,this.actionResolver=new W_({clickModSupport:t}),this.dispatcher=new K_(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&PB(e),MB(e);e.getAction();){if(OB(e),Y_(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),RB(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function MB(n){let e=n.getEvent(),t=n.getEvent().stopPropagation.bind(e),r=()=>{e[XM]=!0,t()};Jo(e,"stopPropagation",r),Jo(e,"stopImmediatePropagation",r)}function RB(n){return!!n.getEvent()[XM]}function PB(n){let e=n.getEvent(),t=n.getTargetElement(),r=e.preventDefault.bind(e);Jo(e,"target",t),Jo(e,"eventPhase",Z_.REPLAY),Jo(e,"preventDefault",()=>{throw r(),new Error(SB+"")}),Jo(e,"composedPath",()=>{throw new Error(AB+"")})}function OB(n){let e=n.getEvent(),t=n.getAction()?.element;t&&Jo(e,"currentTarget",t,{configurable:!0})}function Jo(n,e,t,{configurable:r=!1}={}){Object.defineProperty(n,e,{value:t,configurable:r})}function eR(n,e){n.ecrd(t=>{e.dispatch(t)},ZM.I_AM_THE_JSACTION_FRAMEWORK)}function NB(n){return n?.q??[]}function xB(n){n&&(BM(n.c,n.et,n.h),BM(n.c,n.etc,n.h,!0))}function BM(n,e,t,r){for(let i=0;i<e.length;i++)n.removeEventListener(e[i],t,r)}var kB=!1,tR=(()=>{class n{static MOUSE_SPECIAL_SUPPORT=kB;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(t){this.containerManager=t}handleEvent(t,r,i){let o=wB(t,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(t){if(!this.dispatcher){KM(t,!0),this.queuedEventInfos?.push(t);return}this.dispatcher(t)}addEvent(t,r,i){if(t in this.eventHandlers||!this.containerManager||!n.MOUSE_SPECIAL_SUPPORT&&sB.indexOf(t)>=0)return;let o=(a,u,l)=>{this.handleEvent(a,u,l)};this.eventHandlers[t]=o;let s=cB(r||t);if(s!==t){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(t),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>u=>{o(t,u,a)},i)}replayEarlyEvents(t=window._ejsa){t&&(this.replayEarlyEventInfos(t.q),xB(t),delete window._ejsa)}replayEarlyEventInfos(t){for(let r=0;r<t.length;r++){let i=t[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let a=JM(i);J_(a,o[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(t){let r=[];return this.eventHandlers[t]&&r.push(t),this.browserEventTypeToExtraEventTypes[t]&&r.push(...this.browserEventTypeToExtraEventTypes[t]),r}handler(t){return this.eventHandlers[t]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(t,r){this.ecrd(t,r)}ecrd(t,r){if(this.dispatcher=t,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return n})();function nR(n,e=window){return NB(e._ejsas?.[n])}function X_(n,e=window){e._ejsas&&(e._ejsas[n]=void 0)}var lR=Symbol("InputSignalNode#UNSET"),c$=de(V({},Fd),{transformFn:void 0,applyValueToInputSignal(n,e){Vs(n,e)}});function dR(n,e){let t=Object.create(c$);t.value=n,t.transformFn=e?.transform;function r(){if(ks(t),t.value===lR){let i=null;throw new $(-950,i)}return t.value}return r[Nt]=t,r}var u$=new B("");u$.__NG_ELEMENT_ID__=n=>{let e=kt();if(e===null)throw new $(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new $(204,!1)};function rR(n,e){return dR(n,e)}function l$(n){return dR(lR,n)}var hR=(rR.required=l$,rR);var eE=new B(""),d$=new B("");function Au(n){return!n.moduleRef}function h$(n){let e=Au(n)?n.r3Injector:n.moduleRef.injector,t=e.get(be);return t.run(()=>{Au(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(sn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Au(n)){let o=()=>e.destroy(),s=n.platformInjector.get(eE);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(eE);s.add(o),n.moduleRef.onDestroy(()=>{hu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return p$(r,t,()=>{let o=e.get(Yn),s=o.add(),a=e.get(U_);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(Su,Du);if(AM(u||Du),!e.get(d$,!0))return Au(n)?e.get(Ft):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Au(n)){let h=e.get(Ft);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return f$?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var f$;function p$(n,e,t){try{let r=t();return $i(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Rf=null;function g$(n=[],e){return qe.create({name:e,providers:[{provide:eu,useValue:"platform"},{provide:eE,useValue:new Set([()=>Rf=null])},...n]})}function m$(n=[]){if(Rf)return Rf;let e=g$(n);return Rf=e,EM(),y$(e),e}function y$(n){let e=n.get(of,null);et(n,()=>{e?.forEach(t=>t())})}function oE(){return!1}var wa=(()=>{class n{static __NG_ELEMENT_ID__=v$}return n})();function v$(n){return _$(kt(),Ce(),(n&16)===16)}function _$(n,e,t){if(qr(n)&&!t){let r=Nn(n.index,e);return new Ui(r,r)}else if(n.type&175){let r=e[on];return new Ui(r,e)}return null}var tE=class{constructor(){}supports(e){return N_(e)}create(e){return new nE(e)}},E$=(n,e)=>e,nE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||E$}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<iR(r,i,o)?t:r,a=iR(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,C=y+m;h<=C&&C<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!N_(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,nM(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new rE(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Of),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Of),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},rE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},iE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Of=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new iE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function iR(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function oR(){return new sE([new tE])}var sE=(()=>{class n{factories;static \u0275prov=G({token:n,providedIn:"root",factory:oR});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=M(n,{optional:!0,skipSelf:!0});return n.create(t,r||oR())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new $(901,!1)}}return n})();function fR(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Se(8);try{let o=i?.injector??m$(r),s=[$_({}),{provide:Br,useExisting:LM},CD,...t||[]],a=new mu({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return h$({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Se(9)}}var Mf=new WeakSet,sR="",Pf=[];function aR(n){return n.get(n_,HS)}function pR(){let n=[{provide:n_,useFactory:()=>{let e=!0;{let t=M(vr);e=!!window._ejsas?.[t]}return e&&Yr("NgEventReplay"),e}}];return n.push({provide:An,useValue:()=>{let e=M(Ft),{injector:t}=e;if(!Mf.has(e)){let r=M(r_);if(aR(t)){JS();let i=t.get(vr),o=QS(i,(s,a,u)=>{s.nodeType===Node.ELEMENT_NODE&&(qS(s,a,u),GS(s,r))});e.onDestroy(o)}}},multi:!0},{provide:Hi,useFactory:()=>{let e=M(Ft),{injector:t}=e;return()=>{if(!aR(t)||Mf.has(e))return;Mf.add(e);let r=t.get(vr);e.onDestroy(()=>{Mf.delete(e),X_(r)}),e.whenStable().then(()=>{if(e.destroyed)return;let i=t.get(KS);I$(i,t);let o=t.get(r_);o.get(sR)?.forEach(WS),o.delete(sR);let s=i.instance;iA(t)?e.onDestroy(()=>s.cleanUp()):s.cleanUp()})}},multi:!0}),n}var I$=(n,e)=>{let t=e.get(vr),r=window._ejsas[t],i=n.instance=new tR(new Sf(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let o=nR(t);i.replayEarlyEventInfos(o),X_(t);let s=new Af(a=>{w$(e,a,a.currentTarget)});eR(i,s)};function w$(n,e,t){let r=(t&&t.getAttribute(Eu))??"";/d\d+/.test(r)?C$(r,n,e,t):e.eventPhase===Z_.REPLAY&&i_(e,t)}function C$(n,e,t,r){Pf.push({event:t,currentTarget:r}),CM(e,n,b$)}function b$(n){let e=[...Pf],t=new Set(n);Pf=[];for(let{event:r,currentTarget:i}of e){let o=i.getAttribute(Eu);t.has(o)?i_(r,i):Pf.push({event:r,currentTarget:i})}}var cR=!1;function T$(){cR||(cR=!0,tA(),TM(),PM(),SM(),mM(),dM(),YA(),RA())}function D$(n){return n.whenStable()}function gR(){let n=[{provide:_u,useFactory:()=>{let e=!0;return e=!!M(Ko,{optional:!0})?.get(o_,null),e&&Yr("NgHydration"),e}},{provide:An,useValue:()=>{WA(!1),M(_u)&&(aA(vu()),T$())},multi:!0}];return n.push({provide:t_,useFactory:()=>M(_u)},{provide:Hi,useFactory:()=>{if(M(_u)){let e=M(Ft);return()=>{D$(e).then(()=>{e.destroyed||R_(e)})}}return()=>{}},multi:!0}),Tt(n)}function Nf(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var vR=null;function Vn(){return vR}function aE(n){vR??=n}var Mu=class{},cE=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>M(_R),providedIn:"platform"})}return n})();var _R=(()=>{class n extends cE{_location;_history;_doc=M(ht);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vn().getBaseHref(this._doc)}onPopState(t){let r=Vn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Vn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function ER(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function mR(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Qi(n){return n&&n[0]!=="?"?`?${n}`:n}var xf=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>M(wR),providedIn:"root"})}return n})(),IR=new B(""),wR=(()=>{class n extends xf{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(ht).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ER(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Qi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Qi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Qi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(he(cE),he(IR,8))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ca=(()=>{class n{_subject=new Qe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=M$(mR(yR(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qi(r))}normalize(t){return n.stripTrailingSlash(A$(this._basePath,yR(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Qi;static joinWithSlash=ER;static stripTrailingSlash=mR;static \u0275fac=function(r){return new(r||n)(he(xf))};static \u0275prov=G({token:n,factory:()=>S$(),providedIn:"root"})}return n})();function S$(){return new Ca(he(xf))}function A$(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function yR(n){return n.replace(/\/index.html$/,"")}function M$(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Lt=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Lt||{}),Ne=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Ne||{}),cn=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(cn||{}),Xr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function SR(n){return wn(n)[Ye.LocaleId]}function AR(n,e,t){let r=wn(n),i=[r[Ye.DayPeriodsFormat],r[Ye.DayPeriodsStandalone]],o=Un(i,e);return Un(o,t)}function MR(n,e,t){let r=wn(n),i=[r[Ye.DaysFormat],r[Ye.DaysStandalone]],o=Un(i,e);return Un(o,t)}function RR(n,e,t){let r=wn(n),i=[r[Ye.MonthsFormat],r[Ye.MonthsStandalone]],o=Un(i,e);return Un(o,t)}function PR(n,e){let r=wn(n)[Ye.Eras];return Un(r,e)}function Ru(n,e){let t=wn(n);return Un(t[Ye.DateFormat],e)}function Pu(n,e){let t=wn(n);return Un(t[Ye.TimeFormat],e)}function Ou(n,e){let r=wn(n)[Ye.DateTimeFormat];return Un(r,e)}function Nu(n,e){let t=wn(n),r=t[Ye.NumberSymbols][e];if(typeof r>"u"){if(e===Xr.CurrencyDecimal)return t[Ye.NumberSymbols][Xr.Decimal];if(e===Xr.CurrencyGroup)return t[Ye.NumberSymbols][Xr.Group]}return r}function OR(n){if(!n[Ye.ExtraData])throw new $(2303,!1)}function NR(n){let e=wn(n);return OR(e),(e[Ye.ExtraData][2]||[]).map(r=>typeof r=="string"?uE(r):[uE(r[0]),uE(r[1])])}function xR(n,e,t){let r=wn(n);OR(r);let i=[r[Ye.ExtraData][0],r[Ye.ExtraData][1]],o=Un(i,e)||[];return Un(o,t)||[]}function Un(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new $(2304,!1)}function uE(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var R$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,kf={},P$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function kR(n,e,t,r){let i=j$(n);e=Zr(t,e)||e;let s=[],a;for(;e;)if(a=P$.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=LR(r,u),i=U$(i,r));let l="";return s.forEach(h=>{let p=L$(h);l+=p?p(i,t,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function jf(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Zr(n,e){let t=SR(n);if(kf[t]??={},kf[t][e])return kf[t][e];let r="";switch(e){case"shortDate":r=Ru(n,cn.Short);break;case"mediumDate":r=Ru(n,cn.Medium);break;case"longDate":r=Ru(n,cn.Long);break;case"fullDate":r=Ru(n,cn.Full);break;case"shortTime":r=Pu(n,cn.Short);break;case"mediumTime":r=Pu(n,cn.Medium);break;case"longTime":r=Pu(n,cn.Long);break;case"fullTime":r=Pu(n,cn.Full);break;case"short":let i=Zr(n,"shortTime"),o=Zr(n,"shortDate");r=Ff(Ou(n,cn.Short),[i,o]);break;case"medium":let s=Zr(n,"mediumTime"),a=Zr(n,"mediumDate");r=Ff(Ou(n,cn.Medium),[s,a]);break;case"long":let u=Zr(n,"longTime"),l=Zr(n,"longDate");r=Ff(Ou(n,cn.Long),[u,l]);break;case"full":let h=Zr(n,"fullTime"),p=Zr(n,"fullDate");r=Ff(Ou(n,cn.Full),[h,p]);break}return r&&(kf[t][e]=r),r}function Ff(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function rr(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function O$(n,e){return rr(n,3).substring(0,e)}function it(n,e,t=0,r=!1,i=!1){return function(o,s){let a=N$(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return O$(a,e);let u=Nu(s,Xr.MinusSign);return rr(a,e,u,r,i)}}function N$(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new $(2301,!1)}}function ke(n,e,t=Lt.Format,r=!1){return function(i,o){return x$(i,o,n,e,t,r)}}function x$(n,e,t,r,i,o){switch(t){case 2:return RR(e,i,r)[n.getMonth()];case 1:return MR(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let l=NR(e),h=xR(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[y,C]=m,x=s>=y.hours&&a>=y.minutes,O=s<C.hours||s===C.hours&&a<C.minutes;if(y.hours<C.hours){if(x&&O)return!0}else if(x||O)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return AR(e,i,r)[s<12?0:1];case 3:return PR(e,r)[n.getFullYear()<=0?0:1];default:let u=t;throw new $(2302,!1)}}function Lf(n){return function(e,t,r){let i=-1*r,o=Nu(t,Xr.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+rr(s,2,o)+rr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+rr(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+rr(s,2,o)+":"+rr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+rr(s,2,o)+":"+rr(Math.abs(i%60),2,o);default:throw new $(2310,!1)}}}var k$=0,Uf=4;function F$(n){let e=jf(n,k$,1).getDay();return jf(n,0,1+(e<=Uf?Uf:Uf+7)-e)}function FR(n){let e=n.getDay(),t=e===0?-3:Uf-e;return jf(n.getFullYear(),n.getMonth(),n.getDate()+t)}function lE(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=FR(t),s=F$(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return rr(i,n,Nu(r,Xr.MinusSign))}}function Vf(n,e=!1){return function(t,r){let o=FR(t).getFullYear();return rr(o,n,Nu(r,Xr.MinusSign),e)}}var dE={};function L$(n){if(dE[n])return dE[n];let e;switch(n){case"G":case"GG":case"GGG":e=ke(3,Ne.Abbreviated);break;case"GGGG":e=ke(3,Ne.Wide);break;case"GGGGG":e=ke(3,Ne.Narrow);break;case"y":e=it(0,1,0,!1,!0);break;case"yy":e=it(0,2,0,!0,!0);break;case"yyy":e=it(0,3,0,!1,!0);break;case"yyyy":e=it(0,4,0,!1,!0);break;case"Y":e=Vf(1);break;case"YY":e=Vf(2,!0);break;case"YYY":e=Vf(3);break;case"YYYY":e=Vf(4);break;case"M":case"L":e=it(1,1,1);break;case"MM":case"LL":e=it(1,2,1);break;case"MMM":e=ke(2,Ne.Abbreviated);break;case"MMMM":e=ke(2,Ne.Wide);break;case"MMMMM":e=ke(2,Ne.Narrow);break;case"LLL":e=ke(2,Ne.Abbreviated,Lt.Standalone);break;case"LLLL":e=ke(2,Ne.Wide,Lt.Standalone);break;case"LLLLL":e=ke(2,Ne.Narrow,Lt.Standalone);break;case"w":e=lE(1);break;case"ww":e=lE(2);break;case"W":e=lE(1,!0);break;case"d":e=it(2,1);break;case"dd":e=it(2,2);break;case"c":case"cc":e=it(7,1);break;case"ccc":e=ke(1,Ne.Abbreviated,Lt.Standalone);break;case"cccc":e=ke(1,Ne.Wide,Lt.Standalone);break;case"ccccc":e=ke(1,Ne.Narrow,Lt.Standalone);break;case"cccccc":e=ke(1,Ne.Short,Lt.Standalone);break;case"E":case"EE":case"EEE":e=ke(1,Ne.Abbreviated);break;case"EEEE":e=ke(1,Ne.Wide);break;case"EEEEE":e=ke(1,Ne.Narrow);break;case"EEEEEE":e=ke(1,Ne.Short);break;case"a":case"aa":case"aaa":e=ke(0,Ne.Abbreviated);break;case"aaaa":e=ke(0,Ne.Wide);break;case"aaaaa":e=ke(0,Ne.Narrow);break;case"b":case"bb":case"bbb":e=ke(0,Ne.Abbreviated,Lt.Standalone,!0);break;case"bbbb":e=ke(0,Ne.Wide,Lt.Standalone,!0);break;case"bbbbb":e=ke(0,Ne.Narrow,Lt.Standalone,!0);break;case"B":case"BB":case"BBB":e=ke(0,Ne.Abbreviated,Lt.Format,!0);break;case"BBBB":e=ke(0,Ne.Wide,Lt.Format,!0);break;case"BBBBB":e=ke(0,Ne.Narrow,Lt.Format,!0);break;case"h":e=it(3,1,-12);break;case"hh":e=it(3,2,-12);break;case"H":e=it(3,1);break;case"HH":e=it(3,2);break;case"m":e=it(4,1);break;case"mm":e=it(4,2);break;case"s":e=it(5,1);break;case"ss":e=it(5,2);break;case"S":e=it(6,1);break;case"SS":e=it(6,2);break;case"SSS":e=it(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Lf(0);break;case"ZZZZZ":e=Lf(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Lf(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Lf(2);break;default:return null}return dE[n]=e,e}function LR(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function V$(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function U$(n,e,t){let i=n.getTimezoneOffset(),o=LR(e,i);return V$(n,-1*(o-i))}function j$(n){if(CR(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return jf(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(R$))return B$(r)}let e=new Date(n);if(!CR(e))throw new $(2311,!1);return e}function B$(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,u=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,u,l),e}function CR(n){return n instanceof Date&&!isNaN(n.valueOf())}var hE=/\s+/,bR=[],Zo=(()=>{class n{_ngEl;_renderer;initialClasses=bR;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(hE):bR}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(hE):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(hE).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(J(Qr),J(Bi))};static \u0275dir=Ve({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Bf=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},un=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Bf(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),TR(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);TR(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(J(Yo),J(wu),J(sE))};static \u0275dir=Ve({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function TR(n,e){n.context.$implicit=e.item}var Qt=(()=>{class n{_viewContainer;_context=new $f;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){DR(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){DR(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(J(Yo),J(wu))};static \u0275dir=Ve({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),$f=class{$implicit=null;ngIf=null};function DR(n,e){if(n&&!n.createEmbeddedView)throw new $(2020,!1)}function $$(n,e){return new $(2100,!1)}var H$="mediumDate",VR=new B(""),UR=new B(""),ir=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??H$,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return kR(t,s,o||this.locale,a)}catch(s){throw $$(n,s.message)}}static \u0275fac=function(r){return new(r||n)(J(Su,16),J(VR,24),J(UR,24))};static \u0275pipe=k_({name:"date",type:n,pure:!0})}return n})();var Vt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jr({type:n});static \u0275inj=hr({})}return n})();function fE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var xu=class{};var pE="browser";function Yi(n){return n===pE}var ku=class{_doc;constructor(e){this._doc=e}manager},Hf=(()=>{class n extends ku{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(he(ht))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),qf=new B(""),_E=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Hf));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof Hf);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(he(qf),he(be))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),gE="ng-app-id";function jR(n){for(let e of n)e.remove()}function BR(n,e){let t=e.createElement("style");return t.textContent=n,t}function z$(n,e,t,r){let i=n.head?.querySelectorAll(`style[${gE}="${e}"],link[${gE}="${e}"]`);if(i)for(let o of i)o.removeAttribute(gE),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function yE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var EE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,z$(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,BR);r?.forEach(i=>this.addUsage(i,this.external,yE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(jR(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])jR(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,BR(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,yE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(he(ht),he(vr),he(sf,8),he(In))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),mE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},IE=/%COMP%/g;var HR="%COMP%",q$=`_nghost-${HR}`,G$=`_ngcontent-${HR}`,W$=!0,K$=new B("",{providedIn:"root",factory:()=>W$});function Q$(n){return G$.replace(IE,n)}function Y$(n){return q$.replace(IE,n)}function zR(n,e){return e.map(t=>t.replace(IE,n))}var wE=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Fu(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof zf?i.applyToHost(t):i instanceof Lu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Wr.Emulated:o=new zf(u,l,r,this.appId,h,s,a,p,m);break;case Wr.ShadowDom:return new vE(u,l,t,r,s,a,this.nonce,p,m);default:o=new Lu(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(he(_E),he(EE),he(vr),he(K$),he(ht),he(be),he(sf),he(Qo,8))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),Fu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(mE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){($R(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&($R(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=mE[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=mE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(mr.DashCase|mr.Important)?e.style.setProperty(t,r,i&mr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&mr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Vn().getGlobalEventTarget(this.doc,e),!e))throw new $(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function $R(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var vE=class extends Fu{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=zR(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=yE(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Lu=class extends Fu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?zR(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&pa.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},zf=class extends Lu{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=Q$(h),this.hostAttr=Y$(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Gf=class n extends Mu{supportsDOMEvents=!0;static makeCurrent(){aE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=J$();return t==null?null:Z$(t)}resetBaseElement(){Vu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fE(document.cookie,e)}},Vu=null;function J$(){return Vu=Vu||document.head.querySelector("base"),Vu?Vu.getAttribute("href"):null}function Z$(n){return new URL(n,document.baseURI).pathname}var X$=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),qR=["alt","control","meta","shift"],eH={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tH={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},GR=(()=>{class n extends ku{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),qR.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=eH[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),qR.forEach(s=>{if(s!==i){let a=tH[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(he(ht))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})();function CE(n,e,t){let r=V({rootComponent:n,platformRef:t?.platformRef},nH(e));return fR(r)}function nH(n){return{appProviders:[...aH,...n?.providers??[]],platformProviders:sH}}function rH(){Gf.makeCurrent()}function iH(){return new Kn}function oH(){return Zv(document),document}var sH=[{provide:In,useValue:pE},{provide:of,useValue:rH,multi:!0},{provide:ht,useFactory:oH}];var aH=[{provide:eu,useValue:"root"},{provide:Kn,useFactory:iH},{provide:qf,useClass:Hf,multi:!0,deps:[ht]},{provide:qf,useClass:GR,multi:!0,deps:[ht]},wE,EE,_E,{provide:qo,useExisting:wE},{provide:xu,useClass:X$},[]];var Uu=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var cH="X-Request-URL",uH="text/plain",lH="application/json",xae=`${lH}, ${uH}, */*`;var TE=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(TE||{}),bE=class{headers;status;statusText;url;ok;type;redirected;constructor(e,t=200,r="OK"){this.headers=e.headers||new Uu,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}};var Wf=class n extends bE{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=TE.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}};var WR=new B("");var kae=RegExp(`^${cH}:`,"m");var dH=new B(""),hH="b",fH="h",pH="s",gH="st",mH="u",yH="rt",DE=new B(""),vH=["GET","HEAD"];function _H(n,e){let y=M(DE),{isCacheActive:t}=y,r=Td(y,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!vH.includes(o)||!r.includeRequestsWithAuthHeaders&&EH(n)||r.filter?.(n)===!1)return e(n);let s=M(Ko);if(M(dH,{optional:!0}))throw new $(2803,!1);let u=n.url,l=IH(n,u),h=s.get(l,null),p=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(p=i.includeHeaders),h){let{[hH]:C,[yH]:x,[fH]:O,[pH]:j,[gH]:ee,[mH]:te}=h,De=C;switch(x){case"arraybuffer":De=new TextEncoder().encode(C).buffer;break;case"blob":De=new Blob([C]);break}let wt=new Uu(O);return W(new Wf({body:De,headers:wt,status:j,statusText:ee,url:te}))}return e(n)}function EH(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function KR(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function IH(n,e){let{params:t,method:r,responseType:i}=n,o=KR(t),s=n.serializeBody();s instanceof URLSearchParams?s=KR(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),u=wH(a);return u}function wH(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function QR(n){return[{provide:DE,useFactory:()=>(Yr("NgHttpTransferCache"),V({isCacheActive:!0},n))},{provide:WR,useValue:_H,multi:!0},{provide:Hi,multi:!0,useFactory:()=>{let e=M(Ft),t=M(DE);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var YR=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(he(ht))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Kf=(function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n})(Kf||{});function CH(n,e=[],t={}){return{\u0275kind:n,\u0275providers:e}}function JR(){return CH(Kf.EventReplay,pR())}function ZR(...n){let e=[],t=new Set;for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);let r=t.has(Kf.HttpTransferCacheOptions);return Tt([[],[],gR(),t.has(Kf.NoHttpTransferCache)||r?[]:QR({}),e])}var ie="primary",el=Symbol("RouteTitle"),PE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ns(n){return new PE(n)}function sP(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function TH(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_r(n[t],e[t]))return!1;return!0}function _r(n,e){let t=n?OE(n):void 0,r=e?OE(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!aP(n[i],e[i]))return!1;return!0}function OE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function aP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function cP(n){return n.length>0?n[n.length-1]:null}function ni(n){return ay(n)?n:$i(n)?$e(Promise.resolve(n)):W(n)}var DH={exact:lP,subset:dP},uP={exact:SH,subset:AH,ignored:()=>!0};function XR(n,e,t){return DH[t.paths](n.root,e.root,t.matrixParams)&&uP[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function SH(n,e){return _r(n,e)}function lP(n,e,t){if(!es(n.segments,e.segments)||!Jf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!lP(n.children[r],e.children[r],t))return!1;return!0}function AH(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>aP(n[t],e[t]))}function dP(n,e,t){return hP(n,e,e.segments,t)}function hP(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!es(i,t)||e.hasChildren()||!Jf(i,t,r))}else if(n.segments.length===t.length){if(!es(n.segments,t)||!Jf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!dP(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!es(n.segments,i)||!Jf(n.segments,i,r)||!n.children[ie]?!1:hP(n.children[ie],e,o,r)}}function Jf(n,e,t){return e.every((r,i)=>uP[t](n[i].parameters,r.parameters))}var Ir=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ae([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ns(this.queryParams),this._queryParamMap}toString(){return PH.serialize(this)}},Ae=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zf(this)}},Ji=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ns(this.parameters),this._parameterMap}toString(){return pP(this)}};function MH(n,e){return es(n,e)&&n.every((t,r)=>_r(t.parameters,e[r].parameters))}function es(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function RH(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ie&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ie&&(t=t.concat(e(i,r)))}),t}var tl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>new rs,providedIn:"root"})}return n})(),rs=class{parse(e){let t=new xE(e);return new Ir(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ju(e.root,!0)}`,r=xH(e.queryParams),i=typeof e.fragment=="string"?`#${OH(e.fragment)}`:"";return`${t}${r}${i}`}},PH=new rs;function Zf(n){return n.segments.map(e=>pP(e)).join("/")}function ju(n,e){if(!n.hasChildren())return Zf(n);if(e){let t=n.children[ie]?ju(n.children[ie],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ie&&r.push(`${i}:${ju(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=RH(n,(r,i)=>i===ie?[ju(n.children[ie],!1)]:[`${i}:${ju(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ie]!=null?`${Zf(n)}/${t[0]}`:`${Zf(n)}/(${t.join("//")})`}}function fP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qf(n){return fP(n).replace(/%3B/gi,";")}function OH(n){return encodeURI(n)}function NE(n){return fP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xf(n){return decodeURIComponent(n)}function eP(n){return Xf(n.replace(/\+/g,"%20"))}function pP(n){return`${NE(n.path)}${NH(n.parameters)}`}function NH(n){return Object.entries(n).map(([e,t])=>`;${NE(e)}=${NE(t)}`).join("")}function xH(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Qf(t)}=${Qf(i)}`).join("&"):`${Qf(t)}=${Qf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var kH=/^[^\/()?;#]+/;function SE(n){let e=n.match(kH);return e?e[0]:""}var FH=/^[^\/()?;=#]+/;function LH(n){let e=n.match(FH);return e?e[0]:""}var VH=/^[^=?&#]+/;function UH(n){let e=n.match(VH);return e?e[0]:""}var jH=/^[^&#]+/;function BH(n){let e=n.match(jH);return e?e[0]:""}var xE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ae([],{}):new Ae([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ie]=new Ae(e,t)),r}parseSegment(){let e=SE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new Ji(Xf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=LH(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=SE(this.remaining);i&&(r=i,this.capture(r))}e[Xf(t)]=Xf(r)}parseQueryParam(e){let t=UH(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=BH(this.remaining);s&&(r=s,this.capture(r))}let i=eP(t),o=eP(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=SE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ie);let s=this.parseChildren();t[o??ie]=Object.keys(s).length===1&&s[ie]?s[ie]:new Ae([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function gP(n){return n.segments.length>0?new Ae([],{[ie]:n}):n}function mP(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=mP(i);if(r===ie&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ae(n.segments,e);return $H(t)}function $H(n){if(n.numberOfChildren===1&&n.children[ie]){let e=n.children[ie];return new Ae(n.segments.concat(e.segments),e.children)}return n}function Aa(n){return n instanceof Ir}function yP(n,e,t=null,r=null){let i=vP(n);return _P(i,e,t,r)}function vP(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ae(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=gP(r);return e??i}function _P(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return AE(i,i,i,t,r);let o=HH(e);if(o.toRoot())return AE(i,i,new Ae([],{}),t,r);let s=zH(o,i,n),a=s.processChildren?$u(s.segmentGroup,s.index,o.commands):IP(s.segmentGroup,s.index,o.commands);return AE(i,s.segmentGroup,a,t,r)}function ep(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function qu(n){return typeof n=="object"&&n!=null&&n.outlets}function AE(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=EP(n,e,t);let a=gP(mP(s));return new Ir(a,o,i)}function EP(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=EP(o,e,t)}),new Ae(n.segments,r)}var tp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ep(r[0]))throw new $(4003,!1);let i=r.find(qu);if(i&&i!==cP(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function HH(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new tp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new tp(t,e,r)}var Da=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function zH(n,e,t){if(n.isAbsolute)return new Da(e,!0,0);if(!t)return new Da(e,!1,NaN);if(t.parent===null)return new Da(t,!0,0);let r=ep(n.commands[0])?0:1,i=t.segments.length-1+r;return qH(t,i,n.numberOfDoubleDots)}function qH(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new Da(r,!1,i-o)}function GH(n){return qu(n[0])?n[0].outlets:{[ie]:n}}function IP(n,e,t){if(n??=new Ae([],{}),n.segments.length===0&&n.hasChildren())return $u(n,e,t);let r=WH(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ae(n.segments.slice(0,r.pathIndex),{});return o.children[ie]=new Ae(n.segments.slice(r.pathIndex),n.children),$u(o,0,i)}else return r.match&&i.length===0?new Ae(n.segments,{}):r.match&&!n.hasChildren()?kE(n,e,t):r.match?$u(n,0,i):kE(n,e,t)}function $u(n,e,t){if(t.length===0)return new Ae(n.segments,{});{let r=GH(t),i={};if(Object.keys(r).some(o=>o!==ie)&&n.children[ie]&&n.numberOfChildren===1&&n.children[ie].segments.length===0){let o=$u(n.children[ie],e,t);return new Ae(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=IP(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ae(n.segments,i)}}function WH(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(qu(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!nP(u,l,s))return o;r+=2}else{if(!nP(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function kE(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(qu(o)){let u=KH(o.outlets);return new Ae(r,u)}if(i===0&&ep(t[0])){let u=n.segments[e];r.push(new Ji(u.path,tP(t[0]))),i++;continue}let s=qu(o)?o.outlets[ie]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&ep(a)?(r.push(new Ji(s,tP(a))),i+=2):(r.push(new Ji(s,{})),i++)}return new Ae(r,{})}function KH(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=kE(new Ae([],{}),0,r))}),e}function tP(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function nP(n,e,t){return n==t.path&&_r(e,t.parameters)}var Hu="imperative",vt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(vt||{}),bn=class{id;url;constructor(e,t){this.id=e,this.url=t}},is=class extends bn{type=vt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ei=class extends bn{urlAfterRedirects;type=vt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Yt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Yt||{}),Gu=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Gu||{}),Er=class extends bn{reason;code;type=vt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ti=class extends bn{reason;code;type=vt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ma=class extends bn{error;target;type=vt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Wu=class extends bn{urlAfterRedirects;state;type=vt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},np=class extends bn{urlAfterRedirects;state;type=vt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rp=class extends bn{urlAfterRedirects;state;shouldActivate;type=vt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ip=class extends bn{urlAfterRedirects;state;type=vt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},op=class extends bn{urlAfterRedirects;state;type=vt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sp=class{route;type=vt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ap=class{route;type=vt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},cp=class{snapshot;type=vt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},up=class{snapshot;type=vt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lp=class{snapshot;type=vt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dp=class{snapshot;type=vt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ku=class{},Ra=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function QH(n){return!(n instanceof Ku)&&!(n instanceof Ra)}function YH(n,e){return n.providers&&!n._injector&&(n._injector=va(n.providers,e,`Route: ${n.path}`)),n._injector??e}function or(n){return n.outlet||ie}function JH(n,e){let t=n.filter(r=>or(r)===e);return t.push(...n.filter(r=>or(r)!==e)),t}function Na(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var hp=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Na(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new xa(this.rootInjector)}},xa=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new hp(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(he(Ze))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=FE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=FE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=LE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return LE(e,this._root).map(t=>t.value)}};function FE(n,e){if(n===e.value)return e;for(let t of e.children){let r=FE(n,t);if(r)return r}return null}function LE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=LE(n,t);if(r.length)return r.unshift(e),r}return[]}var Cn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ta(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Qu=class extends fp{snapshot;constructor(e,t){super(e),this.snapshot=t,qE(this,e)}toString(){return this.snapshot.toString()}};function wP(n){let e=ZH(n),t=new lt([new Ji("",{})]),r=new lt({}),i=new lt({}),o=new lt({}),s=new lt(""),a=new Zi(t,r,o,s,i,ie,n,e.root);return a.snapshot=e.root,new Qu(new Cn(a,[]),e)}function ZH(n){let e={},t={},r={},o=new ts([],e,r,"",t,ie,n,null,{});return new Yu("",new Cn(o,[]))}var Zi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ue(l=>l[el]))??W(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ue(e=>ns(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ue(e=>ns(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function pp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&bP(i)&&(r.resolve[el]=i.title),r}var ts=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[el]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ns(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ns(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Yu=class extends fp{url;constructor(e,t){super(t),this.url=e,qE(this,t)}toString(){return CP(this._root)}};function qE(n,e){e.value._routerState=n,e.children.forEach(t=>qE(n,t))}function CP(n){let e=n.children.length>0?` { ${n.children.map(CP).join(", ")} } `:"";return`${n.value}${e}`}function ME(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_r(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),_r(e.params,t.params)||n.paramsSubject.next(t.params),TH(e.url,t.url)||n.urlSubject.next(t.url),_r(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function VE(n,e){let t=_r(n.params,e.params)&&MH(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||VE(n.parent,e.parent))}function bP(n){return typeof n.title=="string"||n.title===null}var TP=new B(""),nl=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ie;activateEvents=new Ge;deactivateEvents=new Ge;attachEvents=new Ge;detachEvents=new Ge;routerOutletData=hR();parentContexts=M(xa);location=M(Yo);changeDetector=M(wa);inputBinder=M(vp,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new UE(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ve({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Kr]})}return n})(),UE=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Zi?this.route:e===xa?this.childContexts:e===TP?this.outletData:this.parent.get(e,t)}},vp=new B("");var GE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ft({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Dt(0,"router-outlet")},dependencies:[nl],encapsulation:2})}return n})();function WE(n){let e=n.children&&n.children.map(WE),t=e?de(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ie&&(t.component=GE),t}function XH(n,e,t){let r=Ju(n,e._root,t?t._root:void 0);return new Qu(r,e)}function Ju(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=e4(n,e,t);return new Cn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ju(n,a)),s}}let r=t4(e.value),i=e.children.map(o=>Ju(n,o));return new Cn(r,i)}}function e4(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ju(n,r,i);return Ju(n,r)})}function t4(n){return new Zi(new lt(n.url),new lt(n.params),new lt(n.queryParams),new lt(n.fragment),new lt(n.data),n.outlet,n.component,n)}var Pa=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},DP="ngNavigationCancelingError";function gp(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Aa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=SP(!1,Yt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function SP(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[DP]=!0,t.cancellationCode=e,t}function n4(n){return AP(n)&&Aa(n.url)}function AP(n){return!!n&&n[DP]}var r4=(n,e,t,r)=>ue(i=>(new jE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),jE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ME(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ta(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ta(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ta(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ta(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new dp(o.value.snapshot))}),e.children.length&&this.forwardEvent(new up(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(ME(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ME(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},mp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Sa=class{component;route;constructor(e,t){this.component=e,this.route=t}};function i4(n,e,t){let r=n._root,i=e?e._root:null;return Bu(r,i,t,[r.value])}function o4(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ka(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Sy(n)?n:e.get(n):r}function Bu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ta(e);return n.children.forEach(s=>{s4(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>zu(a,t.getContext(s),i)),i}function s4(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=a4(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new mp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Bu(n,e,a?a.children:null,r,i):Bu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Sa(a.outlet.component,s))}else s&&zu(e,a,i),i.canActivateChecks.push(new mp(r)),o.component?Bu(n,null,a?a.children:null,r,i):Bu(n,null,t,r,i);return i}function a4(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!es(n.url,e.url);case"pathParamsOrQueryParamsChange":return!es(n.url,e.url)||!_r(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!VE(n,e)||!_r(n.queryParams,e.queryParams);case"paramsChange":default:return!VE(n,e)}}function zu(n,e,t){let r=Ta(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?zu(s,e.children.getContext(o),t):zu(s,null,t):zu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Sa(e.outlet.component,i)):t.canDeactivateChecks.push(new Sa(null,i)):t.canDeactivateChecks.push(new Sa(null,i))}function rl(n){return typeof n=="function"}function c4(n){return typeof n=="boolean"}function u4(n){return n&&rl(n.canLoad)}function l4(n){return n&&rl(n.canActivate)}function d4(n){return n&&rl(n.canActivateChild)}function h4(n){return n&&rl(n.canDeactivate)}function f4(n){return n&&rl(n.canMatch)}function MP(n){return n instanceof Gn||n?.name==="EmptyError"}var Yf=Symbol("INITIAL_VALUE");function Oa(){return nn(n=>sh(n.map(e=>e.pipe(Wn(1),uh(Yf)))).pipe(ue(e=>{for(let t of e)if(t!==!0){if(t===Yf)return Yf;if(t===!1||p4(t))return t}return!0}),hn(e=>e!==Yf),Wn(1)))}function p4(n){return Aa(n)||n instanceof Pa}function g4(n,e){return dt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?W(de(V({},t),{guardsResult:!0})):m4(s,r,i,n).pipe(dt(a=>a&&c4(a)?y4(r,o,n,e):W(a)),ue(a=>de(V({},t),{guardsResult:a})))})}function m4(n,e,t,r){return $e(n).pipe(dt(i=>w4(i.component,i.route,t,e,r)),Vr(i=>i!==!0,!0))}function y4(n,e,t,r){return $e(e).pipe(Ys(i=>Qs(_4(i.route.parent,r),v4(i.route,r),I4(n,i.path,t),E4(n,i.route,t))),Vr(i=>i!==!0,!0))}function v4(n,e){return n!==null&&e&&e(new lp(n)),W(!0)}function _4(n,e){return n!==null&&e&&e(new cp(n)),W(!0)}function E4(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return W(!0);let i=r.map(o=>Wc(()=>{let s=Na(e)??t,a=ka(o,s),u=l4(a)?a.canActivate(e,n):et(s,()=>a(e,n));return ni(u).pipe(Vr())}));return W(i).pipe(Oa())}function I4(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>o4(s)).filter(s=>s!==null).map(s=>Wc(()=>{let a=s.guards.map(u=>{let l=Na(s.node)??t,h=ka(u,l),p=d4(h)?h.canActivateChild(r,n):et(l,()=>h(r,n));return ni(p).pipe(Vr())});return W(a).pipe(Oa())}));return W(o).pipe(Oa())}function w4(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return W(!0);let s=o.map(a=>{let u=Na(e)??i,l=ka(a,u),h=h4(l)?l.canDeactivate(n,e,t,r):et(u,()=>l(n,e,t,r));return ni(h).pipe(Vr())});return W(s).pipe(Oa())}function C4(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return W(!0);let o=i.map(s=>{let a=ka(s,n),u=u4(a)?a.canLoad(e,t):et(n,()=>a(e,t));return ni(u)});return W(o).pipe(Oa(),RP(r))}function RP(n){return Bd(gt(e=>{if(typeof e!="boolean")throw gp(n,e)}),ue(e=>e===!0))}function b4(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return W(!0);let o=i.map(s=>{let a=ka(s,n),u=f4(a)?a.canMatch(e,t):et(n,()=>a(e,t));return ni(u)});return W(o).pipe(Oa(),RP(r))}var Zu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Xu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ba(n){return Ks(new Zu(n))}function T4(n){return Ks(new $(4e3,!1))}function D4(n){return Ks(SP(!1,Yt.GuardRejected))}var BE=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return W(r);if(i.numberOfChildren>1||!i.children[ie])return T4(`${e.redirectTo}`);i=i.children[ie]}}applyRedirectCommands(e,t,r,i,o){return S4(t,i,o).pipe(ue(s=>{if(s instanceof Ir)throw new Xu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Xu(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Ir(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ae(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function S4(n,e,t){if(typeof n=="string")return W(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return ni(et(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var $E={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function A4(n,e,t,r,i){let o=PP(n,e,t);return o.matched?(r=YH(e,r),b4(r,e,t,i).pipe(ue(s=>s===!0?o:V({},$E)))):W(o)}function PP(n,e,t){if(e.path==="**")return M4(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},$E):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||sP)(t,n,e);if(!i)return V({},$E);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function M4(n){return{matched:!0,parameters:n.length>0?cP(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function rP(n,e,t,r){return t.length>0&&O4(n,t,r)?{segmentGroup:new Ae(e,P4(r,new Ae(t,n.children))),slicedSegments:[]}:t.length===0&&N4(n,t,r)?{segmentGroup:new Ae(n.segments,R4(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ae(n.segments,n.children),slicedSegments:t}}function R4(n,e,t,r){let i={};for(let o of t)if(_p(n,e,o)&&!r[or(o)]){let s=new Ae([],{});i[or(o)]=s}return V(V({},r),i)}function P4(n,e){let t={};t[ie]=e;for(let r of n)if(r.path===""&&or(r)!==ie){let i=new Ae([],{});t[or(r)]=i}return t}function O4(n,e,t){return t.some(r=>_p(n,e,r)&&or(r)!==ie)}function N4(n,e,t){return t.some(r=>_p(n,e,r))}function _p(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function x4(n,e,t){return e.length===0&&!n.children[t]}var HE=class{};function k4(n,e,t,r,i,o,s="emptyOnly"){return new zE(n,e,t,r,i,s,o).recognize()}var F4=31,zE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new BE(this.urlSerializer,this.urlTree)}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=rP(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ue(({children:t,rootSnapshot:r})=>{let i=new Cn(r,t),o=new Yu("",i),s=yP(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ts([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ie,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ie,t).pipe(ue(r=>({children:r,rootSnapshot:t})),Ai(r=>{if(r instanceof Xu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Zu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ue(s=>s instanceof Cn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return $e(o).pipe(Ys(s=>{let a=r.children[s],u=JH(t,s);return this.processSegmentGroup(e,u,a,s,i)}),ch((s,a)=>(s.push(...a),s)),Mi(null),ly(),dt(s=>{if(s===null)return ba(r);let a=OP(s);return L4(a),W(a)}))}processSegment(e,t,r,i,o,s,a){return $e(t).pipe(Ys(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Ai(l=>{if(l instanceof Zu)return W(null);throw l}))),Vr(u=>!!u),Ai(u=>{if(MP(u))return x4(r,i,o)?W(new HE):ba(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return or(r)!==s&&(s===ie||!_p(i,o,r))?ba(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):ba(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=PP(t,i,o);if(!u)return ba(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>F4&&(this.allowRedirects=!1));let y=new ts(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,iP(i),or(i),i.component??i._loadedComponent??null,i,oP(i)),C=pp(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(nn(O=>this.applyRedirects.lineralizeSegments(i,O)),dt(O=>this.processSegment(e,r,t,O.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=A4(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(nn(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(nn(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,C=new ts(m,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,iP(r),or(r),r.component??r._loadedComponent??null,r,oP(r)),x=pp(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(x.params),C.data=Object.freeze(x.data);let{segmentGroup:O,slicedSegments:j}=rP(t,m,y,l);if(j.length===0&&O.hasChildren())return this.processChildren(h,l,O,C).pipe(ue(te=>new Cn(C,te)));if(l.length===0&&j.length===0)return W(new Cn(C,[]));let ee=or(r)===o;return this.processSegment(h,l,O,j,ee?ie:o,!0,C).pipe(ue(te=>new Cn(C,te instanceof Cn?[te]:[])))}))):ba(t)))}getChildConfig(e,t,r){return t.children?W({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?W({routes:t._loadedRoutes,injector:t._loadedInjector}):C4(e,t,r,this.urlSerializer).pipe(dt(i=>i?this.configLoader.loadChildren(e,t).pipe(gt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):D4(t))):W({routes:[],injector:e})}};function L4(n){n.sort((e,t)=>e.value.outlet===ie?-1:t.value.outlet===ie?1:e.value.outlet.localeCompare(t.value.outlet))}function V4(n){let e=n.value.routeConfig;return e&&e.path===""}function OP(n){let e=[],t=new Set;for(let r of n){if(!V4(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=OP(r.children);e.push(new Cn(r.value,i))}return e.filter(r=>!t.has(r))}function iP(n){return n.data||{}}function oP(n){return n.resolve||{}}function U4(n,e,t,r,i,o){return dt(s=>k4(n,e,t,r,s.extractedUrl,i,o).pipe(ue(({state:a,tree:u})=>de(V({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function j4(n,e){return dt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return W(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of NP(u))s.add(l);let a=0;return $e(s).pipe(Ys(u=>o.has(u)?B4(u,r,n,e):(u.data=pp(u,u.parent,n).resolve,W(void 0))),gt(()=>a++),Js(1),dt(u=>a===s.size?W(t):en))})}function NP(n){let e=n.children.map(t=>NP(t)).flat();return[n,...e]}function B4(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!bP(i)&&(o[el]=i.title),Wc(()=>(n.data=pp(n,n.parent,t).resolve,$4(o,n,e,r).pipe(ue(s=>(n._resolvedData=s,n.data=V(V({},n.data),s),null)))))}function $4(n,e,t,r){let i=OE(n);if(i.length===0)return W({});let o={};return $e(i).pipe(dt(s=>H4(n[s],e,t,r).pipe(Vr(),gt(a=>{if(a instanceof Pa)throw gp(new rs,a);o[s]=a}))),Js(1),ue(()=>o),Ai(s=>MP(s)?en:Ks(s)))}function H4(n,e,t,r){let i=Na(e)??r,o=ka(n,i),s=o.resolve?o.resolve(e,t):et(i,()=>o(e,t));return ni(s)}function RE(n){return nn(e=>{let t=n(e);return t?$e(t).pipe(ue(()=>e)):W(e)})}var KE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ie);return r}getResolvedTitleForRoute(t){return t.data[el]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>M(xP),providedIn:"root"})}return n})(),xP=(()=>{class n extends KE{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(he(YR))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),il=new B("",{providedIn:"root",factory:()=>({})}),ol=new B(""),kP=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(B_);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return W(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=ni(et(t,()=>r.loadComponent())).pipe(ue(LP),nn(VP),gt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Kc(()=>{this.componentLoaders.delete(r)})),o=new zs(i,()=>new Qe).pipe(Hs());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return W({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=FP(r,this.compiler,t,this.onLoadEndListener).pipe(Kc(()=>{this.childrenLoaders.delete(r)})),s=new zs(o,()=>new Qe).pipe(Hs());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function FP(n,e,t,r){return ni(et(t,()=>n.loadChildren())).pipe(ue(LP),nn(VP),dt(i=>i instanceof If||Array.isArray(i)?W(i):$e(e.compileModuleAsync(i))),ue(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(ol,[],{optional:!0,self:!0}).flat()),{routes:s.map(WE),injector:o}}))}function z4(n){return n&&typeof n=="object"&&"default"in n}function LP(n){return z4(n)?n.default:n}function VP(n){return W(n)}var Ep=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>M(q4),providedIn:"root"})}return n})(),q4=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UP=new B("");var jP=new B(""),BP=(()=>{class n{currentNavigation=_n(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Qe;transitionAbortWithErrorSubject=new Qe;configLoader=M(kP);environmentInjector=M(Ze);destroyRef=M(xn);urlSerializer=M(tl);rootContexts=M(xa);location=M(Ca);inputBindingEnabled=M(vp,{optional:!0})!==null;titleStrategy=M(KE);options=M(il,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(Ep);createViewTransition=M(UP,{optional:!0});navigationErrorHandler=M(jP,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>W(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new sp(i)),r=i=>this.events.next(new ap(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;mt(()=>{this.transitions?.next(de(V({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new lt(null),this.transitions.pipe(hn(r=>r!==null),nn(r=>{let i=!1;return W(r).pipe(nn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Yt.SupersededByNewNavigation),en;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?de(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new ti(o.id,this.urlSerializer.serialize(o.rawUrl),"",Gu.IgnoredSameUrlNavigation)),o.resolve(!1),en;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return W(o).pipe(nn(u=>(this.events.next(new is(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?en:Promise.resolve(u))),U4(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),gt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new Wu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new is(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let C=wP(this.rootComponentType).snapshot;return this.currentTransition=r=de(V({},o),{targetSnapshot:C,urlAfterRedirects:l,extras:de(V({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(x=>(x.finalUrl=l,x)),W(r)}else return this.events.next(new ti(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Gu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),en}),gt(o=>{let s=new np(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ue(o=>(this.currentTransition=r=de(V({},o),{guards:i4(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),g4(this.environmentInjector,o=>this.events.next(o)),gt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw gp(this.urlSerializer,o.guardsResult);let s=new rp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),hn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Yt.GuardRejected),!1)),RE(o=>{if(o.guards.canActivateChecks.length!==0)return W(o).pipe(gt(s=>{let a=new ip(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),nn(s=>{let a=!1;return W(s).pipe(j4(this.paramsInheritanceStrategy,this.environmentInjector),gt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Yt.NoDataFromResolver)}}))}),gt(s=>{let a=new op(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),RE(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=Na(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(gt(h=>{a.component=h}),ue(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return sh(s(o.targetSnapshot.root)).pipe(Mi(null),Wn(1))}),RE(()=>this.afterPreactivation()),nn(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?$e(a).pipe(ue(()=>r)):W(r)}),ue(o=>{let s=XH(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=de(V({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),gt(()=>{this.events.next(new Ku)}),r4(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Wn(1),Zs(new ce(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(hn(()=>!i&&!r.targetRouterState),gt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Yt.Aborted)}))),gt({next:o=>{i=!0,this.lastSuccessfulNavigation=mt(this.currentNavigation),this.events.next(new ei(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Zs(this.transitionAbortWithErrorSubject.pipe(gt(o=>{throw o}))),Kc(()=>{i||this.cancelNavigationTransition(r,"",Yt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ai(o=>{if(this.destroyed)return r.resolve(!1),en;if(i=!0,AP(o))this.events.next(new Er(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),n4(o)?this.events.next(new Ra(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Ma(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=et(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Pa){let{message:u,cancellationCode:l}=gp(this.urlSerializer,a);this.events.next(new Er(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Ra(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return en}))}))}cancelNavigationTransition(t,r,i){let o=new Er(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=mt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function G4(n){return n!==Hu}var $P=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>M(W4),providedIn:"root"})}return n})(),yp=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},W4=(()=>{class n extends yp{static \u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})();static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),HP=(()=>{class n{urlSerializer=M(tl);options=M(il,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(Ca);urlHandlingStrategy=M(Ep);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ir;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Ir?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=wP(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>M(K4),providedIn:"root"})}return n})(),K4=(()=>{class n extends HP{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof is?this.updateStateMemento():t instanceof ti?this.commitTransition(r):t instanceof Wu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ku?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Er&&t.code!==Yt.SupersededByNewNavigation&&t.code!==Yt.Redirect?this.restoreHistory(r):t instanceof Ma?this.restoreHistory(r,!0):t instanceof ei&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=V(V({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=V(V({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})();static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QE(n,e){n.events.pipe(hn(t=>t instanceof ei||t instanceof Er||t instanceof Ma||t instanceof ti),ue(t=>t instanceof ei||t instanceof ti?0:(t instanceof Er?t.code===Yt.Redirect||t.code===Yt.SupersededByNewNavigation:!1)?2:1),hn(t=>t!==2),Wn(1)).subscribe(()=>{e()})}var Q4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Y4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},wr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(wf);stateManager=M(HP);options=M(il,{optional:!0})||{};pendingTasks=M(Yn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(BP);urlSerializer=M(tl);location=M(Ca);urlHandlingStrategy=M(Ep);injector=M(Ze);_events=new Qe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M($P);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(ol,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(vp,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ze;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=mt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Er&&r.code!==Yt.Redirect&&r.code!==Yt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ei)this.navigated=!0;else if(r instanceof Ra){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||G4(i.source)},s);this.scheduleNavigation(a,Hu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}QH(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Hu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=V({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(sn)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return mt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(WE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=vP(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return _P(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Aa(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Hu,null,r)}navigate(t,r={skipLocationChange:!1}){return J4(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn($r(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},Q4):r===!1?i=V({},Y4):i=r,Aa(t))return XR(this.currentUrlTree,t,i);let o=this.parseUrl(t);return XR(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return QE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function J4(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new $(4008,!1)}var X4=new B("");function YE(n,...e){return Tt([{provide:ol,multi:!0,useValue:n},[],{provide:Zi,useFactory:e3,deps:[wr]},{provide:Hi,multi:!0,useFactory:t3},e.map(t=>t.\u0275providers)])}function e3(n){return n.routerState.root}function t3(){let n=M(qe);return e=>{let t=n.get(Ft);if(e!==t.components[0])return;let r=n.get(wr),i=n.get(n3);n.get(r3)===1&&r.initialNavigation(),n.get(i3,null,{optional:!0})?.setUpPreloading(),n.get(X4,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var n3=new B("",{factory:()=>new Qe}),r3=new B("",{providedIn:"root",factory:()=>1});var i3=new B("");var zP=()=>{};var WP=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},a3=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Ip={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(WP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):a3(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new ZE;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ZE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},c3=function(n){let e=WP(n);return Ip.encodeByteArray(e,!0)},al=function(n){return c3(n).replace(/\./g,"")},wp=function(n){try{return Ip.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function eI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var u3=()=>eI().__FIREBASE_DEFAULTS__,l3=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},d3=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&wp(n[1]);return e&&JSON.parse(e)},Cp=()=>{try{return zP()||u3()||l3()||d3()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},tI=n=>{var e,t;return(t=(e=Cp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},KP=n=>{let e=tI(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},nI=()=>{var n;return(n=Cp())===null||n===void 0?void 0:n.config},rI=n=>{var e;return(e=Cp())===null||e===void 0?void 0:e[`_${n}`]};var os=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Xi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function bp(n){return _(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function QP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[al(JSON.stringify(t)),al(JSON.stringify(s)),""].join(".")}var sl={};function h3(){let n={prod:[],emulator:[]};for(let e of Object.keys(sl))sl[e]?n.emulator.push(e):n.prod.push(e);return n}function f3(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var qP=!1;function Tp(n,e){if(typeof window>"u"||typeof document>"u"||!Xi(window.location.host)||sl[n]===e||sl[n]||qP)return;sl[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=h3().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{qP=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=f3(r),y=t("text"),C=document.getElementById(y)||document.createElement("span"),x=t("learnmore"),O=document.getElementById(x)||document.createElement("a"),j=t("preprendIcon"),ee=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let te=m.element;a(te),h(O,x);let De=l();u(ee,j),te.append(ee,C,O,De),document.body.appendChild(te)}o?(C.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function p3(){var n;let e=(n=Cp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZP(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function XP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eO(){let n=_t();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function tO(){return!p3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cl(){try{return typeof indexedDB=="object"}catch{return!1}}function nO(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var g3="FirebaseError",Tn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=g3,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sr.prototype.create)}},sr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?m3(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Tn(i,a,r)}};function m3(n,e){return n.replace(y3,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var y3=/\{\$([^}]+)}/g;function rO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Cr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(GP(o)&&GP(s)){if(!Cr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function GP(n){return n!==null&&typeof n=="object"}function ul(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function iO(n,e){let t=new XE(n,e);return t.subscribe.bind(t)}var XE=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");v3(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=JE),i.error===void 0&&(i.error=JE),i.complete===void 0&&(i.complete=JE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function v3(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function JE(){}var pue=14400*1e3;function pt(n){return n&&n._delegate?n._delegate:n}var Jt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ss="[DEFAULT]";var iI=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new os;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(E3(e))try{this.getOrInitializeService({instanceIdentifier:ss})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ss){return this.instances.has(e)}getOptions(e=ss){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_3(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ss){return this.component?this.component.multipleInstances?e:ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function _3(n){return n===ss?void 0:n}function E3(n){return n.instantiationMode==="EAGER"}var Dp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new iI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var I3=[],me=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(me||{}),w3={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},C3=me.INFO,b3={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},T3=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=b3[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},br=class{constructor(e){this.name=e,this._logLevel=C3,this._logHandler=T3,this._userLogHandler=null,I3.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?w3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}};var D3=(n,e)=>e.some(t=>n instanceof t),oO,sO;function S3(){return oO||(oO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function A3(){return sO||(sO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var aO=new WeakMap,sI=new WeakMap,cO=new WeakMap,oI=new WeakMap,cI=new WeakMap;function M3(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Tr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&aO.set(t,n)}).catch(()=>{}),cI.set(e,n),e}function R3(n){if(sI.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});sI.set(n,e)}var aI={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return sI.get(n);if(e==="objectStoreNames")return n.objectStoreNames||cO.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Tr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function uO(n){aI=n(aI)}function P3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Sp(this),e,...t);return cO.set(r,e.sort?e.sort():[e]),Tr(r)}:A3().includes(n)?function(...e){return n.apply(Sp(this),e),Tr(aO.get(this))}:function(...e){return Tr(n.apply(Sp(this),e))}}function O3(n){return typeof n=="function"?P3(n):(n instanceof IDBTransaction&&R3(n),D3(n,S3())?new Proxy(n,aI):n)}function Tr(n){if(n instanceof IDBRequest)return M3(n);if(oI.has(n))return oI.get(n);let e=O3(n);return e!==n&&(oI.set(n,e),cI.set(e,n)),e}var Sp=n=>cI.get(n);function dO(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Tr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Tr(s.result),u.oldVersion,u.newVersion,Tr(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var N3=["get","getKey","getAll","getAllKeys","count"],x3=["put","add","delete","clear"],uI=new Map;function lO(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(uI.get(e))return uI.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=x3.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||N3.includes(t)))return;let o=function(s,...a){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return uI.set(e,o),o}uO(n=>de(V({},n),{get:(e,t,r)=>lO(e,t)||n.get(e,t,r),has:(e,t)=>!!lO(e,t)||n.has(e,t)}));var dI=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(k3(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function k3(n){let e=n.getComponent();return e?.type==="VERSION"}var hI="@firebase/app",hO="0.13.2";var ri=new br("@firebase/app"),F3="@firebase/app-compat",L3="@firebase/analytics-compat",V3="@firebase/analytics",U3="@firebase/app-check-compat",j3="@firebase/app-check",B3="@firebase/auth",$3="@firebase/auth-compat",H3="@firebase/database",z3="@firebase/data-connect",q3="@firebase/database-compat",G3="@firebase/functions",W3="@firebase/functions-compat",K3="@firebase/installations",Q3="@firebase/installations-compat",Y3="@firebase/messaging",J3="@firebase/messaging-compat",Z3="@firebase/performance",X3="@firebase/performance-compat",ez="@firebase/remote-config",tz="@firebase/remote-config-compat",nz="@firebase/storage",rz="@firebase/storage-compat",iz="@firebase/firestore",oz="@firebase/ai",sz="@firebase/firestore-compat",az="firebase",cz="11.10.0";var fI="[DEFAULT]",uz={[hI]:"fire-core",[F3]:"fire-core-compat",[V3]:"fire-analytics",[L3]:"fire-analytics-compat",[j3]:"fire-app-check",[U3]:"fire-app-check-compat",[B3]:"fire-auth",[$3]:"fire-auth-compat",[H3]:"fire-rtdb",[z3]:"fire-data-connect",[q3]:"fire-rtdb-compat",[G3]:"fire-fn",[W3]:"fire-fn-compat",[K3]:"fire-iid",[Q3]:"fire-iid-compat",[Y3]:"fire-fcm",[J3]:"fire-fcm-compat",[Z3]:"fire-perf",[X3]:"fire-perf-compat",[ez]:"fire-rc",[tz]:"fire-rc-compat",[nz]:"fire-gcs",[rz]:"fire-gcs-compat",[iz]:"fire-fst",[sz]:"fire-fst-compat",[oz]:"fire-vertex","fire-js":"fire-js",[az]:"fire-js-all"};var ll=new Map,lz=new Map,pI=new Map;function fO(n,e){try{n.container.addComponent(e)}catch(t){ri.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ar(n){let e=n.name;if(pI.has(e))return ri.debug(`There were multiple attempts to register component ${e}.`),!1;pI.set(e,n);for(let t of ll.values())fO(t,n);for(let t of lz.values())fO(t,n);return!0}function Fa(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function jn(n){return n==null?!1:n.settings!==void 0}var dz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},eo=new sr("app","Firebase",dz);var gI=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eo.create("app-deleted",{appName:this._name})}};var to=cz;function vI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:fI,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw eo.create("bad-app-name",{appName:String(i)});if(t||(t=nI()),!t)throw eo.create("no-options");let o=ll.get(i);if(o){if(Cr(t,o.options)&&Cr(r,o.config))return o;throw eo.create("duplicate-app",{appName:i})}let s=new Dp(i);for(let u of pI.values())s.addComponent(u);let a=new gI(t,r,s);return ll.set(i,a),a}function as(n=fI){let e=ll.get(n);if(!e&&n===fI&&nI())return vI();if(!e)throw eo.create("no-app",{appName:n});return e}function Ap(){return Array.from(ll.values())}function We(n,e,t){var r;let i=(r=uz[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ri.warn(a.join(" "));return}ar(new Jt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var hz="firebase-heartbeat-database",fz=1,dl="firebase-heartbeat-store",lI=null;function yO(){return lI||(lI=dO(hz,fz,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(dl)}catch(t){console.warn(t)}}}}).catch(n=>{throw eo.create("idb-open",{originalErrorMessage:n.message})})),lI}function pz(n){return _(this,null,function*(){try{let t=(yield yO()).transaction(dl),r=yield t.objectStore(dl).get(vO(n));return yield t.done,r}catch(e){if(e instanceof Tn)ri.warn(e.message);else{let t=eo.create("idb-get",{originalErrorMessage:e?.message});ri.warn(t.message)}}})}function pO(n,e){return _(this,null,function*(){try{let r=(yield yO()).transaction(dl,"readwrite");yield r.objectStore(dl).put(e,vO(n)),yield r.done}catch(t){if(t instanceof Tn)ri.warn(t.message);else{let r=eo.create("idb-set",{originalErrorMessage:t?.message});ri.warn(r.message)}}})}function vO(n){return`${n.name}!${n.options.appId}`}var gz=1024,mz=30,mI=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new yI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=gO();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>mz){let s=vz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ri.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=gO(),{heartbeatsToSend:r,unsentEntries:i}=yz(this._heartbeatsCache.heartbeats),o=al(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ri.warn(t),""}})}};function gO(){return new Date().toISOString().substring(0,10)}function yz(n,e=gz){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),mO(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),mO(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var yI=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return cl()?nO().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield pz(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return pO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return pO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function mO(n){return al(JSON.stringify({version:2,heartbeats:n})).length}function vz(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function _z(n){ar(new Jt("platform-logger",e=>new dI(e),"PRIVATE")),ar(new Jt("heartbeat",e=>new mI(e),"PRIVATE")),We(hI,hO,n),We(hI,hO,"esm2017"),We("fire-js","")}_z("");var Ez="firebase",Iz="11.10.0";We(Ez,Iz,"app");function _O(n){n===void 0&&(n=M(qe));let e=n.get(Vi);return t=>new ce(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var no=new Ri("ANGULARFIRE2_VERSION");function hl(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Va=(n,e)=>{let t=e?[e]:Ap(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},La=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(La||{}),EO=oE()&&typeof Zone<"u"?La.WARN:La.SILENT;var Mp=class{zone;delegate;constructor(e,t=oy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},ro=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=M(be);this.outsideAngular=t.runOutsideAngular(()=>new Mp(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Mp(typeof Zone>"u"?void 0:Zone.current,iy))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IO=!1;function wz(n,e){!IO&&(EO>La.SILENT||oE())&&(IO=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),EO>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function Cz(n){let e=M(be,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function cs(n){let e=M(be,{optional:!0});return e?e.run(()=>n()):n()}var bz=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),et(t,()=>cs(()=>n.apply(void 0,r)))),Zt=(n,e,t)=>(t||=e?La.WARN:La.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=M(ro),s=M(Vi),a=M(Ze)}catch{return wz(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=cs(()=>s.add())),i[l]=bz(i[l],r,a));let u=Cz(()=>n.apply(this,i));return e?u instanceof ce?u.pipe(Si(o.outsideAngular),Di(o.insideAngular),_O(a)):u instanceof Promise?cs(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>et(a,()=>cs(()=>h(m))),m=>et(a,()=>cs(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:cs(()=>u):u instanceof ce?u.pipe(Si(o.outsideAngular),Di(o.insideAngular)):cs(()=>u)});var ii=class{constructor(e){return e}},us=class{constructor(){return Ap()}};function Tz(n){return n&&n.length===1?n[0]:new ii(as())}var _I=new B("angularfire2._apps"),Dz={provide:ii,useFactory:Tz,deps:[[new an,_I]]},Sz={provide:us,deps:[[new an,_I]]};function Az(n){return(e,t)=>{let r=t.get(In);We("angularfire",no.full,"core"),We("angularfire",no.full,"app"),We("angular",Cy.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ii(i)}}function wO(n,...e){return Tt([Dz,Sz,{provide:_I,useFactory:Az(n),multi:!0,deps:[be,qe,ro,...e]}])}var CO=Zt(vI,!0);var Mz=new Map,Rz={activated:!1,tokenObservers:[]},Pz={initialized:!1,enabled:!1};function cr(n){return Mz.get(n)||Object.assign({},Rz)}function SO(){return Pz}var Oz="https://content-firebaseappcheck.googleapis.com/v1";var Nz="exchangeDebugToken",bO={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},yle=1440*60*1e3;var wI=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new os,this.pending.promise.catch(t=>{}),yield xz(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new os,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function xz(n){return new Promise(e=>{setTimeout(e,n)})}var kz={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},io=new sr("appCheck","AppCheck",kz);function AO(n){if(!cr(n).activated)throw io.create("use-before-activation",{appName:n.name})}function MO(r,i){return _(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw io.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw io.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw io.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw io.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function RO(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Oz}/projects/${t}/apps/${r}:${Nz}?key=${i}`,body:{debug_token:e}}}var Fz="firebase-app-check-database",Lz=1,CI="firebase-app-check-store";var Rp=null;function Vz(){return Rp||(Rp=new Promise((n,e)=>{try{let t=indexedDB.open(Fz,Lz);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(io.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(CI,{keyPath:"compositeKey"})}}}catch(t){e(io.create("storage-open",{originalErrorMessage:t?.message}))}}),Rp)}function Uz(n,e){return jz(Bz(n),e)}function jz(n,e){return _(this,null,function*(){let r=(yield Vz()).transaction(CI,"readwrite"),o=r.objectStore(CI).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(io.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function Bz(n){return`${n.options.appId}-${n.name}`}var fl=new br("@firebase/app-check");function EI(n,e){return cl()?Uz(n,e).catch(t=>{fl.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function PO(){return SO().enabled}function OO(){return _(this,null,function*(){let n=SO();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var $z={error:"UNKNOWN_ERROR"};function Hz(n){return Ip.encodeString(JSON.stringify(n),!1)}function bI(n,e=!1,t=!1){return _(this,null,function*(){let r=n.app;AO(r);let i=cr(r),o=i.token,s;if(o&&!pl(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(pl(l)?o=l:yield EI(r,void 0))}if(!e&&o&&pl(o))return{token:o.token};let a=!1;if(PO())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=MO(RO(r,yield OO()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield EI(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?fl.warn(l.message):t&&fl.error(l),II(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield cr(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?fl.warn(l.message):t&&fl.error(l),s=l}let u;return o?s?pl(o)?u={token:o.token,internalError:s}:u=II(s):(u={token:o.token},i.token=o,yield EI(r,o)):u=II(s),a&&Wz(r,u),u})}function zz(n){return _(this,null,function*(){let e=n.app;AO(e);let{provider:t}=cr(e);if(PO()){let r=yield OO(),{token:i}=yield MO(RO(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function qz(n,e,t,r){let{app:i}=n,o=cr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&pl(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),TO(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>TO(n))}function NO(n,e){let t=cr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function TO(n){let{app:e}=n,t=cr(e),r=t.tokenRefresher;r||(r=Gz(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Gz(n){let{app:e}=n;return new wI(()=>_(null,null,function*(){let t=cr(e),r;if(t.token?r=yield bI(n,!0):r=yield bI(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=cr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},bO.RETRIAL_MIN_WAIT,bO.RETRIAL_MAX_WAIT)}function Wz(n,e){let t=cr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function pl(n){return n.expireTimeMillis-Date.now()>0}function II(n){return{token:Hz($z),error:n}}var TI=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=cr(this.app);for(let t of e)NO(this.app,t.next);return Promise.resolve()}};function Kz(n,e){return new TI(n,e)}function Qz(n){return{getToken:e=>bI(n,e),getLimitedUseToken:()=>zz(n),addTokenListener:e=>qz(n,"INTERNAL",e),removeTokenListener:e=>NO(n.app,e)}}var Yz="@firebase/app-check",Jz="0.10.1";var Zz="app-check",DO="app-check-internal";function Xz(){ar(new Jt(Zz,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Kz(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(DO).initialize()})),ar(new Jt(DO,n=>{let e=n.getProvider("app-check").getImmediate();return Qz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),We(Yz,Jz)}Xz();var e6="app-check";var Ua=class{constructor(){return Va(e6)}};var t6=["localhost","0.0.0.0","127.0.0.1"],Rle=typeof window<"u"&&t6.includes(window.location.hostname);function KO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var QO=KO,YO=new sr("auth","Firebase",KO());var Fp=new br("@firebase/auth");function n6(n,...e){Fp.logLevel<=me.WARN&&Fp.warn(`Auth (${to}): ${n}`,...e)}function Op(n,...e){Fp.logLevel<=me.ERROR&&Fp.error(`Auth (${to}): ${n}`,...e)}function ao(n,...e){throw qI(n,...e)}function ds(n,...e){return qI(n,...e)}function JO(n,e,t){let r=Object.assign(Object.assign({},QO()),{[e]:t});return new sr("auth","Firebase",r).create(e,{appName:n.name})}function ls(n){return JO(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return YO.create(n,...e)}function ne(n,e,...t){if(!n)throw qI(e,...t)}function oi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Op(e),new Error(e)}function co(n,e){n||oi(e)}function MI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function r6(){return xO()==="http:"||xO()==="https:"}function xO(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function i6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(r6()||ZP()||"connection"in navigator)?navigator.onLine:!0}function o6(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var hs=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,co(t>e,"Short delay should be less than long delay!"),this.isMobile=YP()||XP()}get(){return i6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function GI(n,e){co(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Lp=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var s6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var a6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],c6=new hs(3e4,6e4);function WI(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ja(o,s,a,u){return _(this,arguments,function*(n,e,t,r,i={}){return ZO(n,i,()=>_(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=ul(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:m},l);return JP()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Xi(n.emulatorConfig.host)&&(y.credentials="include"),Lp.fetch()(yield XO(n,n.config.apiHost,t,p),y)}))})}function ZO(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},s6),e);try{let i=new RI(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Pp(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pp(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Pp(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Pp(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw JO(n,h,l);ao(n,h)}}catch(i){if(i instanceof Tn)throw i;ao(n,"network-request-failed",{message:String(i)})}})}function u6(o,s,a,u){return _(this,arguments,function*(n,e,t,r,i={}){let l=yield ja(n,e,t,r,i);return"mfaPendingCredential"in l&&ao(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function XO(n,e,t,r){return _(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?GI(n.config,i):`${n.config.apiScheme}://${i}`;return a6.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var RI=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ds(this.auth,"network-request-failed")),c6.get())})}};function Pp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ds(n,e,r);return i.customData._tokenResponse=t,i}function l6(n,e){return _(this,null,function*(){return ja(n,"POST","/v1/accounts:delete",e)})}function Vp(n,e){return _(this,null,function*(){return ja(n,"POST","/v1/accounts:lookup",e)})}function gl(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function KI(n,e=!1){return _(this,null,function*(){let t=pt(n),r=yield t.getIdToken(e),i=QI(r);ne(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:gl(DI(i.auth_time)),issuedAtTime:gl(DI(i.iat)),expirationTime:gl(DI(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function DI(n){return Number(n)*1e3}function QI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Op("JWT malformed, contained fewer than 3 sections"),null;try{let i=wp(t);return i?JSON.parse(i):(Op("Failed to decode base64 JWT payload"),null)}catch(i){return Op("Caught error parsing JWT payload as JSON",i?.toString()),null}}function kO(n){let e=QI(n);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function yl(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Tn&&d6(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function d6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var PI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var vl=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gl(this.lastLoginAt),this.creationTime=gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Up(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield yl(n,Vp(t,{idToken:r}));ne(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?eN(o.providerUserInfo):[],a=h6(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new vl(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function YI(n){return _(this,null,function*(){let e=pt(n);yield Up(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function h6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function eN(n){return n.map(e=>{var{providerId:t}=e,r=sy(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function f6(n,e){return _(this,null,function*(){let t=yield ZO(n,{},()=>_(null,null,function*(){let r=ul({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield XO(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&Xi(n.emulatorConfig.host)&&(u.credentials="include"),Lp.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function p6(n,e){return _(this,null,function*(){return ja(n,"POST","/v2/accounts:revokeToken",WI(n,e))})}var ml=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ne(e.length!==0,"internal-error");let t=kO(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield f6(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ne(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ne(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ne(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return oi("not implemented")}};function oo(n,e){ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var so=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=sy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new vl(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield yl(this,this.stsTokenManager.getToken(this.auth,e));return ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return KI(this,e)}reload(){return YI(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Up(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(jn(this.auth.app))return Promise.reject(ls(this.auth));let e=yield this.getIdToken();return yield yl(this,l6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(s=t.photoURL)!==null&&s!==void 0?s:void 0,x=(a=t.tenantId)!==null&&a!==void 0?a:void 0,O=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,j=(l=t.createdAt)!==null&&l!==void 0?l:void 0,ee=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:te,emailVerified:De,isAnonymous:wt,providerData:Pe,stsTokenManager:b}=t;ne(te&&b,e,"internal-error");let v=ml.fromJSON(this.name,b);ne(typeof te=="string",e,"internal-error"),oo(p,e.name),oo(m,e.name),ne(typeof De=="boolean",e,"internal-error"),ne(typeof wt=="boolean",e,"internal-error"),oo(y,e.name),oo(C,e.name),oo(x,e.name),oo(O,e.name),oo(j,e.name),oo(ee,e.name);let I=new n({uid:te,auth:e,email:m,emailVerified:De,displayName:p,isAnonymous:wt,photoURL:C,phoneNumber:y,tenantId:x,stsTokenManager:v,createdAt:j,lastLoginAt:ee});return Pe&&Array.isArray(Pe)&&(I.providerData=Pe.map(w=>Object.assign({},w))),O&&(I._redirectEventId=O),I}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new ml;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Up(o),o})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];ne(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?eN(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new ml;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new vl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var FO=new Map;function si(n){co(n instanceof Function,"Expected a class definition");let e=FO.get(n);return e?(co(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,FO.set(n,e),e)}var g6=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),OI=g6;function Np(n,e,t){return`firebase:${n}:${e}:${t}`}var jp=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Np(this.userKey,i.apiKey,o),this.fullPersistenceKey=Np("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Vp(this.auth,{idToken:e}).catch(()=>{});return t?so._fromGetAccountInfoResponse(this.auth,t,e):null}return so._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(si(OI),e,r);let i=(yield Promise.all(t.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||si(OI),s=Np(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield Vp(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield so._fromGetAccountInfoResponse(e,m,h)}else p=so._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>_(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function LO(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sN(e))return"Blackberry";if(aN(e))return"Webos";if(nN(e))return"Safari";if((e.includes("chrome/")||rN(e))&&!e.includes("edge/"))return"Chrome";if(oN(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function tN(n=_t()){return/firefox\//i.test(n)}function nN(n=_t()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rN(n=_t()){return/crios\//i.test(n)}function iN(n=_t()){return/iemobile/i.test(n)}function oN(n=_t()){return/android/i.test(n)}function sN(n=_t()){return/blackberry/i.test(n)}function aN(n=_t()){return/webos/i.test(n)}function JI(n=_t()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function m6(n=_t()){var e;return JI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function y6(){return eO()&&document.documentMode===10}function cN(n=_t()){return JI(n)||oN(n)||aN(n)||sN(n)||/windows phone/i.test(n)||iN(n)}function uN(n,e=[]){let t;switch(n){case"Browser":t=LO(_t());break;case"Worker":t=`${LO(_t())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${to}/${r}`}var NI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function v6(t){return _(this,arguments,function*(n,e={}){return ja(n,"GET","/v2/passwordPolicy",WI(n,e))})}var _6=6,xI=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:_6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var kI=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bp(this),this.idTokenSubscription=new Bp(this),this.beforeStateQueue=new NI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=si(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield jp.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield Vp(this,{idToken:e}),r=yield so._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(jn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Up(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=o6()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(jn(this.app))return Promise.reject(ls(this));let t=e?pt(e):null;return t&&ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return jn(this.app)?Promise.reject(ls(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return jn(this.app)?Promise.reject(ls(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(si(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield v6(this),t=new xI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield p6(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&si(e)||this._popupRedirectResolver;ne(t,this,"argument-error"),this.redirectPersistenceManager=yield jp.create(this,[si(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&n6(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function ZI(n){return pt(n)}var Bp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=iO(t=>this.observer=t)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var XI={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function E6(n){XI=n}function I6(n){return XI.loadJS(n)}function w6(){return XI.gapiScript}function lN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function ew(n,e){let t=Fa(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Cr(o,e??{}))return i;ao(i,"already-initialized")}return t.initialize({options:e})}function C6(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(si);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function tw(n,e,t){let r=ZI(n);ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=dN(e),{host:s,port:a}=b6(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ne(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ne(Cr(l,r.config.emulator)&&Cr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Xi(s)?(bp(`${o}//${s}${u}`),Tp("Auth",!0)):i||T6()}function dN(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function b6(n){let e=dN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:VO(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:VO(s)}}}function VO(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function T6(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var $p=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return oi("not implemented")}_getIdTokenResponse(e){return oi("not implemented")}_linkToIdToken(e,t){return oi("not implemented")}_getReauthenticationResolver(e){return oi("not implemented")}};function SI(n,e){return _(this,null,function*(){return u6(n,"POST","/v1/accounts:signInWithIdp",WI(n,e))})}var Hp=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var FI=class extends Hp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var _l=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let o=yield so._fromIdTokenResponse(e,r,i),s=UO(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=UO(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function UO(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var LI=class n extends Tn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function hN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?LI._fromErrorAndOperation(n,o,e,r):o})}function D6(n,e,t=!1){return _(this,null,function*(){let r=yield yl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return _l._forOperation(n,"link",r)})}function S6(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(jn(r.app))return Promise.reject(ls(r));let i="reauthenticate";try{let o=yield yl(n,hN(r,i,e,n),t);ne(o.idToken,r,"internal-error");let s=QI(o.idToken);ne(s,r,"internal-error");let{sub:a}=s;return ne(n.uid===a,r,"user-mismatch"),_l._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&ao(r,"user-mismatch"),o}})}function A6(n,e,t=!1){return _(this,null,function*(){if(jn(n.app))return Promise.reject(ls(n));let r="signIn",i=yield hN(n,r,e),o=yield _l._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function nw(n,e,t,r){return pt(n).onIdTokenChanged(e,t,r)}function rw(n,e,t){return pt(n).beforeAuthStateChanged(e,t)}var zp="__sak";var qp=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zp,"1"),this.storage.removeItem(zp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var M6=1e3,R6=10,P6=(()=>{class n extends qp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cN(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);y6()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,R6):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},M6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield Ci(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield Ci(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield Ci(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),fN=P6;var O6=(()=>{class n extends qp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),iw=O6;function N6(n){return Promise.all(n.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var x6=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield N6(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function pN(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var VI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=pN("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Dr(){return window}function k6(n){Dr().location.href=n}function gN(){return typeof Dr().WorkerGlobalScope<"u"&&typeof Dr().importScripts=="function"}function F6(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function L6(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function V6(){return gN()?self:null}var mN="firebaseLocalStorageDb",U6=1,Gp="firebaseLocalStorage",yN="fbase_key",fs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Kp(n,e){return n.transaction([Gp],e?"readwrite":"readonly").objectStore(Gp)}function j6(){let n=indexedDB.deleteDatabase(mN);return new fs(n).toPromise()}function UI(){let n=indexedDB.open(mN,U6);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Gp,{keyPath:yN})}catch(i){t(i)}}),n.addEventListener("success",()=>_(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Gp)?e(r):(r.close(),yield j6(),e(yield UI()))}))})}function jO(n,e,t){return _(this,null,function*(){let r=Kp(n,!0).put({[yN]:e,value:t});return new fs(r).toPromise()})}function B6(n,e){return _(this,null,function*(){let t=Kp(n,!1).get(e),r=yield new fs(t).toPromise();return r===void 0?null:r.value})}function BO(n,e){let t=Kp(n,!0).delete(e);return new fs(t).toPromise()}var $6=800,H6=3,z6=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield UI(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>H6)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return gN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=x6._getInstance(V6()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,r;if(this.activeServiceWorker=yield F6(),!this.activeServiceWorker)return;this.sender=new VI(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||L6()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield UI();return yield jO(t,zp,"1"),yield BO(t,zp),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>jO(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>B6(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>BO(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(o=>{let s=Kp(o,!1).getAll();return new fs(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),$6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),vN=z6;var jle=lN("rcb"),Ble=new hs(3e4,6e4);function q6(n,e){return e?si(e):(ne(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var El=class extends $p{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return SI(e,this._buildIdpRequest())}_linkToIdToken(e,t){return SI(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return SI(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function G6(n){return A6(n.auth,new El(n),n.bypassAuthState)}function W6(n){let{auth:e,user:t}=n;return ne(t,e,"internal-error"),S6(t,new El(n),n.bypassAuthState)}function K6(n){return _(this,null,function*(){let{auth:e,user:t}=n;return ne(t,e,"internal-error"),D6(t,new El(n),n.bypassAuthState)})}var jI=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return G6;case"linkViaPopup":case"linkViaRedirect":return K6;case"reauthViaPopup":case"reauthViaRedirect":return W6;default:ao(this.auth,"internal-error")}}resolve(e){co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var $le=new hs(2e3,1e4);var Q6="pendingRedirect",xp=new Map,BI=class n extends jI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=xp.get(this.auth._key());if(!e){try{let r=(yield Y6(this.resolver,this.auth))?yield Ci(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}xp.set(this.auth._key(),e)}return this.bypassAuthState||xp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Ci(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Ci(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function Y6(n,e){return _(this,null,function*(){let t=X6(e),r=Z6(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function J6(n,e){xp.set(n._key(),e)}function Z6(n){return si(n._redirectPersistence)}function X6(n){return Np(Q6,n.config.apiKey,n.name)}function eq(n,e,t=!1){return _(this,null,function*(){if(jn(n.app))return Promise.reject(ls(n));let r=ZI(n),i=q6(r,e),s=yield new BI(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var tq=600*1e3,$I=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!_N(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ds(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tq&&this.cachedEventUids.clear(),this.cachedEventUids.has($O(e))}saveEventToCache(e){this.cachedEventUids.add($O(e)),this.lastProcessedEventTime=Date.now()}};function $O(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function _N({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function nq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _N(n);default:return!1}}function rq(t){return _(this,arguments,function*(n,e={}){return ja(n,"GET","/v1/projects",e)})}var iq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oq=/^https?/;function sq(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield rq(n);for(let t of e)try{if(aq(t))return}catch{}ao(n,"unauthorized-domain")})}function aq(n){let e=MI(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!oq.test(t))return!1;if(iq.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var cq=new hs(3e4,6e4);function HO(){let n=Dr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function uq(n){return new Promise((e,t)=>{var r,i,o;function s(){HO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{HO(),t(ds(n,"network-request-failed"))},timeout:cq.get()})}if(!((i=(r=Dr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Dr().gapi)===null||o===void 0)&&o.load)s();else{let a=lN("iframefcb");return Dr()[a]=()=>{gapi.load?s():t(ds(n,"network-request-failed"))},I6(`${w6()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw kp=null,e})}var kp=null;function lq(n){return kp=kp||uq(n),kp}var dq=new hs(5e3,15e3),hq="__/auth/iframe",fq="emulator/auth/iframe",pq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mq(n){let e=n.config;ne(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?GI(e,fq):`https://${n.config.authDomain}/${hq}`,r={apiKey:e.apiKey,appName:n.name,v:to},i=gq.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${ul(r).slice(1)}`}function yq(n){return _(this,null,function*(){let e=yield lq(n),t=Dr().gapi;return ne(t,n,"internal-error"),e.open({where:document.body,url:mq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pq,dontclear:!0},r=>new Promise((i,o)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=ds(n,"network-request-failed"),a=Dr().setTimeout(()=>{o(s)},dq.get());function u(){Dr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var vq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_q=500,Eq=600,Iq="_blank",wq="http://localhost",Wp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Cq(n,e,t,r=_q,i=Eq){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},vq),{width:r.toString(),height:i.toString(),top:o,left:s}),l=_t().toLowerCase();t&&(a=rN(l)?Iq:t),tN(l)&&(e=e||wq,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,C])=>`${m}${y}=${C},`,"");if(m6(l)&&a!=="_self")return bq(e||"",a),new Wp(null);let p=window.open(e||"",a,h);ne(p,n,"popup-blocked");try{p.focus()}catch{}return new Wp(p)}function bq(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Tq="__/auth/handler",Dq="emulator/auth/handler",Sq=encodeURIComponent("fac");function zO(n,e,t,r,i,o){return _(this,null,function*(){ne(n.config.authDomain,n,"auth-domain-config-required"),ne(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:to,eventId:i};if(e instanceof Hp){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",rO(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof FI){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${Sq}=${encodeURIComponent(u)}`:"";return`${Aq(n)}?${ul(a).slice(1)}${l}`})}function Aq({config:n}){return n.emulator?GI(n,Dq):`https://${n.authDomain}/${Tq}`}var AI="webStorageSupport",HI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iw,this._completeRedirectFn=eq,this._overrideRedirectResult=J6}_openPopup(e,t,r,i){return _(this,null,function*(){var o;co((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield zO(e,t,r,MI(),i);return Cq(e,s,pN())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield zO(e,t,r,MI(),i);return k6(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(co(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield yq(e),r=new $I(e);return t.register("authEvent",i=>(ne(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(AI,{type:AI},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[AI];s!==void 0&&t(!!s),ao(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return cN()||nN()||JI()}},EN=HI;var qO="@firebase/auth",GO="1.10.8";var zI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Mq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Rq(n){ar(new Jt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ne(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uN(n)},l=new kI(r,i,o,u);return C6(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ar(new Jt("auth-internal",e=>{let t=ZI(e.getProvider("auth").getImmediate());return(r=>new zI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),We(qO,GO,Mq(n)),We(qO,GO,"esm2017")}var Pq=300,Oq=rI("authIdTokenMaxAge")||Pq,WO=null,Nq=n=>e=>_(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Oq)return;let i=t?.token;WO!==i&&(WO=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Qp(n=as()){let e=Fa(n,"auth");if(e.isInitialized())return e.getImmediate();let t=ew(n,{popupRedirectResolver:EN,persistence:[vN,fN,iw]}),r=rI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=Nq(o.toString());rw(t,s,()=>s(t.currentUser)),nw(t,a=>s(a))}}let i=tI("auth");return i&&tw(t,`http://${i}`),t}function xq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}E6({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=ds("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",xq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Rq("Browser");var IN="auth",Il=class{constructor(e){return e}},wl=class{constructor(){return Va(IN)}};var ow=new B("angularfire2.auth-instances");function SG(n,e){let t=hl(IN,n,e);return t&&new Il(t)}function AG(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Il(r)}}var MG={provide:wl,deps:[[new an,ow]]},RG={provide:Il,useFactory:SG,deps:[[new an,ow],ii]};function wN(n,...e){return We("angularfire",no.full,"auth"),Tt([RG,MG,{provide:ow,useFactory:AG(n),multi:!0,deps:[be,qe,ro,us,[new an,Ua],...e]}])}var CN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bN={};var ai,sw;(function(){var n;function e(b,v){function I(){}I.prototype=v.prototype,b.D=v.prototype,b.prototype=new I,b.prototype.constructor=b,b.C=function(w,T,A){for(var E=Array(arguments.length-2),kr=2;kr<arguments.length;kr++)E[kr-2]=arguments[kr];return v.prototype[T].apply(w,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,v,I){I||(I=0);var w=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)w[T]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(T=0;16>T;++T)w[T]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=b.g[0],I=b.g[1],T=b.g[2];var A=b.g[3],E=v+(A^I&(T^A))+w[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=A+(T^v&(I^T))+w[1]+3905402710&4294967295,A=v+(E<<12&4294967295|E>>>20),E=T+(I^A&(v^I))+w[2]+606105819&4294967295,T=A+(E<<17&4294967295|E>>>15),E=I+(v^T&(A^v))+w[3]+3250441966&4294967295,I=T+(E<<22&4294967295|E>>>10),E=v+(A^I&(T^A))+w[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=A+(T^v&(I^T))+w[5]+1200080426&4294967295,A=v+(E<<12&4294967295|E>>>20),E=T+(I^A&(v^I))+w[6]+2821735955&4294967295,T=A+(E<<17&4294967295|E>>>15),E=I+(v^T&(A^v))+w[7]+4249261313&4294967295,I=T+(E<<22&4294967295|E>>>10),E=v+(A^I&(T^A))+w[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=A+(T^v&(I^T))+w[9]+2336552879&4294967295,A=v+(E<<12&4294967295|E>>>20),E=T+(I^A&(v^I))+w[10]+4294925233&4294967295,T=A+(E<<17&4294967295|E>>>15),E=I+(v^T&(A^v))+w[11]+2304563134&4294967295,I=T+(E<<22&4294967295|E>>>10),E=v+(A^I&(T^A))+w[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=A+(T^v&(I^T))+w[13]+4254626195&4294967295,A=v+(E<<12&4294967295|E>>>20),E=T+(I^A&(v^I))+w[14]+2792965006&4294967295,T=A+(E<<17&4294967295|E>>>15),E=I+(v^T&(A^v))+w[15]+1236535329&4294967295,I=T+(E<<22&4294967295|E>>>10),E=v+(T^A&(I^T))+w[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^T&(v^I))+w[6]+3225465664&4294967295,A=v+(E<<9&4294967295|E>>>23),E=T+(v^I&(A^v))+w[11]+643717713&4294967295,T=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(T^A))+w[0]+3921069994&4294967295,I=T+(E<<20&4294967295|E>>>12),E=v+(T^A&(I^T))+w[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^T&(v^I))+w[10]+38016083&4294967295,A=v+(E<<9&4294967295|E>>>23),E=T+(v^I&(A^v))+w[15]+3634488961&4294967295,T=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(T^A))+w[4]+3889429448&4294967295,I=T+(E<<20&4294967295|E>>>12),E=v+(T^A&(I^T))+w[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^T&(v^I))+w[14]+3275163606&4294967295,A=v+(E<<9&4294967295|E>>>23),E=T+(v^I&(A^v))+w[3]+4107603335&4294967295,T=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(T^A))+w[8]+1163531501&4294967295,I=T+(E<<20&4294967295|E>>>12),E=v+(T^A&(I^T))+w[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^T&(v^I))+w[2]+4243563512&4294967295,A=v+(E<<9&4294967295|E>>>23),E=T+(v^I&(A^v))+w[7]+1735328473&4294967295,T=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(T^A))+w[12]+2368359562&4294967295,I=T+(E<<20&4294967295|E>>>12),E=v+(I^T^A)+w[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^T)+w[8]+2272392833&4294967295,A=v+(E<<11&4294967295|E>>>21),E=T+(A^v^I)+w[11]+1839030562&4294967295,T=A+(E<<16&4294967295|E>>>16),E=I+(T^A^v)+w[14]+4259657740&4294967295,I=T+(E<<23&4294967295|E>>>9),E=v+(I^T^A)+w[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^T)+w[4]+1272893353&4294967295,A=v+(E<<11&4294967295|E>>>21),E=T+(A^v^I)+w[7]+4139469664&4294967295,T=A+(E<<16&4294967295|E>>>16),E=I+(T^A^v)+w[10]+3200236656&4294967295,I=T+(E<<23&4294967295|E>>>9),E=v+(I^T^A)+w[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^T)+w[0]+3936430074&4294967295,A=v+(E<<11&4294967295|E>>>21),E=T+(A^v^I)+w[3]+3572445317&4294967295,T=A+(E<<16&4294967295|E>>>16),E=I+(T^A^v)+w[6]+76029189&4294967295,I=T+(E<<23&4294967295|E>>>9),E=v+(I^T^A)+w[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^T)+w[12]+3873151461&4294967295,A=v+(E<<11&4294967295|E>>>21),E=T+(A^v^I)+w[15]+530742520&4294967295,T=A+(E<<16&4294967295|E>>>16),E=I+(T^A^v)+w[2]+3299628645&4294967295,I=T+(E<<23&4294967295|E>>>9),E=v+(T^(I|~A))+w[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~T))+w[7]+1126891415&4294967295,A=v+(E<<10&4294967295|E>>>22),E=T+(v^(A|~I))+w[14]+2878612391&4294967295,T=A+(E<<15&4294967295|E>>>17),E=I+(A^(T|~v))+w[5]+4237533241&4294967295,I=T+(E<<21&4294967295|E>>>11),E=v+(T^(I|~A))+w[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~T))+w[3]+2399980690&4294967295,A=v+(E<<10&4294967295|E>>>22),E=T+(v^(A|~I))+w[10]+4293915773&4294967295,T=A+(E<<15&4294967295|E>>>17),E=I+(A^(T|~v))+w[1]+2240044497&4294967295,I=T+(E<<21&4294967295|E>>>11),E=v+(T^(I|~A))+w[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~T))+w[15]+4264355552&4294967295,A=v+(E<<10&4294967295|E>>>22),E=T+(v^(A|~I))+w[6]+2734768916&4294967295,T=A+(E<<15&4294967295|E>>>17),E=I+(A^(T|~v))+w[13]+1309151649&4294967295,I=T+(E<<21&4294967295|E>>>11),E=v+(T^(I|~A))+w[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~T))+w[11]+3174756917&4294967295,A=v+(E<<10&4294967295|E>>>22),E=T+(v^(A|~I))+w[2]+718787259&4294967295,T=A+(E<<15&4294967295|E>>>17),E=I+(A^(T|~v))+w[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(T+(E<<21&4294967295|E>>>11))&4294967295,b.g[2]=b.g[2]+T&4294967295,b.g[3]=b.g[3]+A&4294967295}r.prototype.u=function(b,v){v===void 0&&(v=b.length);for(var I=v-this.blockSize,w=this.B,T=this.h,A=0;A<v;){if(T==0)for(;A<=I;)i(this,b,A),A+=this.blockSize;if(typeof b=="string"){for(;A<v;)if(w[T++]=b.charCodeAt(A++),T==this.blockSize){i(this,w),T=0;break}}else for(;A<v;)if(w[T++]=b[A++],T==this.blockSize){i(this,w),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;var I=8*this.o;for(v=b.length-8;v<b.length;++v)b[v]=I&255,I/=256;for(this.u(b),b=Array(16),v=I=0;4>v;++v)for(var w=0;32>w;w+=8)b[I++]=this.g[v]>>>w&255;return b};function o(b,v){var I=a;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=v(b)}function s(b,v){this.h=v;for(var I=[],w=!0,T=b.length-1;0<=T;T--){var A=b[T]|0;w&&A==v||(I[T]=A,w=!1)}this.g=I}var a={};function u(b){return-128<=b&&128>b?o(b,function(v){return new s([v|0],0>v?-1:0)}):new s([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return O(l(-b));for(var v=[],I=1,w=0;b>=I;w++)v[w]=b/I|0,I*=4294967296;return new s(v,0)}function h(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return O(h(b.substring(1),v));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),w=p,T=0;T<b.length;T+=8){var A=Math.min(8,b.length-T),E=parseInt(b.substring(T,T+A),v);8>A?(A=l(Math.pow(v,A)),w=w.j(A).add(l(E))):(w=w.j(I),w=w.add(l(E)))}return w}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(x(this))return-O(this).m();for(var b=0,v=1,I=0;I<this.g.length;I++){var w=this.i(I);b+=(0<=w?w:4294967296+w)*v,v*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(C(this))return"0";if(x(this))return"-"+O(this).toString(b);for(var v=l(Math.pow(b,6)),I=this,w="";;){var T=De(I,v).g;I=j(I,T.j(v));var A=((0<I.g.length?I.g[0]:I.h)>>>0).toString(b);if(I=T,C(I))return A+w;for(;6>A.length;)A="0"+A;w=A+w}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function C(b){if(b.h!=0)return!1;for(var v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function x(b){return b.h==-1}n.l=function(b){return b=j(this,b),x(b)?-1:C(b)?0:1};function O(b){for(var v=b.g.length,I=[],w=0;w<v;w++)I[w]=~b.g[w];return new s(I,~b.h).add(m)}n.abs=function(){return x(this)?O(this):this},n.add=function(b){for(var v=Math.max(this.g.length,b.g.length),I=[],w=0,T=0;T<=v;T++){var A=w+(this.i(T)&65535)+(b.i(T)&65535),E=(A>>>16)+(this.i(T)>>>16)+(b.i(T)>>>16);w=E>>>16,A&=65535,E&=65535,I[T]=E<<16|A}return new s(I,I[I.length-1]&-2147483648?-1:0)};function j(b,v){return b.add(O(v))}n.j=function(b){if(C(this)||C(b))return p;if(x(this))return x(b)?O(this).j(O(b)):O(O(this).j(b));if(x(b))return O(this.j(O(b)));if(0>this.l(y)&&0>b.l(y))return l(this.m()*b.m());for(var v=this.g.length+b.g.length,I=[],w=0;w<2*v;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var T=0;T<b.g.length;T++){var A=this.i(w)>>>16,E=this.i(w)&65535,kr=b.i(T)>>>16,wc=b.i(T)&65535;I[2*w+2*T]+=E*wc,ee(I,2*w+2*T),I[2*w+2*T+1]+=A*wc,ee(I,2*w+2*T+1),I[2*w+2*T+1]+=E*kr,ee(I,2*w+2*T+1),I[2*w+2*T+2]+=A*kr,ee(I,2*w+2*T+2)}for(w=0;w<v;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=v;w<2*v;w++)I[w]=0;return new s(I,0)};function ee(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function te(b,v){this.g=b,this.h=v}function De(b,v){if(C(v))throw Error("division by zero");if(C(b))return new te(p,p);if(x(b))return v=De(O(b),v),new te(O(v.g),O(v.h));if(x(v))return v=De(b,O(v)),new te(O(v.g),v.h);if(30<b.g.length){if(x(b)||x(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,w=v;0>=w.l(b);)I=wt(I),w=wt(w);var T=Pe(I,1),A=Pe(w,1);for(w=Pe(w,2),I=Pe(I,2);!C(w);){var E=A.add(w);0>=E.l(b)&&(T=T.add(I),A=E),w=Pe(w,1),I=Pe(I,1)}return v=j(b,T.j(v)),new te(T,v)}for(T=p;0<=b.l(v);){for(I=Math.max(1,Math.floor(b.m()/v.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),A=l(I),E=A.j(v);x(E)||0<E.l(b);)I-=w,A=l(I),E=A.j(v);C(A)&&(A=m),T=T.add(A),b=j(b,E)}return new te(T,b)}n.A=function(b){return De(this,b).h},n.and=function(b){for(var v=Math.max(this.g.length,b.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)&b.i(w);return new s(I,this.h&b.h)},n.or=function(b){for(var v=Math.max(this.g.length,b.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)|b.i(w);return new s(I,this.h|b.h)},n.xor=function(b){for(var v=Math.max(this.g.length,b.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)^b.i(w);return new s(I,this.h^b.h)};function wt(b){for(var v=b.g.length+1,I=[],w=0;w<v;w++)I[w]=b.i(w)<<1|b.i(w-1)>>>31;return new s(I,b.h)}function Pe(b,v){var I=v>>5;v%=32;for(var w=b.g.length-I,T=[],A=0;A<w;A++)T[A]=0<v?b.i(A+I)>>>v|b.i(A+I+1)<<32-v:b.i(A+I);return new s(T,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sw=bN.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,ai=bN.Integer=s}).apply(typeof CN<"u"?CN:typeof self<"u"?self:typeof window<"u"?window:{});var Yp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ci={};var aw,PG,Ba,cw,Cl,Jp,uw,lw,dw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yp=="object"&&Yp];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var D=c[g];if(!(D in f))break e;f=f[D]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,D={next:function(){if(!g&&f<c.length){var P=f++;return{value:d(P,c[P]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),c.apply(d,D)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,D,P){for(var U=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)U[xe-2]=arguments[xe];return d.prototype[D].apply(g,U)}}function x(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function O(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let D=c.length||0,P=g.length||0;c.length=D+P;for(let U=0;U<P;U++)c[D+U]=g[U]}else c.push(g)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function ee(c){return/^[\s\xa0]*$/.test(c)}function te(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function De(c){return De[" "](c),c}De[" "]=function(){};var wt=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function Pe(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function b(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)c[f]=g[f];for(let P=0;P<I.length;P++)f=I[P],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function T(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function A(c){a.setTimeout(()=>{throw c},0)}function E(){var c=mm;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class kr{constructor(){this.h=this.g=null}add(d,f){let g=wc.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var wc=new j(()=>new Hk,c=>c.reset());class Hk{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Cc,bc=!1,mm=new kr,Qb=()=>{let c=a.Promise.resolve(void 0);Cc=()=>{c.then(zk)}};var zk=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(f){A(f)}var d=wc;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}bc=!1};function _i(){this.s=this.s,this.C=this.C}_i.prototype.s=!1,_i.prototype.ma=function(){this.s||(this.s=!0,this.N())},_i.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function At(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var qk=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function Tc(c,d){if(At.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(wt){e:{try{De(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Gk[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Tc.aa.h.call(this)}}C(Tc,At);var Gk={2:"touch",3:"pen",4:"mouse"};Tc.prototype.h=function(){Tc.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Dc="closure_listenable_"+(1e6*Math.random()|0),Wk=0;function Kk(c,d,f,g,D){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=D,this.key=++Wk,this.da=this.fa=!1}function ad(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function cd(c){this.src=c,this.g={},this.h=0}cd.prototype.add=function(c,d,f,g,D){var P=c.toString();c=this.g[P],c||(c=this.g[P]=[],this.h++);var U=vm(c,d,g,D);return-1<U?(d=c[U],f||(d.fa=!1)):(d=new Kk(d,this.src,P,!!g,D),d.fa=f,c.push(d)),d};function ym(c,d){var f=d.type;if(f in c.g){var g=c.g[f],D=Array.prototype.indexOf.call(g,d,void 0),P;(P=0<=D)&&Array.prototype.splice.call(g,D,1),P&&(ad(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function vm(c,d,f,g){for(var D=0;D<c.length;++D){var P=c[D];if(!P.da&&P.listener==d&&P.capture==!!f&&P.ha==g)return D}return-1}var _m="closure_lm_"+(1e6*Math.random()|0),Em={};function Yb(c,d,f,g,D){if(g&&g.once)return Zb(c,d,f,g,D);if(Array.isArray(d)){for(var P=0;P<d.length;P++)Yb(c,d[P],f,g,D);return null}return f=bm(f),c&&c[Dc]?c.K(d,f,l(g)?!!g.capture:!!g,D):Jb(c,d,f,!1,g,D)}function Jb(c,d,f,g,D,P){if(!d)throw Error("Invalid event type");var U=l(D)?!!D.capture:!!D,xe=wm(c);if(xe||(c[_m]=xe=new cd(c)),f=xe.add(d,f,g,U,P),f.proxy)return f;if(g=Qk(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)qk||(D=U),D===void 0&&(D=!1),c.addEventListener(d.toString(),g,D);else if(c.attachEvent)c.attachEvent(e0(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Qk(){function c(f){return d.call(c.src,c.listener,f)}let d=Yk;return c}function Zb(c,d,f,g,D){if(Array.isArray(d)){for(var P=0;P<d.length;P++)Zb(c,d[P],f,g,D);return null}return f=bm(f),c&&c[Dc]?c.L(d,f,l(g)?!!g.capture:!!g,D):Jb(c,d,f,!0,g,D)}function Xb(c,d,f,g,D){if(Array.isArray(d))for(var P=0;P<d.length;P++)Xb(c,d[P],f,g,D);else g=l(g)?!!g.capture:!!g,f=bm(f),c&&c[Dc]?(c=c.i,d=String(d).toString(),d in c.g&&(P=c.g[d],f=vm(P,f,g,D),-1<f&&(ad(P[f]),Array.prototype.splice.call(P,f,1),P.length==0&&(delete c.g[d],c.h--)))):c&&(c=wm(c))&&(d=c.g[d.toString()],c=-1,d&&(c=vm(d,f,g,D)),(f=-1<c?d[c]:null)&&Im(f))}function Im(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Dc])ym(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(e0(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=wm(d))?(ym(f,c),f.h==0&&(f.src=null,d[_m]=null)):ad(c)}}}function e0(c){return c in Em?Em[c]:Em[c]="on"+c}function Yk(c,d){if(c.da)c=!0;else{d=new Tc(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Im(c),c=f.call(g,d)}return c}function wm(c){return c=c[_m],c instanceof cd?c:null}var Cm="__closure_events_fn_"+(1e9*Math.random()>>>0);function bm(c){return typeof c=="function"?c:(c[Cm]||(c[Cm]=function(d){return c.handleEvent(d)}),c[Cm])}function Mt(){_i.call(this),this.i=new cd(this),this.M=this,this.F=null}C(Mt,_i),Mt.prototype[Dc]=!0,Mt.prototype.removeEventListener=function(c,d,f,g){Xb(this,c,d,f,g)};function Bt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new At(d,c);else if(d instanceof At)d.target=d.target||c;else{var D=d;d=new At(g,c),w(d,D)}if(D=!0,f)for(var P=f.length-1;0<=P;P--){var U=d.g=f[P];D=ud(U,g,!0,d)&&D}if(U=d.g=c,D=ud(U,g,!0,d)&&D,D=ud(U,g,!1,d)&&D,f)for(P=0;P<f.length;P++)U=d.g=f[P],D=ud(U,g,!1,d)&&D}Mt.prototype.N=function(){if(Mt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)ad(f[g]);delete c.g[d],c.h--}}this.F=null},Mt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},Mt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function ud(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,P=0;P<d.length;++P){var U=d[P];if(U&&!U.da&&U.capture==f){var xe=U.listener,Ct=U.ha||U.src;U.fa&&ym(c.i,U),D=xe.call(Ct,g)!==!1&&D}}return D&&!g.defaultPrevented}function t0(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function n0(c){c.g=t0(()=>{c.g=null,c.i&&(c.i=!1,n0(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class Jk extends _i{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:n0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sc(c){_i.call(this),this.h=c,this.g={}}C(Sc,_i);var r0=[];function i0(c){Pe(c.g,function(d,f){this.g.hasOwnProperty(f)&&Im(d)},c),c.g={}}Sc.prototype.N=function(){Sc.aa.N.call(this),i0(this)},Sc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tm=a.JSON.stringify,Zk=a.JSON.parse,Xk=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Dm(){}Dm.prototype.h=null;function o0(c){return c.h||(c.h=c.i())}function s0(){}var Ac={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Sm(){At.call(this,"d")}C(Sm,At);function Am(){At.call(this,"c")}C(Am,At);var Co={},a0=null;function ld(){return a0=a0||new Mt}Co.La="serverreachability";function c0(c){At.call(this,Co.La,c)}C(c0,At);function Mc(c){let d=ld();Bt(d,new c0(d))}Co.STAT_EVENT="statevent";function u0(c,d){At.call(this,Co.STAT_EVENT,c),this.stat=d}C(u0,At);function $t(c){let d=ld();Bt(d,new u0(d,c))}Co.Ma="timingevent";function l0(c,d){At.call(this,Co.Ma,c),this.size=d}C(l0,At);function Rc(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Pc(){this.g=!0}Pc.prototype.xa=function(){this.g=!1};function eF(c,d,f,g,D,P){c.info(function(){if(c.g)if(P)for(var U="",xe=P.split("&"),Ct=0;Ct<xe.length;Ct++){var we=xe[Ct].split("=");if(1<we.length){var Rt=we[0];we=we[1];var Pt=Rt.split("_");U=2<=Pt.length&&Pt[1]=="type"?U+(Rt+"="+we+"&"):U+(Rt+"=redacted&")}}else U=null;else U=P;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+f+`
`+U})}function tF(c,d,f,g,D,P,U){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+f+`
`+P+" "+U})}function Ms(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+rF(c,f)+(g?" "+g:"")})}function nF(c,d){c.info(function(){return"TIMEOUT: "+d})}Pc.prototype.info=function(){};function rF(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var P=D[0];if(P!="noop"&&P!="stop"&&P!="close")for(var U=1;U<D.length;U++)D[U]=""}}}}return Tm(f)}catch{return d}}var dd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},d0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mm;function hd(){}C(hd,Dm),hd.prototype.g=function(){return new XMLHttpRequest},hd.prototype.i=function(){return{}},Mm=new hd;function Ei(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Sc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new h0}function h0(){this.i=null,this.g="",this.h=!1}var f0={},Rm={};function Pm(c,d,f){c.L=1,c.v=md(Fr(d)),c.m=f,c.P=!0,p0(c,null)}function p0(c,d){c.F=Date.now(),fd(c),c.A=Fr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),A0(f.i,"t",g),c.C=0,f=c.j.J,c.h=new h0,c.g=G0(c.j,f?d:null,!c.m),0<c.O&&(c.M=new Jk(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(r0[0]=D.toString()),D=r0);for(var P=0;P<D.length;P++){var U=Yb(f,D[P],g||d.handleEvent,!1,d.h||d);if(!U)break;d.g[U.key]=U}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Mc(),eF(c.i,c.u,c.A,c.l,c.R,c.m)}Ei.prototype.ca=function(c){c=c.target;let d=this.M;d&&Lr(c)==3?d.j():this.Y(c)},Ei.prototype.Y=function(c){try{if(c==this.g)e:{let Pt=Lr(this.g);var d=this.g.Ba();let Os=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||k0(this.g)))){this.J||Pt!=4||d==7||(d==8||0>=Os?Mc(3):Mc(2)),Om(this);var f=this.g.Z();this.X=f;t:if(g0(this)){var g=k0(this.g);c="";var D=g.length,P=Lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bo(this),Oc(this);var U="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(P&&d==D-1)});g.length=0,this.h.g+=c,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=f==200,tF(this.i,this.u,this.A,this.l,this.R,Pt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,Ct=this.g;if((xe=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(xe)){var we=xe;break t}}we=null}if(f=we)Ms(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nm(this,f);else{this.o=!1,this.s=3,$t(12),bo(this),Oc(this);break e}}if(this.P){f=!0;let zn;for(;!this.J&&this.C<U.length;)if(zn=iF(this,U),zn==Rm){Pt==4&&(this.s=4,$t(14),f=!1),Ms(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==f0){this.s=4,$t(15),Ms(this.i,this.l,U,"[Invalid Chunk]"),f=!1;break}else Ms(this.i,this.l,zn,null),Nm(this,zn);if(g0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||U.length!=0||this.h.h||(this.s=1,$t(16),f=!1),this.o=this.o&&f,!f)Ms(this.i,this.l,U,"[Invalid Chunked Response]"),bo(this),Oc(this);else if(0<U.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Um(Rt),Rt.M=!0,$t(11))}}else Ms(this.i,this.l,U,null),Nm(this,U);Pt==4&&bo(this),this.o&&!this.J&&(Pt==4?$0(this.j,this):(this.o=!1,fd(this)))}else IF(this.g),f==400&&0<U.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),bo(this),Oc(this)}}}catch{}finally{}};function g0(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function iF(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Rm:(f=Number(d.substring(f,g)),isNaN(f)?f0:(g+=1,g+f>d.length?Rm:(d=d.slice(g,g+f),c.C=g+f,d)))}Ei.prototype.cancel=function(){this.J=!0,bo(this)};function fd(c){c.S=Date.now()+c.I,m0(c,c.I)}function m0(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Rc(m(c.ba,c),d)}function Om(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ei.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(nF(this.i,this.A),this.L!=2&&(Mc(),$t(17)),bo(this),this.s=2,Oc(this)):m0(this,this.S-c)};function Oc(c){c.j.G==0||c.J||$0(c.j,c)}function bo(c){Om(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,i0(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Nm(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||xm(f.h,c))){if(!c.K&&xm(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Id(f),_d(f);else break e;Vm(f),$t(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=Rc(m(f.Za,f),6e3));if(1>=_0(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Do(f,11)}else if((c.K||f.g==c)&&Id(f),!ee(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let we=D[d];if(f.T=we[0],we=we[1],f.G==2)if(we[0]=="c"){f.K=we[1],f.ia=we[2];let Rt=we[3];Rt!=null&&(f.la=Rt,f.j.info("VER="+f.la));let Pt=we[4];Pt!=null&&(f.Aa=Pt,f.j.info("SVER="+f.Aa));let Os=we[5];Os!=null&&typeof Os=="number"&&0<Os&&(g=1.5*Os,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let zn=c.g;if(zn){let Cd=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cd){var P=g.h;P.g||Cd.indexOf("spdy")==-1&&Cd.indexOf("quic")==-1&&Cd.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(km(P,P.h),P.h=null))}if(g.D){let jm=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;jm&&(g.ya=jm,Fe(g.I,g.D,jm))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var U=c;if(g.qa=q0(g,g.J?g.ia:null,g.W),U.K){E0(g.h,U);var xe=U,Ct=g.L;Ct&&(xe.I=Ct),xe.B&&(Om(xe),fd(xe)),g.g=U}else j0(g);0<f.i.length&&Ed(f)}else we[0]!="stop"&&we[0]!="close"||Do(f,7);else f.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?Do(f,7):Lm(f):we[0]!="noop"&&f.l&&f.l.ta(we),f.v=0)}}Mc(4)}catch{}}var oF=class{constructor(c,d){this.g=c,this.map=d}};function y0(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function v0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function _0(c){return c.h?1:c.g?c.g.size:0}function xm(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function km(c,d){c.g?c.g.add(d):c.h=d}function E0(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}y0.prototype.cancel=function(){if(this.i=I0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function I0(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return x(c.i)}function sF(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function aF(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function w0(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=aF(c),g=sF(c),D=g.length,P=0;P<D;P++)d.call(void 0,g[P],f&&f[P],c)}var C0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cF(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),D=null;if(0<=g){var P=c[f].substring(0,g);D=c[f].substring(g+1)}else P=c[f];d(P,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function To(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof To){this.h=c.h,pd(this,c.j),this.o=c.o,this.g=c.g,gd(this,c.s),this.l=c.l;var d=c.i,f=new kc;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),b0(this,f),this.m=c.m}else c&&(d=String(c).match(C0))?(this.h=!1,pd(this,d[1]||"",!0),this.o=Nc(d[2]||""),this.g=Nc(d[3]||"",!0),gd(this,d[4]),this.l=Nc(d[5]||"",!0),b0(this,d[6]||"",!0),this.m=Nc(d[7]||"")):(this.h=!1,this.i=new kc(null,this.h))}To.prototype.toString=function(){var c=[],d=this.j;d&&c.push(xc(d,T0,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(xc(d,T0,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(xc(f,f.charAt(0)=="/"?dF:lF,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",xc(f,fF)),c.join("")};function Fr(c){return new To(c)}function pd(c,d,f){c.j=f?Nc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function gd(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function b0(c,d,f){d instanceof kc?(c.i=d,pF(c.i,c.h)):(f||(d=xc(d,hF)),c.i=new kc(d,c.h))}function Fe(c,d,f){c.i.set(d,f)}function md(c){return Fe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Nc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function xc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,uF),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function uF(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var T0=/[#\/\?@]/g,lF=/[#\?:]/g,dF=/[#\?]/g,hF=/[#\?@]/g,fF=/#/g;function kc(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Ii(c){c.g||(c.g=new Map,c.h=0,c.i&&cF(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=kc.prototype,n.add=function(c,d){Ii(this),this.i=null,c=Rs(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function D0(c,d){Ii(c),d=Rs(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function S0(c,d){return Ii(c),d=Rs(c,d),c.g.has(d)}n.forEach=function(c,d){Ii(this),this.g.forEach(function(f,g){f.forEach(function(D){c.call(d,D,g,this)},this)},this)},n.na=function(){Ii(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let D=c[g];for(let P=0;P<D.length;P++)f.push(d[g])}return f},n.V=function(c){Ii(this);let d=[];if(typeof c=="string")S0(this,c)&&(d=d.concat(this.g.get(Rs(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Ii(this),this.i=null,c=Rs(this,c),S0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function A0(c,d,f){D0(c,d),0<f.length&&(c.i=null,c.g.set(Rs(c,d),x(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let P=encodeURIComponent(String(g)),U=this.V(g);for(g=0;g<U.length;g++){var D=P;U[g]!==""&&(D+="="+encodeURIComponent(String(U[g]))),c.push(D)}}return this.i=c.join("&")};function Rs(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function pF(c,d){d&&!c.j&&(Ii(c),c.i=null,c.g.forEach(function(f,g){var D=g.toLowerCase();g!=D&&(D0(this,g),A0(this,D,f))},c)),c.j=d}function gF(c,d){let f=new Pc;if(a.Image){let g=new Image;g.onload=y(wi,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(wi,f,"TestLoadImage: error",!1,d,g),g.onabort=y(wi,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(wi,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function mF(c,d){let f=new Pc,g=new AbortController,D=setTimeout(()=>{g.abort(),wi(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(P=>{clearTimeout(D),P.ok?wi(f,"TestPingServer: ok",!0,d):wi(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),wi(f,"TestPingServer: error",!1,d)})}function wi(c,d,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function yF(){this.g=new Xk}function vF(c,d,f){let g=f||"";try{w0(c,function(D,P){let U=D;l(D)&&(U=Tm(D)),d.push(g+P+"="+encodeURIComponent(U))})}catch(D){throw d.push(g+"type="+encodeURIComponent("_badmap")),D}}function Fc(c){this.l=c.Ub||null,this.j=c.eb||!1}C(Fc,Dm),Fc.prototype.g=function(){return new yd(this.l,this.j)},Fc.prototype.i=(function(c){return function(){return c}})({});function yd(c,d){Mt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(yd,Mt),n=yd.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Vc(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Lc(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Vc(this)),this.g&&(this.readyState=3,Vc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;M0(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function M0(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Lc(this):Vc(this),this.readyState==3&&M0(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Lc(this))},n.Qa=function(c){this.g&&(this.response=c,Lc(this))},n.ga=function(){this.g&&Lc(this)};function Lc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Vc(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Vc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(yd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function R0(c){let d="";return Pe(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Fm(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=R0(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Fe(c,d,f))}function He(c){Mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(He,Mt);var _F=/^https?$/i,EF=["POST","PUT"];n=He.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mm.g(),this.v=this.o?o0(this.o):o0(Mm),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(P){P0(this,P);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let P of g.keys())f.set(P,g.get(P));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(P=>P.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(EF,d,void 0))||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[P,U]of f)this.g.setRequestHeader(P,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{x0(this),this.u=!0,this.g.send(c),this.u=!1}catch(P){P0(this,P)}};function P0(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,O0(c),vd(c)}function O0(c){c.A||(c.A=!0,Bt(c,"complete"),Bt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Bt(this,"complete"),Bt(this,"abort"),vd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vd(this,!0)),He.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?N0(this):this.bb())},n.bb=function(){N0(this)};function N0(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Lr(c)!=4||c.Z()!=2)){if(c.u&&Lr(c)==4)t0(c.Ea,0,c);else if(Bt(c,"readystatechange"),Lr(c)==4){c.h=!1;try{let U=c.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=U===0){var D=String(c.D).match(C0)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),g=!_F.test(D?D.toLowerCase():"")}f=g}if(f)Bt(c,"complete"),Bt(c,"success");else{c.m=6;try{var P=2<Lr(c)?c.g.statusText:""}catch{P=""}c.l=P+" ["+c.Z()+"]",O0(c)}}finally{vd(c)}}}}function vd(c,d){if(c.g){x0(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Bt(c,"ready");try{f.onreadystatechange=g}catch{}}}function x0(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Lr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Lr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Zk(d)}};function k0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function IF(c){let d={};c=(c.g&&2<=Lr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(ee(c[g]))continue;var f=T(c[g]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let P=d[D]||[];d[D]=P,P.push(f)}b(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Uc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function F0(c){this.Aa=0,this.i=[],this.j=new Pc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Uc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Uc("baseRetryDelayMs",5e3,c),this.cb=Uc("retryDelaySeedMs",1e4,c),this.Wa=Uc("forwardChannelMaxRetries",2,c),this.wa=Uc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new y0(c&&c.concurrentRequestLimit),this.Da=new yF,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=F0.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){$t(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=q0(this,null,this.W),Ed(this)};function Lm(c){if(L0(c),c.G==3){var d=c.U++,f=Fr(c.I);if(Fe(f,"SID",c.K),Fe(f,"RID",d),Fe(f,"TYPE","terminate"),jc(c,f),d=new Ei(c,c.j,d),d.L=2,d.v=md(Fr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=G0(d.j,null),d.g.ea(d.v)),d.F=Date.now(),fd(d)}z0(c)}function _d(c){c.g&&(Um(c),c.g.cancel(),c.g=null)}function L0(c){_d(c),c.u&&(a.clearTimeout(c.u),c.u=null),Id(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Ed(c){if(!v0(c.h)&&!c.s){c.s=!0;var d=c.Ga;Cc||Qb(),bc||(Cc(),bc=!0),mm.add(d,c),c.B=0}}function wF(c,d){return _0(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Rc(m(c.Ga,c,d),H0(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let D=new Ei(this,this.j,c),P=this.o;if(this.S&&(P?(P=v(P),w(P,this.S)):P=this.S),this.m!==null||this.O||(D.H=P,P=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=U0(this,D,d),f=Fr(this.I),Fe(f,"RID",c),Fe(f,"CVER",22),this.D&&Fe(f,"X-HTTP-Session-Id",this.D),jc(this,f),P&&(this.O?d="headers="+encodeURIComponent(String(R0(P)))+"&"+d:this.m&&Fm(f,this.m,P)),km(this.h,D),this.Ua&&Fe(f,"TYPE","init"),this.P?(Fe(f,"$req",d),Fe(f,"SID","null"),D.T=!0,Pm(D,f,null)):Pm(D,f,d),this.G=2}}else this.G==3&&(c?V0(this,c):this.i.length==0||v0(this.h)||V0(this))};function V0(c,d){var f;d?f=d.l:f=c.U++;let g=Fr(c.I);Fe(g,"SID",c.K),Fe(g,"RID",f),Fe(g,"AID",c.T),jc(c,g),c.m&&c.o&&Fm(g,c.m,c.o),f=new Ei(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=U0(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),km(c.h,f),Pm(f,g,d)}function jc(c,d){c.H&&Pe(c.H,function(f,g){Fe(d,g,f)}),c.l&&w0({},function(f,g){Fe(d,g,f)})}function U0(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var D=c.i;let P=-1;for(;;){let U=["count="+f];P==-1?0<f?(P=D[0].g,U.push("ofs="+P)):P=0:U.push("ofs="+P);let xe=!0;for(let Ct=0;Ct<f;Ct++){let we=D[Ct].g,Rt=D[Ct].map;if(we-=P,0>we)P=Math.max(0,D[Ct].g-100),xe=!1;else try{vF(Rt,U,"req"+we+"_")}catch{g&&g(Rt)}}if(xe){g=U.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function j0(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Cc||Qb(),bc||(Cc(),bc=!0),mm.add(d,c),c.v=0}}function Vm(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Rc(m(c.Fa,c),H0(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,B0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Rc(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),_d(this),B0(this))};function Um(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function B0(c){c.g=new Ei(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Fr(c.qa);Fe(d,"RID","rpc"),Fe(d,"SID",c.K),Fe(d,"AID",c.T),Fe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Fe(d,"TO",c.ja),Fe(d,"TYPE","xmlhttp"),jc(c,d),c.m&&c.o&&Fm(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=md(Fr(d)),f.m=null,f.P=!0,p0(f,c)}n.Za=function(){this.C!=null&&(this.C=null,_d(this),Vm(this),$t(19))};function Id(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function $0(c,d){var f=null;if(c.g==d){Id(c),Um(c),c.g=null;var g=2}else if(xm(c.h,d))f=d.D,E0(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=c.B;g=ld(),Bt(g,new l0(g,f)),Ed(c)}else j0(c);else if(D=d.s,D==3||D==0&&0<d.X||!(g==1&&wF(c,d)||g==2&&Vm(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),D){case 1:Do(c,5);break;case 4:Do(c,10);break;case 3:Do(c,6);break;default:Do(c,2)}}}function H0(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Do(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let D=!g;g=new To(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||pd(g,"https"),md(g),D?gF(g.toString(),f):mF(g.toString(),f)}else $t(2);c.G=0,c.l&&c.l.sa(d),z0(c),L0(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function z0(c){if(c.G=0,c.ka=[],c.l){let d=I0(c.h);(d.length!=0||c.i.length!=0)&&(O(c.ka,d),O(c.ka,c.i),c.h.i.length=0,x(c.i),c.i.length=0),c.l.ra()}}function q0(c,d,f){var g=f instanceof To?Fr(f):new To(f);if(g.g!="")d&&(g.g=d+"."+g.g),gd(g,g.s);else{var D=a.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var P=new To(null);g&&pd(P,g),d&&(P.g=d),D&&gd(P,D),f&&(P.l=f),g=P}return f=c.D,d=c.ya,f&&d&&Fe(g,f,d),Fe(g,"VER",c.la),jc(c,g),g}function G0(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new He(new Fc({eb:f})):new He(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function W0(){}n=W0.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function wd(){}wd.prototype.g=function(c,d){return new ln(c,d)};function ln(c,d){Mt.call(this),this.g=new F0(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!ee(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!ee(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ps(this)}C(ln,Mt),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){Lm(this.g)},ln.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Tm(c),c=f);d.i.push(new oF(d.Ya++,c)),d.G==3&&Ed(d)},ln.prototype.N=function(){this.g.l=null,delete this.j,Lm(this.g),delete this.g,ln.aa.N.call(this)};function K0(c){Sm.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(K0,Sm);function Q0(){Am.call(this),this.status=1}C(Q0,Am);function Ps(c){this.g=c}C(Ps,W0),Ps.prototype.ua=function(){Bt(this.g,"a")},Ps.prototype.ta=function(c){Bt(this.g,new K0(c))},Ps.prototype.sa=function(c){Bt(this.g,new Q0)},Ps.prototype.ra=function(){Bt(this.g,"b")},wd.prototype.createWebChannel=wd.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,dw=ci.createWebChannelTransport=function(){return new wd},lw=ci.getStatEventTarget=function(){return ld()},uw=ci.Event=Co,Jp=ci.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dd.NO_ERROR=0,dd.TIMEOUT=8,dd.HTTP_ERROR=6,Cl=ci.ErrorCode=dd,d0.COMPLETE="complete",cw=ci.EventType=d0,s0.EventType=Ac,Ac.OPEN="a",Ac.CLOSE="b",Ac.ERROR="c",Ac.MESSAGE="d",Mt.prototype.listen=Mt.prototype.K,Ba=ci.WebChannel=s0,PG=ci.FetchXmlHttpFactory=Fc,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,aw=ci.XhrIo=He}).apply(typeof Yp<"u"?Yp:typeof self<"u"?self:typeof window<"u"?window:{});var TN="@firebase/firestore",DN="4.8.0";var Et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");var lc="11.10.0";var vs=new br("@firebase/firestore");function $a(){return vs.logLevel}function z(n,...e){if(vs.logLevel<=me.DEBUG){let t=e.map(tb);vs.debug(`Firestore (${lc}): ${n}`,...t)}}function di(n,...e){if(vs.logLevel<=me.ERROR){let t=e.map(tb);vs.error(`Firestore (${lc}): ${n}`,...t)}}function go(n,...e){if(vs.logLevel<=me.WARN){let t=e.map(tb);vs.warn(`Firestore (${lc}): ${n}`,...t)}}function tb(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function X(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,_x(n,r,t)}function _x(n,e,t){let r=`FIRESTORE (${lc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw di(r),new Error(r)}function Re(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||_x(e,i,r)}function oe(n,e){return n}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},H=class extends Tn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ui=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ig=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},mw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Et.UNAUTHENTICATED))}shutdown(){}},yw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},vw=class{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Re(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ui,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ui)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string",31837,{l:r}),new ig(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string",2055,{h:e}),new Et(e)}},_w=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Ew=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new _w(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},og=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Iw=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Re(this.o===void 0,3512);let r=o=>{o.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,z("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new og(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Re(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new og(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function OG(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function Ex(){return new TextEncoder}var Ml=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=OG(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ge(n,e){return n<e?-1:n>e?1:0}function ww(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ge(r,i);{let o=Ex(),s=NG(o.encode(SN(n,t)),o.encode(SN(e,t)));return s!==0?s:ge(r,i)}}t+=r>65535?2:1}return ge(n.length,e.length)}function SN(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function NG(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ge(n[t],e[t]);return ge(n.length,e.length)}function Ya(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var AN="__name__",sg=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&X(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&X(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ge(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):ww(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ai.fromString(e.substring(4,e.length-2))}},Be=class n extends sg{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new H(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},xG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Sn=class n extends sg{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return xG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===AN}static keyField(){return new n([AN])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new H(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new H(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Q=class n{constructor(e){this.path=e}static fromPath(e){return new n(Be.fromString(e))}static fromName(e){return new n(Be.fromString(e).popFirst(5))}static empty(){return new n(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Be(e.slice()))}};function Ix(n,e,t){if(!t)throw new H(k.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kG(n,e,t,r){if(e===!0&&r===!0)throw new H(k.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function MN(n){if(!Q.isDocumentKey(n))throw new H(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RN(n){if(Q.isDocumentKey(n))throw new H(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Lg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":X(12329,{type:typeof n})}function uo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new H(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Lg(n);throw new H(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ct(n,e){let t={typeString:n};return e&&(t.value=e),t}function Bl(n,e){if(!wx(n))throw new H(k.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new H(k.INVALID_ARGUMENT,t);return!0}var PN=-62135596800,ON=1e6,ut=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ON);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new H(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new H(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<PN)throw new H(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ON}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Bl(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-PN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:ct("string",ut._jsonSchemaVersion),seconds:ct("number"),nanoseconds:ct("number")};var ae=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new ut(0,0))}static max(){return new n(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Rl=-1,Cw=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Cw.UNKNOWN_ID=-1;function FG(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new ut(t+1,0):new ut(t,r));return new _s(i,Q.empty(),e)}function LG(n){return new _s(n.readTime,n.key,Rl)}var _s=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ae.min(),Q.empty(),Rl)}static max(){return new n(ae.max(),Q.empty(),Rl)}};function VG(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Q.comparator(n.documentKey,e.documentKey),t!==0?t:ge(n.largestBatchId,e.largestBatchId))}var UG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",bw=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function dc(n){return _(this,null,function*(){if(n.code!==k.FAILED_PRECONDITION||n.message!==UG)throw n;z("LocalStore","Unexpectedly lost primary lease")})}var L=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function jG(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hc(n){return n.name==="IndexedDbTransactionError"}var nb=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),rb=-1;function Vg(n){return n==null}function Pl(n){return n===0&&1/n==-1/0}function BG(n){return typeof n=="number"&&Number.isInteger(n)&&!Pl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Cx="";function $G(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=NN(e)),e=HG(n.get(t),e);return NN(e)}function HG(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case Cx:t+="";break;default:t+=o}}return t}function NN(n){return n+Cx+""}var zG="remoteDocuments",bx="owner";var Tx="mutationQueues";var Dx="mutations";var Sx="documentMutations",qG="remoteDocumentsV14";var Ax="remoteDocumentGlobal";var Mx="targets";var Rx="targetDocuments";var Px="targetGlobal",Ox="collectionParents";var Nx="clientMetadata";var xx="bundles";var kx="namedQueries";var GG="indexConfiguration";var WG="indexState";var KG="indexEntries";var Fx="documentOverlays";var QG="globals";var YG=[Tx,Dx,Sx,zG,Mx,bx,Px,Rx,Nx,Ax,Ox,xx,kx],qde=[...YG,Fx],JG=[Tx,Dx,Sx,qG,Mx,bx,Px,Rx,Nx,Ax,Ox,xx,kx,Fx],ZG=JG,XG=[...ZG,GG,WG,KG];var Gde=[...XG,QG];function xN(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Eo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Lx(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ke=class n{constructor(e,t){this.comparator=e,this.root=t||Sr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ga(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ga(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ga(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ga(this.root,e,this.comparator,!0)}},Ga=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Sr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}};Sr.EMPTY=null,Sr.RED=!0,Sr.BLACK=!1;Sr.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Sr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var It=class n{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ag(this.data.getIterator())}getIteratorFrom(e){return new ag(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},ag=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var $n=class n{constructor(e){this.fields=e,e.sort(Sn.comparator)}static empty(){return new n([])}unionWith(e){let t=new It(Sn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ya(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var cg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var jt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new cg("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};jt.EMPTY_BYTE_STRING=new jt("");var e5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hi(n){if(Re(!!n,39018),typeof n=="string"){let e=0,t=e5.exec(n);if(Re(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(n.seconds),nanos:je(n.nanos)}}function je(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function fi(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}var Vx="server_timestamp",Ux="__type__",jx="__previous_value__",Bx="__local_write_time__";function ib(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ux])===null||t===void 0?void 0:t.stringValue)===Vx}function Ug(n){let e=n.mapValue.fields[jx];return ib(e)?Ug(e):e}function Ol(n){let e=hi(n.mapValue.fields[Bx].timestampValue);return new ut(e.seconds,e.nanos)}var Tw=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},ug="(default)",lg=class n{constructor(e,t){this.projectId=e,this.database=t||ug}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===ug}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ob="__type__",$x="__max__",Zp={mapValue:{fields:{__type__:{stringValue:$x}}}},sb="__vector__",Ja="value";function mo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ib(n)?4:zx(n)?9007199254740991:Hx(n)?10:11:X(28295,{value:n})}function Rr(n,e){if(n===e)return!0;let t=mo(n);if(t!==mo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ol(n).isEqual(Ol(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=hi(i.timestampValue),a=hi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return fi(i.bytesValue).isEqual(fi(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return je(i.geoPointValue.latitude)===je(o.geoPointValue.latitude)&&je(i.geoPointValue.longitude)===je(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return je(i.integerValue)===je(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=je(i.doubleValue),a=je(o.doubleValue);return s===a?Pl(s)===Pl(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Ya(n.arrayValue.values||[],e.arrayValue.values||[],Rr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(xN(s)!==xN(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Rr(s[u],a[u])))return!1;return!0})(n,e);default:return X(52216,{left:n})}}function Nl(n,e){return(n.values||[]).find(t=>Rr(t,e))!==void 0}function Za(n,e){if(n===e)return 0;let t=mo(n),r=mo(e);if(t!==r)return ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ge(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=je(o.integerValue||o.doubleValue),u=je(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(n,e);case 3:return kN(n.timestampValue,e.timestampValue);case 4:return kN(Ol(n),Ol(e));case 5:return ww(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=fi(o),u=fi(s);return a.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ge(a[l],u[l]);if(h!==0)return h}return ge(a.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ge(je(o.latitude),je(s.latitude));return a!==0?a:ge(je(o.longitude),je(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return FN(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[Ja])===null||a===void 0?void 0:a.arrayValue,C=(u=m[Ja])===null||u===void 0?void 0:u.arrayValue,x=ge(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:FN(y,C)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Zp.mapValue&&s===Zp.mapValue)return 0;if(o===Zp.mapValue)return 1;if(s===Zp.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ww(u[p],h[p]);if(m!==0)return m;let y=Za(a[u[p]],l[h[p]]);if(y!==0)return y}return ge(u.length,h.length)})(n.mapValue,e.mapValue);default:throw X(23264,{le:t})}}function kN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ge(n,e);let t=hi(n),r=hi(e),i=ge(t.seconds,r.seconds);return i!==0?i:ge(t.nanos,r.nanos)}function FN(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Za(t[i],r[i]);if(o)return o}return ge(t.length,r.length)}function Xa(n){return Dw(n)}function Dw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=hi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return fi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Q.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Dw(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Dw(t.fields[s])}`;return i+"}"})(n.mapValue):X(61005,{value:n})}function tg(n){switch(mo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Ug(n);return e?16+tg(e):16;case 5:return 2*n.stringValue.length;case 6:return fi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+tg(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Eo(r.fields,(o,s)=>{i+=o.length+tg(s)}),i})(n.mapValue);default:throw X(13486,{value:n})}}function LN(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Sw(n){return!!n&&"integerValue"in n}function ab(n){return!!n&&"arrayValue"in n}function VN(n){return!!n&&"nullValue"in n}function UN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ng(n){return!!n&&"mapValue"in n}function Hx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ob])===null||t===void 0?void 0:t.stringValue)===sb}function Tl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Eo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Tl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Tl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function zx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===$x}var Kde={mapValue:{fields:{[ob]:{stringValue:sb},[Ja]:{arrayValue:{}}}}};var Dn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ng(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tl(t)}setAll(e){let t=Sn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Tl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());ng(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ng(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Eo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Tl(this.value))}};function qx(n){let e=[];return Eo(n.fields,(t,r)=>{let i=new Sn([t]);if(ng(r)){let o=qx(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new $n(e)}var ur=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ae.min(),ae.min(),ae.min(),Dn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ae.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ae.min(),ae.min(),Dn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ae.min(),ae.min(),Dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ec=class{constructor(e,t){this.position=e,this.inclusive=t}};function jN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Q.comparator(Q.fromName(s.referenceValue),t.key):r=Za(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function BN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Rr(n.position[t],e.position[t]))return!1;return!0}var tc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function t5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var dg=class{},at=class n extends dg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Mw(e,t,r):t==="array-contains"?new Ow(e,r):t==="in"?new Nw(e,r):t==="not-in"?new xw(e,r):t==="array-contains-any"?new kw(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Rw(e,r):new Pw(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Za(t,this.value)):t!==null&&mo(this.value)===mo(t)&&this.matchesComparison(Za(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},lr=class n extends dg{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return Gx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function Gx(n){return n.op==="and"}function Wx(n){return n5(n)&&Gx(n)}function n5(n){for(let e of n.filters)if(e instanceof lr)return!1;return!0}function Aw(n){if(n instanceof at)return n.field.canonicalString()+n.op.toString()+Xa(n.value);if(Wx(n))return n.filters.map(e=>Aw(e)).join(",");{let e=n.filters.map(t=>Aw(t)).join(",");return`${n.op}(${e})`}}function Kx(n,e){return n instanceof at?(function(r,i){return i instanceof at&&r.op===i.op&&r.field.isEqual(i.field)&&Rr(r.value,i.value)})(n,e):n instanceof lr?(function(r,i){return i instanceof lr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Kx(s,i.filters[a]),!0):!1})(n,e):void X(19439)}function Qx(n){return n instanceof at?(function(t){return`${t.field.canonicalString()} ${t.op} ${Xa(t.value)}`})(n):n instanceof lr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Qx).join(" ,")+"}"})(n):"Filter"}var Mw=class extends at{constructor(e,t,r){super(e,t,r),this.key=Q.fromName(r.referenceValue)}matches(e){let t=Q.comparator(e.key,this.key);return this.matchesComparison(t)}},Rw=class extends at{constructor(e,t){super(e,"in",t),this.keys=Yx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Pw=class extends at{constructor(e,t){super(e,"not-in",t),this.keys=Yx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Yx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Q.fromName(r.referenceValue))}var Ow=class extends at{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return ab(t)&&Nl(t.arrayValue,this.value)}},Nw=class extends at{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Nl(this.value.arrayValue,t)}},xw=class extends at{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Nl(this.value.arrayValue,t)}},kw=class extends at{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!ab(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Nl(this.value.arrayValue,r))}};var Fw=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function $N(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Fw(n,e,t,r,i,o,s)}function cb(n){let e=oe(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Aw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Vg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Xa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Xa(r)).join(",")),e.Pe=t}return e.Pe}function ub(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!t5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Kx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!BN(n.startAt,e.startAt)&&BN(n.endAt,e.endAt)}function Lw(n){return Q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Es=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function r5(n,e,t,r,i,o,s,a){return new Es(n,e,t,r,i,o,s,a)}function lb(n){return new Es(n)}function HN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Jx(n){return n.collectionGroup!==null}function Dl(n){let e=oe(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new It(Sn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new tc(o,r))}),t.has(Sn.keyField().canonicalString())||e.Te.push(new tc(Sn.keyField(),r))}return e.Te}function Ar(n){let e=oe(n);return e.Ie||(e.Ie=i5(e,Dl(n))),e.Ie}function i5(n,e){if(n.limitType==="F")return $N(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new tc(i.field,o)});let t=n.endAt?new ec(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ec(n.startAt.position,n.startAt.inclusive):null;return $N(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Vw(n,e){let t=n.filters.concat([e]);return new Es(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Uw(n,e,t){return new Es(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jg(n,e){return ub(Ar(n),Ar(e))&&n.limitType===e.limitType}function Zx(n){return`${cb(Ar(n))}|lt:${n.limitType}`}function Ha(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Qx(i)).join(", ")}]`),Vg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Xa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Xa(i)).join(",")),`Target(${r})`})(Ar(n))}; limitType=${n.limitType})`}function Bg(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Dl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=jN(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Dl(r),i)||r.endAt&&!(function(s,a,u){let l=jN(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Dl(r),i))})(n,e)}function o5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Xx(n){return(e,t)=>{let r=!1;for(let i of Dl(n)){let o=s5(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function s5(n,e,t){let r=n.field.isKeyField()?Q.comparator(e.key,t.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Za(u,l):X(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:n.dir})}}var pi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Eo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Lx(this.inner)}size(){return this.innerSize}};var a5=new Ke(Q.comparator);function gi(){return a5}var e1=new Ke(Q.comparator);function bl(...n){let e=e1;for(let t of n)e=e.insert(t.key,t);return e}function t1(n){let e=e1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ps(){return Sl()}function n1(){return Sl()}function Sl(){return new pi(n=>n.toString(),(n,e)=>n.isEqual(e))}var c5=new Ke(Q.comparator),u5=new It(Q.comparator);function ve(...n){let e=u5;for(let t of n)e=e.add(t);return e}var l5=new It(ge);function d5(){return l5}function db(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pl(e)?"-0":e}}function r1(n){return{integerValue:""+n}}function h5(n,e){return BG(e)?r1(e):db(n,e)}var nc=class{constructor(){this._=void 0}};function f5(n,e,t){return n instanceof rc?(function(i,o){let s={fields:{[Ux]:{stringValue:Vx},[Bx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ib(o)&&(o=Ug(o)),o&&(s.fields[jx]=o),{mapValue:s}})(t,e):n instanceof Is?o1(n,e):n instanceof ws?s1(n,e):(function(i,o){let s=i1(i,o),a=zN(s)+zN(i.Ee);return Sw(s)&&Sw(i.Ee)?r1(a):db(i.serializer,a)})(n,e)}function p5(n,e,t){return n instanceof Is?o1(n,e):n instanceof ws?s1(n,e):t}function i1(n,e){return n instanceof ic?(function(r){return Sw(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var rc=class extends nc{},Is=class extends nc{constructor(e){super(),this.elements=e}};function o1(n,e){let t=a1(e);for(let r of n.elements)t.some(i=>Rr(i,r))||t.push(r);return{arrayValue:{values:t}}}var ws=class extends nc{constructor(e){super(),this.elements=e}};function s1(n,e){let t=a1(e);for(let r of n.elements)t=t.filter(i=>!Rr(i,r));return{arrayValue:{values:t}}}var ic=class extends nc{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function zN(n){return je(n.integerValue||n.doubleValue)}function a1(n){return ab(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function g5(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Is&&i instanceof Is||r instanceof ws&&i instanceof ws?Ya(r.elements,i.elements,Rr):r instanceof ic&&i instanceof ic?Rr(r.Ee,i.Ee):r instanceof rc&&i instanceof rc})(n.transform,e.transform)}var jw=class{constructor(e,t){this.version=e,this.transformResults=t}},li=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function rg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var oc=class{};function c1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new xl(n.key,li.none()):new Cs(n.key,n.data,li.none());{let t=n.data,r=Dn.empty(),i=new It(Sn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Pr(n.key,r,new $n(i.toArray()),li.none())}}function m5(n,e,t){n instanceof Cs?(function(i,o,s){let a=i.value.clone(),u=GN(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Pr?(function(i,o,s){if(!rg(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=GN(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(u1(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Al(n,e,t,r){return n instanceof Cs?(function(o,s,a,u){if(!rg(o.precondition,s))return a;let l=o.value.clone(),h=WN(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Pr?(function(o,s,a,u){if(!rg(o.precondition,s))return a;let l=WN(o.fieldTransforms,u,s),h=s.data;return h.setAll(u1(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return rg(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function y5(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=i1(r.transform,i||null);o!=null&&(t===null&&(t=Dn.empty()),t.set(r.field,o))}return t||null}function qN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ya(r,i,(o,s)=>g5(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Cs=class extends oc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Pr=class extends oc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function u1(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function GN(n,e,t){let r=new Map;Re(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,p5(s,a,t[i]))}return r}function WN(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,f5(o,s,e))}return r}var xl=class extends oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Bw=class extends oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var $w=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&m5(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Al(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Al(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=n1();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=c1(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&Ya(this.mutations,e.mutations,(t,r)=>qN(t,r))&&Ya(this.baseMutations,e.baseMutations,(t,r)=>qN(t,r))}},Hw=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Re(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return c5})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var zw=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var qw=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ot,Ee;function v5(n){switch(n){case k.OK:return X(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return X(15467,{code:n})}}function l1(n){if(n===void 0)return di("GRPC error has no .code"),k.UNKNOWN;switch(n){case ot.OK:return k.OK;case ot.CANCELLED:return k.CANCELLED;case ot.UNKNOWN:return k.UNKNOWN;case ot.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case ot.INTERNAL:return k.INTERNAL;case ot.UNAVAILABLE:return k.UNAVAILABLE;case ot.UNAUTHENTICATED:return k.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case ot.NOT_FOUND:return k.NOT_FOUND;case ot.ALREADY_EXISTS:return k.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return k.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case ot.ABORTED:return k.ABORTED;case ot.OUT_OF_RANGE:return k.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return k.UNIMPLEMENTED;case ot.DATA_LOSS:return k.DATA_LOSS;default:return X(39323,{code:n})}}(Ee=ot||(ot={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var KN=null;var _5=new ai([4294967295,4294967295],0);function QN(n){let e=Ex().encode(n),t=new sw;return t.update(e),new Uint8Array(t.digest())}function YN(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ai([t,r],0),new ai([i,o],0)]}var Gw=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gs(`Invalid padding: ${t}`);if(r<0)throw new gs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new gs(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ai.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(ai.fromNumber(r)));return i.compare(_5)===1&&(i=new ai([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=QN(e),[r,i]=YN(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=QN(e),[r,i]=YN(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},gs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var hg=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,kl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ae.min(),i,new Ke(ge),gi(),ve())}},kl=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ve(),ve(),ve())}};var Wa=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},fg=class{constructor(e,t){this.targetId=e,this.De=t}},pg=class{constructor(e,t,r=jt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},gg=class{constructor(){this.ve=0,this.Ce=JN(),this.Fe=jt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ve(),t=ve(),r=ve();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:X(38017,{changeType:o})}}),new kl(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=JN()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Re(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Ww=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=gi(),this.je=Xp(),this.Je=Xp(),this.He=new Ke(ge)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(Lw(o))if(r===0){let s=new Q(o.path);this.Xe(t,s,ur.newNoDocument(s,ae.min()))}else Re(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}KN?.ct((function(h,p,m,y,C){var x,O,j,ee,te,De;let wt={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Pe=p.unchangedNames;return Pe&&(wt.bloomFilter={applied:C===0,hashCount:(x=Pe?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(ee=(j=(O=Pe?.bits)===null||O===void 0?void 0:O.bitmap)===null||j===void 0?void 0:j.length)!==null&&ee!==void 0?ee:0,padding:(De=(te=Pe?.bits)===null||te===void 0?void 0:te.padding)!==null&&De!==void 0?De:0,mightContain:b=>{var v;return(v=y?.mightContain(b))!==null&&v!==void 0&&v}}),wt})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=fi(r).toUint8Array()}catch(u){if(u instanceof cg)return go("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Gw(s,i,o)}catch(u){return go(u instanceof gs?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&Lw(a.target)){let u=new Q(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,ur.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=ve();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new hg(e,t,this.He,this.ze,r);return this.ze=gi(),this.je=Xp(),this.Je=Xp(),this.He=new Ke(ge),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new gg,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new It(ge),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new It(ge),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||z("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new gg),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Xp(){return new Ke(Q.comparator)}function JN(){return new Ke(Q.comparator)}var E5={asc:"ASCENDING",desc:"DESCENDING"},I5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},w5={and:"AND",or:"OR"},Kw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Qw(n,e){return n.useProto3Json||Vg(e)?e:{value:e}}function mg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function d1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function C5(n,e){return mg(n,e.toTimestamp())}function Mr(n){return Re(!!n,49232),ae.fromTimestamp((function(t){let r=hi(t);return new ut(r.seconds,r.nanos)})(n))}function hb(n,e){return Yw(n,e).canonicalString()}function Yw(n,e){let t=(function(i){return new Be(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function h1(n){let e=Be.fromString(n);return Re(y1(e),10190,{key:e.toString()}),e}function Jw(n,e){return hb(n.databaseId,e.path)}function hw(n,e){let t=h1(e);if(t.get(1)!==n.databaseId.projectId)throw new H(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new H(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Q(p1(t))}function f1(n,e){return hb(n.databaseId,e)}function b5(n){let e=h1(n);return e.length===4?Be.emptyPath():p1(e)}function Zw(n){return new Be(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function p1(n){return Re(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ZN(n,e,t){return{name:Jw(n,e),fields:t.value.mapValue.fields}}function T5(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:X(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(Re(h===void 0||typeof h=="string",58123),jt.fromBase64String(h||"")):(Re(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),jt.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?k.UNKNOWN:l1(l.code);return new H(h,l.message||"")})(s);t=new pg(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=hw(n,r.document.name),o=Mr(r.document.updateTime),s=r.document.createTime?Mr(r.document.createTime):ae.min(),a=new Dn({mapValue:{fields:r.document.fields}}),u=ur.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Wa(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=hw(n,r.document),o=r.readTime?Mr(r.readTime):ae.min(),s=ur.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Wa([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=hw(n,r.document),o=r.removedTargetIds||[];t=new Wa([],o,i,null)}else{if(!("filter"in e))return X(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new qw(i,o),a=r.targetId;t=new fg(a,s)}}return t}function D5(n,e){let t;if(e instanceof Cs)t={update:ZN(n,e.key,e.value)};else if(e instanceof xl)t={delete:Jw(n,e.key)};else if(e instanceof Pr)t={update:ZN(n,e.key,e.data),updateMask:k5(e.fieldMask)};else{if(!(e instanceof Bw))return X(16599,{Rt:e.type});t={verify:Jw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof rc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Is)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ws)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ic)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw X(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:C5(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:X(27497)})(n,e.precondition)),t}function S5(n,e){return n&&n.length>0?(Re(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?Mr(i.updateTime):Mr(o);return s.isEqual(ae.min())&&(s=Mr(o)),new jw(s,i.transformResults||[])})(t,e))):[]}function A5(n,e){return{documents:[f1(n,e.path)]}}function M5(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=f1(n,i);let o=(function(l){if(l.length!==0)return m1(lr.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:za(m.field),direction:O5(m.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Qw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function R5(n){let e=b5(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Re(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let m=g1(p);return m instanceof lr&&Wx(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(C){return new tc(qa(C.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,Vg(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new ec(y,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new ec(y,m)})(t.endAt)),r5(e,i,s,o,a,"F",u,l)}function P5(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function g1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=qa(t.unaryFilter.field);return at.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=qa(t.unaryFilter.field);return at.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=qa(t.unaryFilter.field);return at.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=qa(t.unaryFilter.field);return at.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}})(n):n.fieldFilter!==void 0?(function(t){return at.create(qa(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return lr.create(t.compositeFilter.filters.map(r=>g1(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X(1026)}})(t.compositeFilter.op))})(n):X(30097,{filter:n})}function O5(n){return E5[n]}function N5(n){return I5[n]}function x5(n){return w5[n]}function za(n){return{fieldPath:n.canonicalString()}}function qa(n){return Sn.fromServerFormat(n.fieldPath)}function m1(n){return n instanceof at?(function(t){if(t.op==="=="){if(UN(t.value))return{unaryFilter:{field:za(t.field),op:"IS_NAN"}};if(VN(t.value))return{unaryFilter:{field:za(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(UN(t.value))return{unaryFilter:{field:za(t.field),op:"IS_NOT_NAN"}};if(VN(t.value))return{unaryFilter:{field:za(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:za(t.field),op:N5(t.op),value:t.value}}})(n):n instanceof lr?(function(t){let r=t.getFilters().map(i=>m1(i));return r.length===1?r[0]:{compositeFilter:{op:x5(t.op),filters:r}}})(n):X(54877,{filter:n})}function k5(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function y1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Fl=class n{constructor(e,t,r,i,o=ae.min(),s=ae.min(),a=jt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Xw=class{constructor(e){this.gt=e}};function F5(n){let e=R5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Uw(e,e.limit,"L"):e}var yg=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(je(e.integerValue));else if("doubleValue"in e){let r=je(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Pl(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=hi(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(fi(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?zx(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Hx(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):X(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Ja,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(je(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),Q.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};yg.Ut=new yg;var eC=class{constructor(){this.Dn=new tC}addToCollectionParentIndex(e,t){return this.Dn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(_s.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}},tC=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new It(Be.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new It(Be.comparator)).toArray()}};var Qde=new Uint8Array(0);var XN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},v1=41943040,Bn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(v1,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);var Ll=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var ex="LruGarbageCollector",L5=1048576;function tx([n,e],[t,r]){let i=ge(n,t);return i===0?ge(e,r):i}var nC=class{constructor(e){this.Tr=e,this.buffer=new It(tx),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();tx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},rC=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){z(ex,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){hc(t)?z(ex,"Ignoring IndexedDB error during garbage collection: ",t):yield dc(t)}yield this.Rr(3e5)}))}},iC=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return L.resolve(nb.ue);let r=new nC(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(XN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XN):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),$a()<=me.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function V5(n,e){return new iC(n,e)}var oC=class{constructor(){this.changes=new pi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ur.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var sC=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var aC=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Al(r.mutation,i,$n.empty(),ut.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ve()){let i=ps();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=bl();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=ps();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ve()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=gi(),s=Sl(),a=(function(){return Sl()})();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Pr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Al(h.mutation,l,h.mutation.getFieldMask(),ut.now())):s.set(l.key,$n.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new sC(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Sl(),i=new Ke((s,a)=>s-a),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||$n.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ve()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=n1();h.forEach(m=>{if(!o.has(m)){let y=c1(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return L.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return Q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Jx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):L.resolve(ps()),a=Rl,u=o;return s.next(l=>L.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ve())).next(h=>({batchId:a,changes:t1(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Q(t)).next(r=>{let i=bl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=bl();return this.indexManager.getCollectionParents(e,o).next(a=>L.forEach(a,u=>{let l=(function(p,m){return new Es(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,ur.newInvalidDocument(h)))});let a=bl();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Al(h.mutation,l,$n.empty(),ut.now()),Bg(t,l)&&(a=a.insert(u,l))}),a})}};var cC=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return L.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Mr(i.createTime)}})(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:F5(i.bundledQuery),readTime:Mr(i.readTime)}})(t)),L.resolve()}};var uC=class{constructor(){this.overlays=new Ke(Q.comparator),this.kr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ps();return L.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),L.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){let i=ps(),o=t.length+1,s=new Q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return L.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ke((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=ps(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ps(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return L.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new zw(t,r));let o=this.kr.get(t);o===void 0&&(o=ve(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var lC=class{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}};var Vl=class{constructor(){this.qr=new It(st.Qr),this.$r=new It(st.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new st(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new st(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new Q(new Be([])),r=new st(t,e),i=new st(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new Q(new Be([])),r=new st(t,e),i=new st(t,e+1),o=ve();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new st(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},st=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Q.comparator(e.key,t.key)||ge(e.Hr,t.Hr)}static Ur(e,t){return ge(e.Hr,t.Hr)||Q.comparator(e.key,t.key)}};var dC=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new It(st.Qr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new $w(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new st(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(s)}lookupMutationBatch(e,t){return L.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return L.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?rb:this.er-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new st(t,0),i=new st(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),L.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new It(ge);return t.forEach(i=>{let o=new st(i,0),s=new st(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),L.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Q.isDocumentKey(o)||(o=o.child(""));let s=new st(new Q(o),0),a=new It(ge);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),L.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Re(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return L.forEach(t.mutations,i=>{let o=new st(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new st(t,0),i=this.Yr.firstAfterOrEqual(r);return L.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var hC=class{constructor(e){this.ni=e,this.docs=(function(){return new Ke(Q.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():ur.newInvalidDocument(t))}getEntries(e,t){let r=gi();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ur.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=gi(),s=t.path,a=new Q(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||VG(LG(h),r)<=0||(i.has(h.key)||Bg(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return L.resolve(o)}getAllFromCollectionGroup(e,t,r,i){X(9500)}ri(e,t){return L.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new fC(this)}getSize(e){return L.resolve(this.size)}},fC=class extends oC{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),L.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var pC=class{constructor(e){this.persistence=e,this.ii=new pi(t=>cb(t),ub),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.si=0,this.oi=new Vl,this.targetCount=0,this._i=Ll.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),L.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Ll(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.hr(t),L.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(o).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),L.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),L.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.oi.containsKey(t))}};var vg=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new nb(0),this.ci=!1,this.ci=!0,this.li=new lC,this.referenceDelegate=e(this),this.hi=new pC(this),this.indexManager=new eC,this.remoteDocumentCache=(function(i){return new hC(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new Xw(t),this.Ti=new cC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new dC(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){z("MemoryPersistence","Starting transaction:",e);let i=new gC(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return L.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},gC=class extends bw{constructor(e){super(),this.currentSequenceNumber=e}},mC=class n{constructor(e){this.persistence=e,this.Ai=new Vl,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw X(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.mi,r=>{let i=Q.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,ae.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return L.or([()=>L.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},_g=class n{constructor(e,t){this.persistence=e,this.gi=new pi(r=>$G(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=V5(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return L.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?L.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ae.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),L.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=tg(e.data.value)),t}Sr(e,t,r){return L.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var yC=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=ve(),i=ve();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var vC=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var _C=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return tO()?8:jG(_t())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new vC;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?($a()<=me.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",Ha(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):($a()<=me.DEBUG&&z("QueryEngine","Query:",Ha(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?($a()<=me.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",Ha(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ar(t))):L.resolve())}ps(e,t){if(HN(t))return L.resolve(null);let r=Ar(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Uw(t,null,"F"),r=Ar(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ve(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,Uw(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return HN(t)||i.isEqual(ae.min())?L.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?L.resolve(null):($a()<=me.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ha(t)),this.vs(e,s,t,FG(i,Rl)).next(a=>a))})}bs(e,t){let r=new It(Xx(e));return t.forEach((i,o)=>{Bg(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return $a()<=me.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",Ha(t)),this.gs.getDocumentsMatchingQuery(e,t,_s.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var fb="LocalStore",U5=3e8,EC=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Ke(ge),this.Ms=new pi(o=>cb(o),ub),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aC(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function j5(n,e,t,r){return new EC(n,e,t,r)}function _1(n,e){return _(this,null,function*(){let t=oe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ve();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function B5(n,e){let t=oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,m=p.keys(),y=L.resolve();return m.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(x=>{let O=l.docVersions.get(C);Re(O!==null,48541),x.version.compareTo(O)<0&&(p.applyToRemoteDocument(x,l),x.isValidDocument()&&(x.setReadTime(l.commitVersion),h.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ve();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function E1(n){let e=oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function $5(n,e){let t=oe(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(jt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(x,O,j){return x.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=U5?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(m,y,h)&&a.push(t.hi.updateTargetData(o,y))});let u=gi(),l=ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(H5(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(ae.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return L.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function H5(n,e,t){let r=ve(),i=ve();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=gi();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):z(fb,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function z5(n,e){let t=oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=rb),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function q5(n,e){let t=oe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,L.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Fl(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function IC(n,e,t){return _(this,null,function*(){let r=oe(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!hc(s))throw s;z(fb,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function nx(n,e,t){let r=oe(n),i=ae.min(),o=ve();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=oe(u),m=p.Ms.get(h);return m!==void 0?L.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)})(r,s,Ar(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ae.min(),t?o:ve())).next(a=>(G5(r,o5(e),a),{documents:a,qs:o})))}function G5(n,e,t){let r=n.xs.get(e)||ae.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var Eg=class{constructor(){this.activeTargetIds=d5()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var wC=class{constructor(){this.Fo=new Eg,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Eg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var CC=class{xo(e){}shutdown(){}};var rx="ConnectivityMonitor",Ig=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){z(rx,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){z(rx,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var eg=null;function bC(){return eg===null?eg=(function(){return 268435456+Math.round(2147483648*Math.random())})():eg++,"0x"+eg.toString(16)}var fw="RestConnection",W5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},TC=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===ug?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=bC(),a=this.Go(e,t.toUriEncodedString());z(fw,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=Xi(l);return this.jo(e,a,u,r,h).then(p=>(z(fw,`Received RPC '${e}' ${s}: `,p),p),p=>{throw go(fw,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+lc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=W5[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var DC=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Ut="WebChannelConnection",SC=class extends TC{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=bC();return new Promise((a,u)=>{let l=new aw;l.setWithCredentials(!0),l.listenOnce(cw.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Cl.NO_ERROR:let p=l.getResponseJson();z(Ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Cl.TIMEOUT:z(Ut,`RPC '${e}' ${s} timed out`),u(new H(k.DEADLINE_EXCEEDED,"Request time out"));break;case Cl.HTTP_ERROR:let m=l.getStatus();if(z(Ut,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let x=(function(j){let ee=j.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(ee)>=0?ee:k.UNKNOWN})(C.status);u(new H(x,C.message))}else u(new H(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new H(k.UNAVAILABLE,"Connection failed."));break;default:X(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{z(Ut,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);z(Ut,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=bC(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=dw(),a=lw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");z(Ut,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,C=new DC({Ho:O=>{y?z(Ut,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(m||(z(Ut,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),z(Ut,`RPC '${e}' stream ${i} sending:`,O),p.send(O))},Yo:()=>p.close()}),x=(O,j,ee)=>{O.listen(j,te=>{try{ee(te)}catch(De){setTimeout(()=>{throw De},0)}})};return x(p,Ba.EventType.OPEN,()=>{y||(z(Ut,`RPC '${e}' stream ${i} transport opened.`),C.s_())}),x(p,Ba.EventType.CLOSE,()=>{y||(y=!0,z(Ut,`RPC '${e}' stream ${i} transport closed`),C.__(),this.I_(p))}),x(p,Ba.EventType.ERROR,O=>{y||(y=!0,go(Ut,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),C.__(new H(k.UNAVAILABLE,"The operation could not be completed")))}),x(p,Ba.EventType.MESSAGE,O=>{var j;if(!y){let ee=O.data[0];Re(!!ee,16349);let te=ee,De=te?.error||((j=te[0])===null||j===void 0?void 0:j.error);if(De){z(Ut,`RPC '${e}' stream ${i} received error:`,De);let wt=De.status,Pe=(function(I){let w=ot[I];if(w!==void 0)return l1(w)})(wt),b=De.message;Pe===void 0&&(Pe=k.INTERNAL,b="Unknown error status: "+wt+" with message "+De.message),y=!0,C.__(new H(Pe,b)),p.close()}else z(Ut,`RPC '${e}' stream ${i} received:`,ee),C.a_(ee)}}),x(a,uw.STAT_EVENT,O=>{O.stat===Jp.PROXY?z(Ut,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===Jp.NOPROXY&&z(Ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function pw(){return typeof document<"u"?document:null}function $g(n){return new Kw(n,!0)}var wg=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var ix="PersistentStream",Cg=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new wg(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return _(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return _(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return _(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===k.RESOURCE_EXHAUSTED?(di(t.toString()),di("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new H(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>_(this,null,function*(){this.state=0,this.start()}))}G_(e){return z(ix,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(z(ix,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},AC=class extends Cg{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=T5(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ae.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ae.min():s.readTime?Mr(s.readTime):ae.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=Zw(this.serializer),t.addTarget=(function(o,s){let a,u=s.target;if(a=Lw(u)?{documents:A5(o,u)}:{query:M5(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=d1(o,s.resumeToken);let l=Qw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ae.min())>0){a.readTime=mg(o,s.snapshotVersion.toTimestamp());let l=Qw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=P5(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=Zw(this.serializer),t.removeTarget=e,this.k_(t)}},MC=class extends Cg{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=S5(e.writeResults,e.commitTime),r=Mr(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=Zw(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>D5(this.serializer,r))};this.k_(t)}};var RC=class{},PC=class extends RC{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new H(k.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,Yw(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(k.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,Yw(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(k.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},OC=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(di(t),this._a=!1):z("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var bs="RemoteStore",NC=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>_(this,null,function*(){Ts(this)&&(z(bs,"Restarting streams for network reachability change."),yield(function(u){return _(this,null,function*(){let l=oe(u);l.Ia.add(4),yield $l(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield Hg(l)})})(this))}))}),this.Aa=new OC(r,i)}};function Hg(n){return _(this,null,function*(){if(Ts(n))for(let e of n.da)yield e(!0)})}function $l(n){return _(this,null,function*(){for(let e of n.da)yield e(!1)})}function I1(n,e){let t=oe(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),yb(t)?mb(t):fc(t).x_()&&gb(t,e))}function pb(n,e){let t=oe(n),r=fc(t);t.Ta.delete(e),r.x_()&&w1(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ts(t)&&t.Aa.set("Unknown"))}function gb(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fc(n).H_(e)}function w1(n,e){n.Ra.$e(e),fc(n).Y_(e)}function mb(n){n.Ra=new Ww({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),fc(n).start(),n.Aa.aa()}function yb(n){return Ts(n)&&!fc(n).M_()&&n.Ta.size>0}function Ts(n){return oe(n).Ia.size===0}function C1(n){n.Ra=void 0}function K5(n){return _(this,null,function*(){n.Aa.set("Online")})}function Q5(n){return _(this,null,function*(){n.Ta.forEach((e,t)=>{gb(n,e)})})}function Y5(n,e){return _(this,null,function*(){C1(n),yb(n)?(n.Aa.la(e),mb(n)):n.Aa.set("Unknown")})}function J5(n,e,t){return _(this,null,function*(){if(n.Aa.set("Online"),e instanceof pg&&e.state===2&&e.cause)try{yield(function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){z(bs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bg(n,r)}else if(e instanceof Wa?n.Ra.Ye(e):e instanceof fg?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ae.min()))try{let r=yield E1(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(jt.EMPTY_BYTE_STRING,h.snapshotVersion)),w1(o,u);let p=new Fl(h.target,u,l,h.sequenceNumber);gb(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){z(bs,"Failed to raise snapshot:",r),yield bg(n,r)}})}function bg(n,e,t){return _(this,null,function*(){if(!hc(e))throw e;n.Ia.add(1),yield $l(n),n.Aa.set("Offline"),t||(t=()=>E1(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){z(bs,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield Hg(n)}))})}function b1(n,e){return e().catch(t=>bg(n,t,e))}function zg(n){return _(this,null,function*(){let e=oe(n),t=yo(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:rb;for(;Z5(e);)try{let i=yield z5(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,X5(e,i)}catch(i){yield bg(e,i)}T1(e)&&D1(e)})}function Z5(n){return Ts(n)&&n.Pa.length<10}function X5(n,e){n.Pa.push(e);let t=yo(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function T1(n){return Ts(n)&&!yo(n).M_()&&n.Pa.length>0}function D1(n){yo(n).start()}function e8(n){return _(this,null,function*(){yo(n).na()})}function t8(n){return _(this,null,function*(){let e=yo(n);for(let t of n.Pa)e.X_(t.mutations)})}function n8(n,e,t){return _(this,null,function*(){let r=n.Pa.shift(),i=Hw.from(r,e,t);yield b1(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield zg(n)})}function r8(n,e){return _(this,null,function*(){e&&yo(n).Z_&&(yield(function(r,i){return _(this,null,function*(){if((function(s){return v5(s)&&s!==k.ABORTED})(i.code)){let o=r.Pa.shift();yo(r).N_(),yield b1(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield zg(r)}})})(n,e)),T1(n)&&D1(n)})}function ox(n,e){return _(this,null,function*(){let t=oe(n);t.asyncQueue.verifyOperationInProgress(),z(bs,"RemoteStore received new credentials");let r=Ts(t);t.Ia.add(3),yield $l(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield Hg(t)})}function i8(n,e){return _(this,null,function*(){let t=oe(n);e?(t.Ia.delete(2),yield Hg(t)):e||(t.Ia.add(2),yield $l(t),t.Aa.set("Unknown"))})}function fc(n){return n.Va||(n.Va=(function(t,r,i){let o=oe(t);return o.ia(),new AC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:K5.bind(null,n),e_:Q5.bind(null,n),n_:Y5.bind(null,n),J_:J5.bind(null,n)}),n.da.push(e=>_(null,null,function*(){e?(n.Va.N_(),yb(n)?mb(n):n.Aa.set("Unknown")):(yield n.Va.stop(),C1(n))}))),n.Va}function yo(n){return n.ma||(n.ma=(function(t,r,i){let o=oe(t);return o.ia(),new MC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:e8.bind(null,n),n_:r8.bind(null,n),ea:t8.bind(null,n),ta:n8.bind(null,n)}),n.da.push(e=>_(null,null,function*(){e?(n.ma.N_(),yield zg(n)):(yield n.ma.stop(),n.Pa.length>0&&(z(bs,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var xC=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function vb(n,e){if(di("AsyncQueue",`${e}: ${n}`),hc(n))return new H(k.UNAVAILABLE,`${e}: ${n}`);throw n}var Tg=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Q.comparator(t.key,r.key):(t,r)=>Q.comparator(t.key,r.key),this.keyedMap=bl(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Dg=class{constructor(){this.fa=new Ke(Q.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):X(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},sc=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Tg.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var kC=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},FC=class{constructor(){this.queries=sx(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=oe(t),o=i.queries;i.queries=sx(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new H(k.ABORTED,"Firestore shutting down"))}};function sx(){return new pi(n=>Zx(n),jg)}function o8(n,e){return _(this,null,function*(){let t=oe(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new kC,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=vb(s,`Initialization of query '${Ha(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&_b(t)})}function s8(n,e){return _(this,null,function*(){let t=oe(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function a8(n,e){let t=oe(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&_b(t)}function c8(n,e,t){let r=oe(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function _b(n){n.Da.forEach(e=>{e.next()})}var LC,ax;(ax=LC||(LC={})).Fa="default",ax.Cache="cache";var VC=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new sc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=sc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==LC.Cache}};var Sg=class{constructor(e){this.key=e}},Ag=class{constructor(e){this.key=e}},UC=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ve(),this.mutatedKeys=ve(),this.Xa=Xx(e),this.eu=new Tg(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Dg,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Bg(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),O=!1;m&&y?m.data.isEqual(y.data)?C!==x&&(r.track({type:3,doc:y}),O=!0):this.iu(m,y)||(r.track({type:2,doc:y}),O=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),O=!0):m&&!y&&(r.track({type:1,doc:m}),O=!0,(u||l)&&(a=!0)),O&&(y?(s=s.add(y),o=x?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,C){let x=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{At:O})}};return x(y)-x(C)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new sc(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Dg,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ve(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Ag(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Sg(r))}),t}uu(e){this.Ha=e.qs,this.Za=ve();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return sc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Eb="SyncEngine",jC=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},BC=class{constructor(e){this.key=e,this.lu=!1}},$C=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new pi(a=>Zx(a),jg),this.Tu=new Map,this.Iu=new Set,this.du=new Ke(Q.comparator),this.Eu=new Map,this.Au=new Vl,this.Ru={},this.Vu=new Map,this.mu=Ll.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function u8(n,e,t=!0){return _(this,null,function*(){let r=O1(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield S1(r,e,t,!0),i})}function l8(n,e){return _(this,null,function*(){let t=O1(n);yield S1(t,e,!0,!1)})}function S1(n,e,t,r){return _(this,null,function*(){let i=yield q5(n.localStore,Ar(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield d8(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&I1(n.remoteStore,i),a})}function d8(n,e,t,r,i){return _(this,null,function*(){n.gu=(p,m,y)=>(function(x,O,j,ee){return _(this,null,function*(){let te=O.view.nu(j);te.Ds&&(te=yield nx(x.localStore,O.query,!1).then(({documents:b})=>O.view.nu(b,te)));let De=ee&&ee.targetChanges.get(O.targetId),wt=ee&&ee.targetMismatches.get(O.targetId)!=null,Pe=O.view.applyChanges(te,x.isPrimaryClient,De,wt);return ux(x,O.targetId,Pe._u),Pe.snapshot})})(n,p,m,y);let o=yield nx(n.localStore,e,!0),s=new UC(e,o.qs),a=s.nu(o.documents),u=kl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);ux(n,t,l._u);let h=new jC(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function h8(n,e,t){return _(this,null,function*(){let r=oe(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!jg(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield IC(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&pb(r.remoteStore,i.targetId),HC(r,i.targetId)}).catch(dc))):(HC(r,i.targetId),yield IC(r.localStore,i.targetId,!0))})}function f8(n,e){return _(this,null,function*(){let t=oe(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),pb(t.remoteStore,r.targetId))})}function p8(n,e,t){return _(this,null,function*(){let r=I8(n);try{let i=yield(function(s,a){let u=oe(s),l=ut.now(),h=a.reduce((y,C)=>y.add(C.key),ve()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=gi(),x=ve();return u.Os.getEntries(y,h).next(O=>{C=O,C.forEach((j,ee)=>{ee.isValidDocument()||(x=x.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(O=>{p=O;let j=[];for(let ee of a){let te=y5(ee,p.get(ee.key).overlayedDocument);te!=null&&j.push(new Pr(ee.key,te,qx(te.value.mapValue),li.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,j,a)}).next(O=>{m=O;let j=O.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(y,O.batchId,j)})}).then(()=>({batchId:m.batchId,changes:t1(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Ke(ge)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield Hl(r,i.changes),yield zg(r.remoteStore)}catch(i){let o=vb(i,"Failed to persist write");t.reject(o)}})}function A1(n,e){return _(this,null,function*(){let t=oe(n);try{let r=yield $5(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Re(s.lu,14607):i.removedDocuments.size>0&&(Re(s.lu,42227),s.lu=!1))}),yield Hl(t,r,e)}catch(r){yield dc(r)}})}function cx(n,e,t){let r=oe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=oe(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&_b(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function g8(n,e,t){return _(this,null,function*(){let r=oe(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Ke(Q.comparator);s=s.insert(o,ur.newNoDocument(o,ae.min()));let a=ve().add(o),u=new hg(ae.min(),new Map,new Ke(ge),s,a);yield A1(r,u),r.du=r.du.remove(o),r.Eu.delete(e),Ib(r)}else yield IC(r.localStore,e,!1).then(()=>HC(r,e,t)).catch(dc)})}function m8(n,e){return _(this,null,function*(){let t=oe(n),r=e.batch.batchId;try{let i=yield B5(t.localStore,e);R1(t,r,null),M1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Hl(t,i)}catch(i){yield dc(i)}})}function y8(n,e,t){return _(this,null,function*(){let r=oe(n);try{let i=yield(function(s,a){let u=oe(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Re(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);R1(r,e,t),M1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Hl(r,i)}catch(i){yield dc(i)}})}function M1(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function R1(n,e,t){let r=oe(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function HC(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||P1(n,r)})}function P1(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(pb(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Ib(n))}function ux(n,e,t){for(let r of t)r instanceof Sg?(n.Au.addReference(r.key,e),v8(n,r)):r instanceof Ag?(z(Eb,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||P1(n,r.key)):X(19791,{yu:r})}function v8(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(z(Eb,"New document in limbo: "+t),n.Iu.add(r),Ib(n))}function Ib(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new Q(Be.fromString(e)),r=n.mu.next();n.Eu.set(r,new BC(t)),n.du=n.du.insert(t,r),I1(n.remoteStore,new Fl(Ar(lb(t.path)),r,"TargetPurposeLimboResolution",nb.ue))}}function Hl(n,e,t){return _(this,null,function*(){let r=oe(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=yC.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return _(this,null,function*(){let h=oe(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(l,m=>L.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>L.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!hc(p))throw p;z(fb,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),C=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(C);h.Fs=h.Fs.insert(m,x)}}})})(r.localStore,o))})}function _8(n,e){return _(this,null,function*(){let t=oe(n);if(!t.currentUser.isEqual(e)){z(Eb,"User change. New user:",e.toKey());let r=yield _1(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new H(k.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Hl(t,r.Bs)}})}function E8(n,e){let t=oe(n),r=t.Eu.get(e);if(r&&r.lu)return ve().add(r.key);{let i=ve(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function O1(n){let e=oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=A1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=E8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g8.bind(null,e),e.hu.J_=a8.bind(null,e.eventManager),e.hu.pu=c8.bind(null,e.eventManager),e}function I8(n){let e=oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y8.bind(null,e),e}var N1=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=$g(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return j5(this.persistence,new _C,t.initialUser,this.serializer)}Du(t){return new vg(mC.Vi,this.serializer)}bu(t){return new wC}terminate(){return _(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),zC=class extends N1{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Re(this.persistence.referenceDelegate instanceof _g,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new rC(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new vg(r=>_g.Vi(r,t),this.serializer)}};var w8=(()=>{class n{initialize(t,r){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>cx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_8.bind(null,this.syncEngine),yield i8(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new FC})()}createDatastore(t){let r=$g(t.databaseInfo.databaseId),i=(function(s){return new SC(s)})(t.databaseInfo);return(function(s,a,u,l){return new PC(s,a,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,u){return new NC(i,o,s,a,u)})(this.localStore,this.datastore,t.asyncQueue,r=>cx(this.syncEngine,r,0),(function(){return Ig.C()?new Ig:new CC})())}createSyncEngine(t,r){return(function(o,s,a,u,l,h,p){let m=new $C(o,s,a,u,l,h);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var t,r;yield(function(o){return _(this,null,function*(){let s=oe(o);z(bs,"RemoteStore shutting down."),s.Ia.add(5),yield $l(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var qC=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):di("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var vo="FirestoreClient",GC=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=Ml.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){z(vo,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(z(vo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=vb(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function gw(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),z(vo,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield _1(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{go("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{z("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{go("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function lx(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield C8(n);z(vo,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ox(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>ox(e.remoteStore,i)),n._onlineComponents=e})}function C8(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){z(vo,"Using user provided OfflineComponentProvider");try{yield gw(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===k.FAILED_PRECONDITION||i.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;go("Error using user provided cache. Falling back to memory cache: "+t),yield gw(n,new N1)}}else z(vo,"Using default OfflineComponentProvider"),yield gw(n,new zC(void 0));return n._offlineComponents})}function x1(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(z(vo,"Using user provided OnlineComponentProvider"),yield lx(n,n._uninitializedComponentsProvider._online)):(z(vo,"Using default OnlineComponentProvider"),yield lx(n,new w8))),n._onlineComponents})}function b8(n){return x1(n).then(e=>e.syncEngine)}function dx(n){return _(this,null,function*(){let e=yield x1(n),t=e.eventManager;return t.onListen=u8.bind(null,e.syncEngine),t.onUnlisten=h8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=l8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=f8.bind(null,e.syncEngine),t})}function k1(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var hx=new Map;var F1="firestore.googleapis.com",fx=!0,Mg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=F1,this.ssl=fx}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:fx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=v1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<L5)throw new H(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=k1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new H(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new H(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new H(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ac=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new mw;switch(r.type){case"firstParty":return new Ew(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=hx.get(t);r&&(z("ComponentProvider","Removing Datastore"),hx.delete(t),r.terminate())})(this),Promise.resolve()}};function L1(n,e,t,r={}){var i;n=uo(n,ac);let o=Xi(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(bp(`https://${u}`),Tp("Firestore",!0)),s.host!==F1&&s.host!==u&&go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Cr(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Et.MOCK_USER;else{h=QP(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new H(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Et(m)}n._authCredentials=new yw(new ig(h,p))}}var cc=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},St=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Bl(t,n._jsonSchema))return new n(e,r||null,new Q(Be.fromString(t.referencePath)))}};St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:ct("string",St._jsonSchemaVersion),referencePath:ct("string")};var lo=class n extends cc{constructor(e,t,r){super(e,t,lb(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new Q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function V1(n,e,...t){if(n=pt(n),Ix("collection","path",e),n instanceof ac){let r=Be.fromString(e,...t);return RN(r),new lo(n,null,r)}{if(!(n instanceof St||n instanceof lo))throw new H(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Be.fromString(e,...t));return RN(r),new lo(n.firestore,null,r)}}function wb(n,e,...t){if(n=pt(n),arguments.length===1&&(e=Ml.newId()),Ix("doc","path",e),n instanceof ac){let r=Be.fromString(e,...t);return MN(r),new St(n,null,new Q(r))}{if(!(n instanceof St||n instanceof lo))throw new H(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Be.fromString(e,...t));return MN(r),new St(n.firestore,n instanceof lo?n.converter:null,new Q(r))}}var px="AsyncQueue",Rg=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new wg(this,"async_queue_retry"),this.oc=()=>{let r=pw();r&&z(px,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=pw();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=pw();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new ui;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return _(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!hc(e))throw e;z(px,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,di("INTERNAL UNHANDLED ERROR: ",gx(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=xC.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&X(47125,{hc:gx(this.tc)})}verifyOperationInProgress(){}Pc(){return _(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function gx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function mx(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var _o=class extends ac{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Rg,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Rg(e),this._firestoreClient=void 0,yield e}})}};function U1(n,e){let t=typeof n=="object"?n:as(),r=typeof n=="string"?n:e||ug,i=Fa(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=KP("firestore");o&&L1(i,...o)}return i}function j1(n){if(n._terminated)throw new H(k.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||T8(n),n._firestoreClient}function T8(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,u,l,h){return new Tw(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,k1(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new GC(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(n._componentsProvider))}var ho=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(jt.fromBase64String(e))}catch(t){throw new H(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Bl(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};ho._jsonSchemaVersion="firestore/bytes/1.0",ho._jsonSchema={type:ct("string",ho._jsonSchemaVersion),bytes:ct("string")};var uc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new H(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ul=class{constructor(e){this._methodName=e}};var fo=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new H(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new H(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Bl(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};fo._jsonSchemaVersion="firestore/geoPoint/1.0",fo._jsonSchema={type:ct("string",fo._jsonSchemaVersion),latitude:ct("number"),longitude:ct("number")};var po=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Bl(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new H(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};po._jsonSchemaVersion="firestore/vectorValue/1.0",po._jsonSchema={type:ct("string",po._jsonSchemaVersion),vectorValues:ct("object")};var D8=/^__.*__$/,WC=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Pr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cs(e,this.data,t,this.fieldTransforms)}},Pg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Pr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function B1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ec:n})}}var KC=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ng(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(B1(this.Ec)&&D8.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},QC=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||$g(e)}Dc(e,t,r,i=!1){return new KC({Ec:e,methodName:t,bc:r,path:Sn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Cb(n){let e=n._freezeSettings(),t=$g(n._databaseId);return new QC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function S8(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);bb("Data must be an object, but it was:",s,r);let a=$1(r,s),u,l;if(o.merge)u=new $n(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=YC(e,p,t);if(!s.contains(m))throw new H(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);z1(h,m)||h.push(m)}u=new $n(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new WC(new Dn(a),u,l)}var Og=class n extends Ul{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function A8(n,e,t,r){let i=n.Dc(1,e,t);bb("Data must be an object, but it was:",i,r);let o=[],s=Dn.empty();Eo(r,(u,l)=>{let h=Tb(e,u,t);l=pt(l);let p=i.gc(h);if(l instanceof Og)o.push(h);else{let m=zl(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new $n(o);return new Pg(s,a,i.fieldTransforms)}function M8(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[YC(e,r,t)],u=[i];if(o.length%2!=0)throw new H(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(YC(e,o[m])),u.push(o[m+1]);let l=[],h=Dn.empty();for(let m=a.length-1;m>=0;--m)if(!z1(l,a[m])){let y=a[m],C=u[m];C=pt(C);let x=s.gc(y);if(C instanceof Og)l.push(y);else{let O=zl(C,x);O!=null&&(l.push(y),h.set(y,O))}}let p=new $n(l);return new Pg(h,p,s.fieldTransforms)}function R8(n,e,t,r=!1){return zl(t,n.Dc(r?4:3,e))}function zl(n,e){if(H1(n=pt(n)))return bb("Unsupported field value:",e,n),$1(n,e);if(n instanceof Ul)return(function(r,i){if(!B1(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=zl(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return h5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ut.fromDate(r);return{timestampValue:mg(i.serializer,o)}}if(r instanceof ut){let o=new ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mg(i.serializer,o)}}if(r instanceof fo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ho)return{bytesValue:d1(i.serializer,r._byteString)};if(r instanceof St){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:hb(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof po)return(function(s,a){return{mapValue:{fields:{[ob]:{stringValue:sb},[Ja]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return db(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Lg(r)}`)})(n,e)}function $1(n,e){let t={};return Lx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eo(n,(r,i)=>{let o=zl(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function H1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof fo||n instanceof ho||n instanceof St||n instanceof Ul||n instanceof po)}function bb(n,e,t){if(!H1(t)||!wx(t)){let r=Lg(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function YC(n,e,t){if((e=pt(e))instanceof uc)return e._internalPath;if(typeof e=="string")return Tb(n,e);throw Ng("Field path arguments must be of type string or ",n,!1,void 0,t)}var P8=new RegExp("[~\\*/\\[\\]]");function Tb(n,e,t){if(e.search(P8)>=0)throw Ng(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new uc(...e.split("."))._internalPath}catch{throw Ng(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ng(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new H(k.INVALID_ARGUMENT,a+n+u)}function z1(n,e){return n.some(t=>t.isEqual(e))}var xg=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new JC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Db("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},JC=class extends xg{data(){return super.data()}};function Db(n,e){return typeof e=="string"?Tb(n,e):e instanceof uc?e._internalPath:e._delegate._internalPath}function O8(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new H(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var jl=class{},ZC=class extends jl{};function q1(n,e,...t){let r=[];e instanceof jl&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(u=>u instanceof XC).length,a=o.filter(u=>u instanceof kg).length;if(s>1||s>0&&a>0)throw new H(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var kg=class n extends ZC{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return W1(e._query,t),new cc(e.firestore,e.converter,Vw(e._query,t))}_parse(e){let t=Cb(e.firestore);return(function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new H(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){vx(p,h);let C=[];for(let x of p)C.push(yx(u,o,x));m={arrayValue:{values:C}}}else m=yx(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||vx(p,h),m=R8(a,s,p,h==="in"||h==="not-in");return at.create(l,h,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function G1(n,e,t){let r=e,i=Db("where",n);return kg._create(i,r,t)}var XC=class n extends jl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:lr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)W1(s,u),s=Vw(s,u)})(e._query,t),new cc(e.firestore,e.converter,Vw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function yx(n,e,t){if(typeof(t=pt(t))=="string"){if(t==="")throw new H(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jx(e)&&t.indexOf("/")!==-1)throw new H(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Be.fromString(t));if(!Q.isDocumentKey(r))throw new H(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return LN(n,new Q(r))}if(t instanceof St)return LN(n,t._key);throw new H(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lg(t)}.`)}function vx(n,e){if(!Array.isArray(n)||n.length===0)throw new H(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function W1(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new H(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var eb=class{convertValue(e,t="none"){switch(mo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Eo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ja].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>je(s.doubleValue));return new po(o)}convertGeoPoint(e){return new fo(je(e.latitude),je(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Ug(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ol(e));default:return null}}convertTimestamp(e){let t=hi(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Be.fromString(e);Re(y1(r),9688,{name:e});let i=new lg(r.get(1),r.get(3)),o=new Q(r.popFirst(5));return i.isEqual(t)||di(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function N8(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ms=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ys=class n extends xg{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ka(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Db("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",ys._jsonSchema={type:ct("string",ys._jsonSchemaVersion),bundleSource:ct("string","DocumentSnapshot"),bundleName:ct("string"),bundle:ct("string")};var Ka=class extends ys{data(e={}){return super.data(e)}},Qa=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ms(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ka(this._firestore,this._userDataWriter,r.key,r,new ms(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new H(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ka(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ms(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ka(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ms(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:x8(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ml.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function x8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:n})}}Qa._jsonSchemaVersion="firestore/querySnapshot/1.0",Qa._jsonSchema={type:ct("string",Qa._jsonSchemaVersion),bundleSource:ct("string","QuerySnapshot"),bundleName:ct("string"),bundle:ct("string")};var Fg=class extends eb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ho(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,t)}};function K1(n,e,t,...r){n=uo(n,St);let i=uo(n.firestore,_o),o=Cb(i),s;return s=typeof(e=pt(e))=="string"||e instanceof uc?M8(o,"updateDoc",n._key,e,t,r):A8(o,"updateDoc",n._key,e),Ab(i,[s.toMutation(n._key,li.exists(!0))])}function Q1(n){return Ab(uo(n.firestore,_o),[new xl(n._key,li.none())])}function Y1(n,e){let t=uo(n.firestore,_o),r=wb(n),i=N8(n.converter,e);return Ab(t,[S8(Cb(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,li.exists(!1))]).then(()=>r)}function Sb(n,...e){var t,r,i;n=pt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||mx(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(mx(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof St)l=uo(n.firestore,_o),h=lb(n._key.path),u={next:p=>{e[s]&&e[s](k8(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=uo(n,cc);l=uo(p.firestore,_o),h=p._query;let m=new Fg(l);u={next:y=>{e[s]&&e[s](new Qa(l,m,p,y))},error:e[s+1],complete:e[s+2]},O8(n._query)}return(function(m,y,C,x){let O=new qC(x),j=new VC(y,O,C);return m.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return o8(yield dx(m),j)})),()=>{O.Ou(),m.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return s8(yield dx(m),j)}))}})(j1(l),h,a,u)}function Ab(n,e){return(function(r,i){let o=new ui;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return p8(yield b8(r),i,o)})),o.promise})(j1(n),e)}function k8(n,e,t){let r=t.docs.get(e._key),i=new Fg(n);return new ys(n,i,e._key,r,new ms(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){lc=i})(to),ar(new Jt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new _o(new vw(r.getProvider("auth-internal")),new Iw(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new H(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lg(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),We(TN,DN,e),We(TN,DN,"esm2017")})();var qg=function(){return qg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},qg.apply(this,arguments)};var V8={includeMetadataChanges:!1};function Mb(n,e){return e===void 0&&(e=V8),new ce(function(t){var r=Sb(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function J1(n){return Mb(n,{includeMetadataChanges:!0})}function Z1(n,e){return e===void 0&&(e={}),J1(n).pipe(ue(function(t){return Rb(t,e)}))}function Rb(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:qg(qg({},r),(t={},t[e.idField]=n.id,t))}function X1(n){return Mb(n,{includeMetadataChanges:!0}).pipe(ue(function(e){return e.docs}))}function ek(n,e){return e===void 0&&(e={}),X1(n).pipe(ue(function(t){return t.map(function(r){return Rb(r,e)})}))}var Ds=class{constructor(e){return e}},tk="firestore",Pb=class{constructor(){return Va(tk)}};var Ob=new B("angularfire2.firestore-instances");function U8(n,e){let t=hl(tk,n,e);return t&&new Ds(t)}function j8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ds(r)}}var B8={provide:Pb,deps:[[new an,Ob]]},$8={provide:Ds,useFactory:U8,deps:[[new an,Ob],ii]};function nk(n,...e){return We("angularfire",no.full,"fst"),Tt([$8,B8,{provide:Ob,useFactory:j8(n),multi:!0,deps:[be,qe,ro,us,[new an,wl],[new an,Ua],...e]}])}var Ss=Zt(ek,!0);var Nb=Zt(Z1,!0);var Gg=Zt(Y1,!0,2);var Or=Zt(V1,!0,2);var Wg=Zt(Q1,!0,2);var mi=Zt(wb,!0,2);var rk=Zt(U1,!0);var Kg=Zt(q1,!0,2);var Qg=Zt(K1,!0,2);var Yg=Zt(G1,!0,2);var fk=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(J(Bi),J(Qr))};static \u0275dir=Ve({type:n})}return n})(),am=(()=>{class n extends fk{static \u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})();static \u0275dir=Ve({type:n,features:[Wt]})}return n})(),vc=new B(""),H8={provide:vc,useExisting:rn(()=>Lb),multi:!0},Lb=(()=>{class n extends am{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})();static \u0275dir=Ve({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&Te("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[er([H8]),Wt]})}return n})(),z8={provide:vc,useExisting:rn(()=>_c),multi:!0};function q8(){let n=Vn()?Vn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var G8=new B(""),_c=(()=>{class n extends fk{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!q8())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(J(Bi),J(Qr),J(G8,8))};static \u0275dir=Ve({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Te("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[er([z8]),Wt]})}return n})();function Vb(n){return n==null||Ub(n)===0}function Ub(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Xl=new B(""),cm=new B(""),W8=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Jl=class{static min(e){return K8(e)}static max(e){return Q8(e)}static required(e){return pk(e)}static requiredTrue(e){return Y8(e)}static email(e){return J8(e)}static minLength(e){return Z8(e)}static maxLength(e){return X8(e)}static pattern(e){return e9(e)}static nullValidator(e){return Zg()}static compose(e){return Ek(e)}static composeAsync(e){return Ik(e)}};function K8(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Q8(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function pk(n){return Vb(n.value)?{required:!0}:null}function Y8(n){return n.value===!0?null:{required:!0}}function J8(n){return Vb(n.value)||W8.test(n.value)?null:{email:!0}}function Z8(n){return e=>{let t=e.value?.length??Ub(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function X8(n){return e=>{let t=e.value?.length??Ub(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function e9(n){if(!n)return Zg;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Vb(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Zg(n){return null}function gk(n){return n!=null}function mk(n){return $i(n)?$e(n):n}function yk(n){let e={};return n.forEach(t=>{e=t!=null?V(V({},e),t):e}),Object.keys(e).length===0?null:e}function vk(n,e){return e.map(t=>t(n))}function t9(n){return!n.validate}function _k(n){return n.map(e=>t9(e)?e:t=>e.validate(t))}function Ek(n){if(!n)return null;let e=n.filter(gk);return e.length==0?null:function(t){return yk(vk(t,e))}}function jb(n){return n!=null?Ek(_k(n)):null}function Ik(n){if(!n)return null;let e=n.filter(gk);return e.length==0?null:function(t){let r=vk(t,e).map(mk);return uy(r).pipe(ue(yk))}}function Bb(n){return n!=null?Ik(_k(n)):null}function ik(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function wk(n){return n._rawValidators}function Ck(n){return n._rawAsyncValidators}function xb(n){return n?Array.isArray(n)?n:[n]:[]}function Xg(n,e){return Array.isArray(n)?n.includes(e):n===e}function ok(n,e){let t=xb(e);return xb(n).forEach(i=>{Xg(t,i)||t.push(i)}),t}function sk(n,e){return xb(e).filter(t=>!Xg(n,t))}var em=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=jb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Bb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},yi=class extends em{name;get formDirective(){return null}get path(){return null}},As=class extends em{_parent=null;name=null;valueAccessor=null},tm=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},n9={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Mfe=de(V({},n9),{"[class.ng-submitted]":"isSubmitted"}),Nr=(()=>{class n extends tm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(J(As,2))};static \u0275dir=Ve({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&kn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Wt]})}return n})(),um=(()=>{class n extends tm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(J(yi,10))};static \u0275dir=Ve({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&kn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Wt]})}return n})();var ql="VALID",Jg="INVALID",pc="PENDING",Gl="DISABLED",Io=class{},nm=class extends Io{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Kl=class extends Io{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ql=class extends Io{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},gc=class extends Io{status;source;constructor(e,t){super(),this.status=e,this.source=t}},rm=class extends Io{source;constructor(e){super(),this.source=e}},Zl=class extends Io{source;constructor(e){super(),this.source=e}};function $b(n){return(lm(n)?n.validators:n)||null}function r9(n){return Array.isArray(n)?jb(n):n||null}function Hb(n,e){return(lm(e)?e.asyncValidators:n)||null}function i9(n){return Array.isArray(n)?Bb(n):n||null}function lm(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function bk(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new $(1e3,"");if(!r[t])throw new $(1001,"")}function Tk(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new $(1002,"")})}var mc=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return mt(this.statusReactive)}set status(e){mt(()=>this.statusReactive.set(e))}_status=Gi(()=>this.statusReactive());statusReactive=_n(void 0);get valid(){return this.status===ql}get invalid(){return this.status===Jg}get pending(){return this.status==pc}get disabled(){return this.status===Gl}get enabled(){return this.status!==Gl}errors;get pristine(){return mt(this.pristineReactive)}set pristine(e){mt(()=>this.pristineReactive.set(e))}_pristine=Gi(()=>this.pristineReactive());pristineReactive=_n(!0);get dirty(){return!this.pristine}get touched(){return mt(this.touchedReactive)}set touched(e){mt(()=>this.touchedReactive.set(e))}_touched=Gi(()=>this.touchedReactive());touchedReactive=_n(!1);get untouched(){return!this.touched}_events=new Qe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ok(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ok(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sk(e,this._rawAsyncValidators))}hasValidator(e){return Xg(this._rawValidators,e)}hasAsyncValidator(e){return Xg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(de(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ql(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ql(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(de(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Kl(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Kl(!0,r))}markAsPending(e={}){this.status=pc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new gc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(de(V({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Gl,this.errors=null,this._forEachChild(i=>{i.disable(de(V({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new nm(this.value,r)),this._events.next(new gc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(de(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ql,this._forEachChild(r=>{r.enable(de(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(de(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ql||this.status===pc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new nm(this.value,t)),this._events.next(new gc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(de(V({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gl:ql}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=pc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=mk(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new gc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ge,this.statusChanges=new Ge}_calculateStatus(){return this._allControlsDisabled()?Gl:this.errors?Jg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pc)?pc:this._anyControlsHaveStatus(Jg)?Jg:ql}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Kl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ql(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){lm(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=r9(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=i9(this._rawAsyncValidators)}},yc=class extends mc{constructor(e,t,r){super($b(t),Hb(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Tk(this,!0,e),Object.keys(e).forEach(r=>{bk(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Zl(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var kb=class extends yc{};var ed=new B("",{providedIn:"root",factory:()=>dm}),dm="always";function Dk(n,e){return[...e.path,n]}function im(n,e,t=dm){zb(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),s9(n,e),c9(n,e),a9(n,e),o9(n,e)}function ak(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),sm(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function om(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function o9(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function zb(n,e){let t=wk(n);e.validator!==null?n.setValidators(ik(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Ck(n);e.asyncValidator!==null?n.setAsyncValidators(ik(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();om(e._rawValidators,i),om(e._rawAsyncValidators,i)}function sm(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=wk(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=Ck(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return om(e._rawValidators,r),om(e._rawAsyncValidators,r),t}function s9(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Sk(n,e)})}function a9(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Sk(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Sk(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function c9(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Ak(n,e){n==null,zb(n,e)}function u9(n,e){return sm(n,e)}function Mk(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function l9(n){return Object.getPrototypeOf(n.constructor)===am}function Rk(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Pk(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===_c?t=o:l9(o)?r=o:i=o}),i||r||t||null}function d9(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var h9={provide:yi,useExisting:rn(()=>qb)},Wl=Promise.resolve(),qb=(()=>{class n extends yi{callSetDisabledState;get submitted(){return mt(this.submittedReactive)}_submitted=Gi(()=>this.submittedReactive());submittedReactive=_n(!1);_directives=new Set;form;ngSubmit=new Ge;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new yc({},jb(t),Bb(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Wl.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),im(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Wl.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Wl.then(()=>{let r=this._findContainer(t.path),i=new yc({});Ak(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Wl.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Wl.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Rk(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new rm(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(J(Xl,10),J(cm,10),J(ed,8))};static \u0275dir=Ve({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Te("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[er([h9]),Wt]})}return n})();function ck(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function uk(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Yl=class extends mc{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super($b(t),Hb(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),lm(t)&&(t.nonNullable||t.initialValueIsDefault)&&(uk(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Zl(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ck(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ck(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){uk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var f9=n=>n instanceof Yl;var p9={provide:As,useExisting:rn(()=>vi)},lk=Promise.resolve(),vi=(()=>{class n extends As{_changeDetectorRef;callSetDisabledState;control=new Yl;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ge;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Pk(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Mk(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){im(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){lk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Nf(r);lk.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Dk(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(J(yi,9),J(Xl,10),J(cm,10),J(vc,10),J(wa,8),J(ed,8))};static \u0275dir=Ve({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[er([p9]),Wt,Kr]})}return n})();var hm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ve({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var Ok=new B("");var g9={provide:yi,useExisting:rn(()=>Gb)},Gb=(()=>{class n extends yi{callSetDisabledState;get submitted(){return mt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Gi(()=>this._submittedReactive());_submittedReactive=_n(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Ge;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(sm(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return im(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ak(t.control||null,t,!1),d9(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),Rk(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new rm(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(ak(r||null,t),f9(i)&&(im(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);Ak(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&u9(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){zb(this.form,this),this._oldForm&&sm(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(J(Xl,10),J(cm,10),J(ed,8))};static \u0275dir=Ve({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Te("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[er([g9]),Wt,Kr]})}return n})();var m9={provide:As,useExisting:rn(()=>Wb)},Wb=(()=>{class n extends As{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Ge;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Pk(this,o)}ngOnChanges(t){this._added||this._setUpControl(),Mk(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Dk(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(J(yi,13),J(Xl,10),J(cm,10),J(vc,10),J(Ok,8))};static \u0275dir=Ve({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[er([m9]),Wt,Kr]})}return n})();var y9={provide:vc,useExisting:rn(()=>wo),multi:!0};function Nk(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function v9(n){return n.split(":")[0]}var wo=(()=>{class n extends am{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=M(Ft).injector;destroyRef=M(xn);cdr=M(wa);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Iu({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=Nk(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=v9(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})();static \u0275dir=Ve({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Te("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[er([y9]),Wt]})}return n})(),Ec=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Nk(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(J(Qr),J(Bi),J(wo,9))};static \u0275dir=Ve({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),_9={provide:vc,useExisting:rn(()=>xk),multi:!0};function dk(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function E9(n){return n.split(":")[0]}var xk=(()=>{class n extends am{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=E9(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})();static \u0275dir=Ve({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Te("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[er([_9]),Wt]})}return n})(),Ic=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(dk(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(dk(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(J(Qr),J(Bi),J(xk,9))};static \u0275dir=Ve({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var I9=(()=>{class n{_validator=Zg;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Zg,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ve({type:n,features:[Kr]})}return n})();var w9={provide:Xl,useExisting:rn(()=>Kb),multi:!0};var Kb=(()=>{class n extends I9{required;inputName="required";normalizeInput=Nf;createValidator=t=>pk;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})();static \u0275dir=Ve({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Cf("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[er([w9]),Wt]})}return n})();var kk=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jr({type:n});static \u0275inj=hr({})}return n})(),Fb=class extends mc{constructor(e,t,r){super($b(t),Hb(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Tk(this,!1,e),e.forEach((r,i)=>{bk(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Zl(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function hk(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Fk=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return hk(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new yc(i,o)}record(t,r=null){let i=this._reduceControls(t);return new kb(i,r)}control(t,r,i){let o={};return this.useNonNullable?(hk(r)?o=r:(o.validators=r,o.asyncValidators=i),new Yl(t,de(V({},o),{nonNullable:!0}))):new Yl(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new Fb(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Yl)return t;if(t instanceof mc)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xr=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ed,useValue:t.callSetDisabledState??dm}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jr({type:n});static \u0275inj=hr({imports:[kk]})}return n})(),Lk=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ok,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:ed,useValue:t.callSetDisabledState??dm}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jr({type:n});static \u0275inj=hr({imports:[kk]})}return n})();var Xt=class n{firestore=M(Ds);platformId=M(In);get isBrowser(){return Yi(this.platformId)}getAllUsers(){return this.isBrowser?(console.log("Fetching all users from Firestore..."),Ss(Or(this.firestore,"users"),{idField:"id"})):W([])}getUserById(e){return this.isBrowser?(console.log(`Fetching user with ID: ${e}`),Nb(mi(this.firestore,"users",e),{idField:"id"})):W(null)}getUserByDni(e){if(!this.isBrowser)return W([]);console.log(`Querying user by dni: ${e}`);let t=Kg(Or(this.firestore,"users"),Yg("dni","==",Number(e)));return Ss(t,{idField:"id"})}getAllEvents(){return this.isBrowser?(console.log("Fetching all events from Firestore..."),Ss(Or(this.firestore,"events"),{idField:"id"})):W([])}getEventById(e){return this.isBrowser?(console.log(`Fetching event with ID: ${e}`),Nb(mi(this.firestore,"events",e),{idField:"id"})):W(null)}getAllInscriptions(){return this.isBrowser?(console.log("Fetching all inscriptions from Firestore..."),Ss(Or(this.firestore,"inscriptions"),{idField:"id"})):W([])}getUserInscriptions(e){if(!this.isBrowser)return W([]);console.log(`Fetching inscriptions for user: ${e}`);let t=Kg(Or(this.firestore,"inscriptions"),Yg("userId","==",e));return Ss(t,{idField:"id"})}getEventInscriptions(e){if(!this.isBrowser)return W([]);console.log(`Fetching inscriptions for event: ${e}`);let t=Kg(Or(this.firestore,"inscriptions"),Yg("eventId","==",e));return Ss(t,{idField:"id"})}createUser(e){return this.isBrowser?(console.log("Creating new user:",e),Gg(Or(this.firestore,"users"),e).then(t=>t.id)):Promise.reject("Firestore disabled during SSR/prerender")}createEvent(e){return this.isBrowser?(console.log("Creating new event:",e),Gg(Or(this.firestore,"events"),e).then(t=>t.id)):Promise.reject("Firestore disabled during SSR/prerender")}createInscription(e){return this.isBrowser?(console.log("Creating new inscription:",e),Gg(Or(this.firestore,"inscriptions"),e).then(t=>t.id)):Promise.reject("Firestore disabled during SSR/prerender")}updateUser(e,t){return this.isBrowser?(console.log(`Updating user ${e}:`,t),Qg(mi(this.firestore,"users",e),t)):Promise.reject("Firestore disabled during SSR/prerender")}updateEvent(e,t){return this.isBrowser?(console.log(`Updating event ${e}:`,t),Qg(mi(this.firestore,"events",e),t)):Promise.reject("Firestore disabled during SSR/prerender")}deleteUser(e){return this.isBrowser?(console.log(`Deleting user: ${e}`),Wg(mi(this.firestore,"users",e))):Promise.reject("Firestore disabled during SSR/prerender")}deleteEvent(e){return this.isBrowser?(console.log(`Deleting event: ${e}`),Wg(mi(this.firestore,"events",e))):Promise.reject("Firestore disabled during SSR/prerender")}deleteInscription(e){return this.isBrowser?(console.log(`Deleting inscription: ${e}`),Wg(mi(this.firestore,"inscriptions",e))):Promise.reject("Firestore disabled during SSR/prerender")}updateInscription(e,t){return this.isBrowser?(console.log(`Updating inscription ${e}:`,t),Qg(mi(this.firestore,"inscriptions",e),t)):Promise.reject("Firestore disabled during SSR/prerender")}testConnection(){this.isBrowser&&(console.group("\u{1F525} Firestore Service - Connection Test"),console.log("\u{1F4CB} Fetching all users..."),this.getAllUsers().subscribe(e=>console.log("Users:",e),e=>console.error("Error fetching users:",e),()=>console.log("Users fetch completed")),console.log("\u{1F4C5} Fetching all events..."),this.getAllEvents().subscribe(e=>console.log("Events:",e),e=>console.error("Error fetching events:",e),()=>console.log("Events fetch completed")),console.log("\u270D\uFE0F  Fetching all inscriptions..."),this.getAllInscriptions().subscribe(e=>console.log("Inscriptions:",e),e=>console.error("Error fetching inscriptions:",e),()=>console.log("Inscriptions fetch completed")),console.groupEnd())}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var Hn=class n{platformId=M(In);firestoreService=M(Xt);currentUserSubject=new lt(this.loadUserFromStorage());currentUser$=this.currentUserSubject.asObservable();constructor(){this.currentUser$.subscribe(e=>{console.log("[AuthService] current user:",e)})}login(e,t){return _(this,null,function*(){try{let i=this.firestoreService.getUserByDni(Number(e)),o=yield cy(i);if(!o||o.length===0)return!1;let s=o[0];if(s.password!==t)return!1;let r=s,{password:a}=r,u=Td(r,["password"]);return this.setUser(u),!0}catch(i){return console.error("[AuthService] login error:",i),!1}})}logout(){this.currentUserSubject.next(null),Yi(this.platformId)&&localStorage.removeItem("currentUser")}getCurrentUser(){return this.currentUserSubject.value}isAuthenticated(){return!!this.currentUserSubject.value}isAdmin(){return!!this.currentUserSubject.value?.isAdmin}setUser(e){this.currentUserSubject.next(e),Yi(this.platformId)&&localStorage.setItem("currentUser",JSON.stringify(e))}loadUserFromStorage(){if(!Yi(this.platformId))return null;let e=localStorage.getItem("currentUser");if(!e)return null;try{return JSON.parse(e)}catch(t){return console.error("[AuthService] Failed to parse stored user:",t),null}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};function b9(n,e){n&1&&(R(0,"span",11),N(1," DNI es requerido "),S())}function T9(n,e){n&1&&(R(0,"span",11),N(1," Contrase\xF1a es requerida "),S())}function D9(n,e){if(n&1&&(R(0,"div",12),N(1),S()),n&2){let t=Z();F(),Ue(" ",t.errorMessage," ")}}var fm=class n{constructor(e,t,r){this.fb=e;this.authService=t;this.router=r;this.loginForm=this.fb.group({dni:["",[Jl.required]],password:["",[Jl.required]]})}loginForm;errorMessage="";isLoading=!1;get dni(){return this.loginForm.get("dni")}get password(){return this.loginForm.get("password")}onSubmit(){if(this.loginForm.invalid)return;this.isLoading=!0,this.errorMessage="";let{dni:e,password:t}=this.loginForm.value;_(this,null,function*(){(yield this.authService.login(Number(e),t))?this.router.navigate(["/home"]):(this.errorMessage="DNI o contrase\xF1a incorrectos",this.isLoading=!1)})}static \u0275fac=function(t){return new(t||n)(J(Fk),J(Hn),J(wr))};static \u0275cmp=ft({type:n,selectors:[["app-login"]],decls:20,vars:10,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","dni"],["type","text","id","dni","formControlName","dni","placeholder","Ingrese su DNI"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Ingrese su contrase\xF1a"],["class","error-banner",4,"ngIf"],["type","submit",1,"login-button",3,"disabled"],[1,"error-message"],[1,"error-banner"]],template:function(t,r){t&1&&(R(0,"div",0)(1,"div",1)(2,"h1"),N(3,"Paseo del Artesano"),S(),R(4,"h2"),N(5,"Iniciar Sesi\xF3n"),S(),R(6,"form",2),Te("ngSubmit",function(){return r.onSubmit()}),R(7,"div",3)(8,"label",4),N(9,"DNI"),S(),Dt(10,"input",5),pe(11,b9,2,0,"span",6),S(),R(12,"div",3)(13,"label",7),N(14,"Contrase\xF1a"),S(),Dt(15,"input",8),pe(16,T9,2,0,"span",6),S(),pe(17,D9,2,1,"div",9),R(18,"button",10),N(19),S()()()()),t&2&&(F(6),q("formGroup",r.loginForm),F(4),kn("error",(r.dni==null?null:r.dni.invalid)&&(r.dni==null?null:r.dni.touched)),F(),q("ngIf",(r.dni==null?null:r.dni.invalid)&&(r.dni==null?null:r.dni.touched)),F(4),kn("error",(r.password==null?null:r.password.invalid)&&(r.password==null?null:r.password.touched)),F(),q("ngIf",(r.password==null?null:r.password.invalid)&&(r.password==null?null:r.password.touched)),F(),q("ngIf",r.errorMessage),F(),q("disabled",r.loginForm.invalid||r.isLoading),F(),Ue(" ",r.isLoading?"Cargando...":"Iniciar Sesi\xF3n"," "))},dependencies:[Vt,Qt,Lk,hm,_c,Nr,um,Gb,Wb],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#234b2a,#2f9c19c9);padding:20px}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:40px;width:100%;max-width:400px;box-shadow:0 10px 25px #0003}.login-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 10px;color:#333;text-align:center;font-size:24px}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 30px;color:#666;text-align:center;font-size:18px;font-weight:500}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#333;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border-color:#ef4444}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:12px;margin-top:-4px}.error-banner[_ngcontent-%COMP%]{background-color:#fee2e2;color:#dc2626;padding:12px;border-radius:4px;font-size:14px;border-left:4px solid #dc2626}.login-button[_ngcontent-%COMP%]{padding:12px;background:linear-gradient(135deg,#234b2a,#2f9c19c9);color:#fff;border:none;border-radius:4px;font-size:16px;font-weight:600;cursor:pointer;transition:opacity .3s}.login-button[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9}.login-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.demo-info[_ngcontent-%COMP%]{margin-top:30px;padding-top:20px;border-top:1px solid #eee;font-size:12px;color:#666}.demo-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0}.demo-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{font-weight:600;color:#333}"]})};function S9(n,e){n&1&&(R(0,"button",13),N(1,"Guardar"),S())}function A9(n,e){if(n&1){let t=Kt();R(0,"button",14),Te("click",function(){tt(t);let i=Z(2);return nt(i.cancelForm())}),N(1,"Cancelar"),S()}}function M9(n,e){if(n&1){let t=Kt();R(0,"div",5)(1,"h3"),N(2),S(),R(3,"form",6),Te("ngSubmit",function(){tt(t);let i=Z();return nt(i.saveDate())}),R(4,"div",7)(5,"label"),N(6,"Fecha:"),S(),R(7,"input",8),Ln("ngModelChange",function(i){tt(t);let o=Z();return Xn(o.currentDate.date,i)||(o.currentDate.date=i),nt(i)}),S()(),R(8,"div",7)(9,"label"),N(10,"Hora:"),S(),R(11,"input",9),Ln("ngModelChange",function(i){tt(t);let o=Z();return Xn(o.currentDate.time,i)||(o.currentDate.time=i),nt(i)}),S()(),R(12,"div",10),pe(13,S9,2,0,"button",11)(14,A9,2,0,"button",12),S()()()}if(n&2){let t=Z();F(2),Ie(t.isEditing?"Editar Fecha":"Crear Nueva Fecha"),F(5),Fn("ngModel",t.currentDate.date),F(4),Fn("ngModel",t.currentDate.time),F(2),q("ngIf",!t.isSaving),F(),q("ngIf",!t.isSaving)}}function R9(n,e){if(n&1){let t=Kt();R(0,"tr")(1,"td"),N(2),tr(3,"date"),S(),R(4,"td"),N(5),S(),R(6,"td")(7,"label",17)(8,"input",18),Ln("ngModelChange",function(i){let o=tt(t).$implicit;return Xn(o.enabled,i)||(o.enabled=i),nt(i)}),Te("change",function(){let i=tt(t).$implicit,o=Z(2);return nt(o.updateDateStatus(i))}),S(),Dt(9,"span",19),S(),N(10),S(),R(11,"td",20)(12,"button",21),Te("click",function(){let i=tt(t).$implicit,o=Z(2);return nt(o.deleteDate(i.id))}),N(13,"Eliminar"),S()()()}if(n&2){let t=e.$implicit;kn("disabled",!t.enabled),F(2),Ie(nr(3,8,t.date,"dd/MM/yyyy")),F(3),Ie(t.time),F(3),q("name",j_("enabled_",t.id)),Fn("ngModel",t.enabled),F(2),Ue(" ",t.enabled?"Activo":"Inactivo"," ")}}function P9(n,e){if(n&1&&(R(0,"table",15)(1,"thead")(2,"tr")(3,"th"),N(4,"Fecha"),S(),R(5,"th"),N(6,"Hora"),S(),R(7,"th"),N(8,"Estado"),S(),R(9,"th"),N(10,"Acciones"),S()()(),R(11,"tbody"),pe(12,R9,14,11,"tr",16),S()()),n&2){let t=Z();F(12),q("ngForOf",t.datesList)}}function O9(n,e){n&1&&(R(0,"div",22)(1,"p"),N(2,"No hay fechas creadas. Crea una nueva fecha para comenzar."),S()())}var nd=class n{datesList=[];showForm=!1;isEditing=!1;isSaving=!1;currentDate=this.createEmptyDate();checkInterval;firestore=M(Xt);ngOnInit(){this.loadDates(),this.checkEventStatus(),this.checkInterval=setInterval(()=>this.checkEventStatus(),6e4)}constructor(){this.firestore.testConnection()}ngOnDestroy(){this.checkInterval&&clearInterval(this.checkInterval)}createEmptyDate(){return{id:"",eventName:"",date:"",time:"",enabled:!0}}loadDates(){this.firestore.getAllEvents().subscribe(e=>{this.datesList=e.map(t=>({id:t.id,eventName:t.eventName??t.name??"Evento",date:t.date??(t.eventDate?new Date(t.eventDate.seconds?t.eventDate.seconds*1e3:t.eventDate).toISOString().split("T")[0]:""),time:t.time??"",enabled:t.enabled??!0})),this.checkEventStatus()},e=>{console.error("Error loading events from Firestore:",e)})}checkEventStatus(){let e=new Date;this.datesList.forEach(t=>{let r=new Date(`${t.date}T${t.time}`),i=new Date(r.getTime()-7200*1e3);e>=i&&e<r&&(t.enabled=!1)})}openCreateForm(){this.currentDate=this.createEmptyDate(),this.isEditing=!1,this.showForm=!0}editDate(e){this.currentDate=V({},e),this.isEditing=!0,this.showForm=!0}saveDate(){if(this.isSaving)return;this.isSaving=!0;let e={eventName:this.currentDate.eventName,date:this.currentDate.date,time:this.currentDate.time,enabled:this.currentDate.enabled};(this.isEditing?this.firestore.updateEvent(this.currentDate.id,e):this.firestore.createEvent(e)).then(()=>{this.showForm=!1,this.currentDate=this.createEmptyDate(),this.loadDates()}).catch(r=>console.error("Error saving event:",r)).finally(()=>{this.isSaving=!1})}cancelForm(){this.showForm=!1,this.currentDate=this.createEmptyDate()}deleteDate(e){confirm("\xBFEst\xE1 seguro de que desea eliminar esta fecha?")&&this.firestore.deleteEvent(e).then(()=>{this.datesList=this.datesList.filter(t=>t.id!==e)}).catch(t=>console.error("Error deleting event:",t))}updateDateStatus(e){this.firestore.updateEvent(e.id,{enabled:e.enabled}).catch(t=>console.error("Error updating event status:",t))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ft({type:n,selectors:[["app-admin-dates"]],decls:10,vars:3,consts:[[1,"admin-dates-container"],[1,"btn-create-date",3,"click"],["class","date-form",4,"ngIf"],["class","dates-table",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"date-form"],[3,"ngSubmit"],[1,"form-group"],["name","date","type","date","required","",3,"ngModelChange","ngModel"],["name","time","type","time","required","",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit","class","btn-save",4,"ngIf"],["type","button","class","btn-cancel",3,"click",4,"ngIf"],["type","submit",1,"btn-save"],["type","button",1,"btn-cancel",3,"click"],[1,"dates-table"],[3,"disabled",4,"ngFor","ngForOf"],[1,"toggle-switch"],["type","checkbox",3,"ngModelChange","change","ngModel","name"],[1,"slider"],[1,"actions"],[1,"btn-delete",3,"click"],[1,"empty-state"]],template:function(t,r){t&1&&(R(0,"div",0)(1,"h2"),N(2,"Gesti\xF3n de Fechas"),S(),R(3,"p"),N(4,"Panel de administraci\xF3n para gestionar las fechas de los eventos."),S(),R(5,"button",1),Te("click",function(){return r.openCreateForm()}),N(6,"+ Crear Nueva Fecha"),S(),pe(7,M9,15,5,"div",2)(8,P9,13,1,"table",3)(9,O9,3,0,"div",4),S()),t&2&&(F(7),q("ngIf",r.showForm),F(),q("ngIf",!r.showForm),F(),q("ngIf",r.datesList.length===0&&!r.showForm))},dependencies:[Vt,un,Qt,xr,hm,_c,Lb,Nr,um,Kb,vi,qb,ir],styles:['.admin-dates-container[_ngcontent-%COMP%]{padding:20px;margin:0 auto}.admin-dates-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#333;font-size:28px;margin-bottom:10px}.admin-dates-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:20px}.admin-dates-container[_ngcontent-%COMP%]   .btn-create-date[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:none;padding:10px 20px;font-size:14px;border-radius:4px;cursor:pointer;margin-bottom:20px;transition:background-color .3s ease}.admin-dates-container[_ngcontent-%COMP%]   .btn-create-date[_ngcontent-%COMP%]:hover{background-color:#45a049}.admin-dates-container[_ngcontent-%COMP%]   .date-form[_ngcontent-%COMP%]{background-color:#f9f9f9;border:1px solid #ddd;padding:20px;border-radius:8px;margin-bottom:20px}.admin-dates-container[_ngcontent-%COMP%]   .date-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#333;font-size:20px;margin-bottom:15px}.admin-dates-container[_ngcontent-%COMP%]   .date-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.admin-dates-container[_ngcontent-%COMP%]   .date-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;flex-direction:column}.admin-dates-container[_ngcontent-%COMP%]   .date-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:5px;color:#333;font-size:14px}.admin-dates-container[_ngcontent-%COMP%]   .date-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;font-family:inherit}.admin-dates-container[_ngcontent-%COMP%]   .date-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4caf50;box-shadow:0 0 5px #4caf504d}.admin-dates-container[_ngcontent-%COMP%]   .date-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:10px}.admin-dates-container[_ngcontent-%COMP%]   .date-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:600;transition:all .3s ease}.admin-dates-container[_ngcontent-%COMP%]   .date-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button.btn-save[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.admin-dates-container[_ngcontent-%COMP%]   .date-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button.btn-save[_ngcontent-%COMP%]:hover{background-color:#45a049}.admin-dates-container[_ngcontent-%COMP%]   .date-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button.btn-cancel[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.admin-dates-container[_ngcontent-%COMP%]   .date-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#da190b}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff;box-shadow:0 2px 4px #0000001a;border-radius:8px;overflow:hidden}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#f5f5f5;border-bottom:2px solid #ddd}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px;text-align:left;font-weight:600;color:#333;font-size:14px}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;border-bottom:1px solid #eee;font-size:14px;color:#666}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s ease}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.disabled[_ngcontent-%COMP%]{opacity:.6;background-color:#f5f5f5}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.disabled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#999}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   .toggle-switch[_ngcontent-%COMP%]{display:inline-flex;align-items:center;cursor:pointer;margin-right:8px}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   .toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   .toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{width:40px;height:20px;background-color:#ccc;border-radius:20px;position:relative;transition:background-color .3s ease}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   .toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:after{content:"";position:absolute;width:16px;height:16px;background-color:#fff;border-radius:50%;top:2px;left:2px;transition:left .3s ease}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   .toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#4caf50}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   .toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:after{left:22px}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:12px;font-weight:600;transition:all .3s ease}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button.btn-edit[_ngcontent-%COMP%]{background-color:#2196f3;color:#fff}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button.btn-edit[_ngcontent-%COMP%]:hover{background-color:#0b7dda}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button.btn-delete[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.admin-dates-container[_ngcontent-%COMP%]   .dates-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button.btn-delete[_ngcontent-%COMP%]:hover{background-color:#da190b}.admin-dates-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#999;font-size:16px;background-color:#f9f9f9;border-radius:8px;border:1px solid #eee}']})};var Vk=n=>({"high-attendance":n});function N9(n,e){if(n&1&&(R(0,"tr",15)(1,"td"),N(2),tr(3,"date"),S(),R(4,"td",16),N(5),S(),R(6,"td",17),N(7),S(),R(8,"td",18),N(9),S(),R(10,"td",16),N(11),S()()),n&2){let t=e.$implicit;q("ngClass",Ia(9,Vk,t.attended/t.totalAttendees>.7)),F(2),Ie(nr(3,6,t.date,"dd/MM/yyyy")),F(3),Ie(t.totalAttendees),F(2),Ie(t.attended),F(2),Ie(t.absent),F(2),Ue("",(t.attended/t.totalAttendees*100).toFixed(0),"%")}}function x9(n,e){if(n&1&&(R(0,"div",12)(1,"table",13)(2,"thead")(3,"tr")(4,"th"),N(5,"Fecha"),S(),R(6,"th"),N(7,"Total Asistentes"),S(),R(8,"th"),N(9,"Asistieron"),S(),R(10,"th"),N(11,"Ausentes"),S(),R(12,"th"),N(13,"Tasa Asistencia"),S()()(),R(14,"tbody"),pe(15,N9,12,11,"tr",14),S()()()),n&2){let t=Z(2);F(15),q("ngForOf",t.attendancePerDay)}}function k9(n,e){if(n&1&&(R(0,"div",10)(1,"h3"),N(2,"Asistencia por D\xEDa"),S(),pe(3,x9,16,1,"div",11),S()),n&2){let t=Z();F(3),q("ngIf",t.attendancePerDay.length>0)}}function F9(n,e){if(n&1&&(R(0,"tr",15)(1,"td"),N(2),S(),R(3,"td",17),N(4),S(),R(5,"td",18),N(6),S(),R(7,"td",16),N(8),S(),R(9,"td",16)(10,"span",19),N(11),S()()()),n&2){let t=e.$implicit,r=Z(3);q("ngClass",Ia(6,Vk,r.getAttendanceRate(t)>70)),F(2),Ie(t.emprendimiento),F(2),Ie(t.attended),F(2),Ie(t.absent),F(2),Ie(t.registered),F(3),Ue("",r.getAttendanceRate(t),"%")}}function L9(n,e){if(n&1&&(R(0,"div",12)(1,"table",13)(2,"thead")(3,"tr")(4,"th"),N(5,"Emprendimiento"),S(),R(6,"th"),N(7,"Asistieron"),S(),R(8,"th"),N(9,"Ausentes"),S(),R(10,"th"),N(11,"Registrados"),S(),R(12,"th"),N(13,"Tasa Asistencia"),S()()(),R(14,"tbody"),pe(15,F9,12,8,"tr",14),S()()()),n&2){let t=Z(2);F(15),q("ngForOf",t.emprendimientoStats)}}function V9(n,e){if(n&1&&(R(0,"div",10)(1,"h3"),N(2,"Estad\xEDsticas por Emprendimiento"),S(),pe(3,L9,16,1,"div",11),S()),n&2){let t=Z();F(3),q("ngIf",t.emprendimientoStats.length>0)}}function U9(n,e){if(n&1&&(R(0,"div",23)(1,"div",24),N(2),S(),R(3,"div",25)(4,"h4"),N(5),S(),R(6,"div",26)(7,"span",27),N(8),S(),R(9,"span",28),N(10),S()()(),R(11,"div",29),N(12),S()()),n&2){let t=e.$implicit,r=e.index,i=Z(3);F(2),Ie(r+1),F(3),Ie(t.emprendimiento),F(3),Ue("",t.attended," asistieron"),F(2),Ue("",t.registered," registrados"),F(2),Ue("",i.getAttendanceRate(t),"%")}}function j9(n,e){if(n&1&&(R(0,"div",21),pe(1,U9,13,5,"div",22),S()),n&2){let t=Z(2);F(),q("ngForOf",t.topAssistance)}}function B9(n,e){if(n&1&&(R(0,"div",10)(1,"h3"),N(2,"Top Emprendimientos - Mayor Asistencia"),S(),pe(3,j9,2,1,"div",20),S()),n&2){let t=Z();F(3),q("ngIf",t.topAssistance.length>0)}}function $9(n,e){if(n&1&&(R(0,"div",23)(1,"div",24),N(2),S(),R(3,"div",25)(4,"h4"),N(5),S(),R(6,"div",26)(7,"span",30),N(8),S(),R(9,"span",28),N(10),S()()(),R(11,"div",29),N(12),S()()),n&2){let t=e.$implicit,r=e.index;F(2),Ie(r+1),F(3),Ie(t.emprendimiento),F(3),Ue("",t.absent," ausentes"),F(2),Ue("",t.registered," registrados"),F(2),Ue("",(t.absent/t.registered*100).toFixed(0),"%")}}function H9(n,e){if(n&1&&(R(0,"div",21),pe(1,$9,13,5,"div",22),S()),n&2){let t=Z(2);F(),q("ngForOf",t.topAbsence)}}function z9(n,e){if(n&1&&(R(0,"div",10)(1,"h3"),N(2,"Top Emprendimientos - Mayor Ausencia"),S(),pe(3,H9,2,1,"div",20),S()),n&2){let t=Z();F(3),q("ngIf",t.topAbsence.length>0)}}var rd=class n{events=[];attendees=[];selectedReport="attendees-per-day";attendancePerDay=[];emprendimientoStats=[];topAssistance=[];topAbsence=[];ngOnInit(){this.loadEvents(),this.loadAttendees()}loadEvents(){M(Xt).getAllEvents().subscribe(t=>{this.events=t.map(r=>({id:r.id,eventName:r.eventName??r.name,date:r.date??"",time:r.time??"",enabled:r.enabled??!0})).filter(r=>r.enabled),this.generateReports()})}loadAttendees(){M(Xt).getAllInscriptions().subscribe(t=>{this.attendees=t.map(r=>({id:r.id,name:r.name??r.nameLastName??r.userName??"Participante",emprendimiento:r.nameShop??r.emprendimiento??"",eventId:r.eventId?.toString()??(r.idEvent?String(r.idEvent):""),status:r.status==="Asistio"||r.assisted?"Asistio":r.status==="No asistio"?"No asistio":"Anotado"})),this.generateReports()})}generateReports(){this.generateAttendancePerDay(),this.generateEmprendimientoStats(),this.generateTopPerformers()}generateAttendancePerDay(){let e=new Map;this.events.forEach(t=>{let r=this.attendees.filter(s=>s.eventId===t.id),i=r.filter(s=>s.status==="Asistio").length,o=r.filter(s=>s.status==="No asistio").length;e.set(t.date,{date:t.date,totalAttendees:r.length,attended:i,absent:o})}),this.attendancePerDay=Array.from(e.values()).sort((t,r)=>new Date(r.date).getTime()-new Date(t.date).getTime())}generateEmprendimientoStats(){let e=new Map;this.attendees.forEach(t=>{e.has(t.emprendimiento)||e.set(t.emprendimiento,{emprendimiento:t.emprendimiento,attended:0,absent:0,registered:0});let r=e.get(t.emprendimiento);r.registered++,t.status==="Asistio"?r.attended++:t.status==="No asistio"&&r.absent++}),this.emprendimientoStats=Array.from(e.values()).sort((t,r)=>r.registered-t.registered)}generateTopPerformers(){this.topAssistance=[...this.emprendimientoStats].sort((e,t)=>t.attended-e.attended).slice(0,5),this.topAbsence=[...this.emprendimientoStats].sort((e,t)=>t.absent-e.absent).slice(0,5)}onReportChange(){}exportToCSV(){let e="data:text/csv;charset=utf-8,";this.selectedReport==="attendees-per-day"?(e+=`Fecha,Total Asistentes,Asistieron,Ausentes
`,this.attendancePerDay.forEach(t=>{e+=`${t.date},${t.totalAttendees},${t.attended},${t.absent}
`})):this.selectedReport==="emprendimiento-stats"&&(e+=`Emprendimiento,Asistieron,Ausentes,Registrados
`,this.emprendimientoStats.forEach(t=>{e+=`${t.emprendimiento},${t.attended},${t.absent},${t.registered}
`})),this.downloadFile(e,"reporte.csv")}exportToPDF(){let e=`REPORTE DE EVENTOS - PASEO DEL ARTESANO

`;e+=`Fecha de generaci\xF3n: ${new Date().toLocaleDateString("es-ES")}

`,this.selectedReport==="attendees-per-day"?(e+=`=== ASISTENCIA POR D\xCDA ===

`,this.attendancePerDay.forEach(r=>{e+=`Fecha: ${r.date}
`,e+=`  Total Asistentes: ${r.totalAttendees}
`,e+=`  Asistieron: ${r.attended}
`,e+=`  Ausentes: ${r.absent}

`})):this.selectedReport==="emprendimiento-stats"&&(e+=`=== ESTAD\xCDSTICAS POR EMPRENDIMIENTO ===

`,this.emprendimientoStats.forEach(r=>{e+=`${r.emprendimiento}
`,e+=`  Asistieron: ${r.attended}
`,e+=`  Ausentes: ${r.absent}
`,e+=`  Registrados: ${r.registered}

`}));let t="data:text/plain;charset=utf-8,"+encodeURIComponent(e);this.downloadFile(t,"reporte.txt")}downloadFile(e,t){let r=document.createElement("a");r.setAttribute("href",e),r.setAttribute("download",t),r.click()}getAttendanceRate(e){return e.registered===0?0:Math.round(e.attended/e.registered*100)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ft({type:n,selectors:[["app-admin-reports"]],decls:22,vars:5,consts:[[1,"admin-reports-container"],[1,"reports-controls"],[1,"selector-section"],["for","reportSelect"],["id","reportSelect",1,"report-selector",3,"ngModelChange","change","ngModel"],["value","attendees-per-day"],["value","emprendimiento-stats"],["value","top-assistance"],["value","top-absence"],["class","report-section",4,"ngIf"],[1,"report-section"],["class","table-container",4,"ngIf"],[1,"table-container"],[1,"report-table"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"center"],[1,"center","success"],[1,"center","danger"],[1,"attendance-badge"],["class","rankings-container",4,"ngIf"],[1,"rankings-container"],["class","ranking-card",4,"ngFor","ngForOf"],[1,"ranking-card"],[1,"rank-position"],[1,"rank-info"],[1,"rank-stats"],[1,"stat","success"],[1,"stat"],[1,"rank-percentage"],[1,"stat","danger"]],template:function(t,r){t&1&&(R(0,"div",0)(1,"h2"),N(2,"Reportes"),S(),R(3,"p"),N(4,"Panel de reportes y estad\xEDsticas de eventos."),S(),R(5,"div",1)(6,"div",2)(7,"label",3),N(8,"Selecciona un reporte:"),S(),R(9,"select",4),Ln("ngModelChange",function(o){return Xn(r.selectedReport,o)||(r.selectedReport=o),o}),Te("change",function(){return r.onReportChange()}),R(10,"option",5),N(11,"Asistencia por D\xEDa"),S(),R(12,"option",6),N(13,"Estad\xEDsticas por Emprendimiento"),S(),R(14,"option",7),N(15,"Top Emprendimientos - Asistencia"),S(),R(16,"option",8),N(17,"Top Emprendimientos - Ausencias"),S()()()(),pe(18,k9,4,1,"div",9)(19,V9,4,1,"div",9)(20,B9,4,1,"div",9)(21,z9,4,1,"div",9),S()),t&2&&(F(9),Fn("ngModel",r.selectedReport),F(9),q("ngIf",r.selectedReport==="attendees-per-day"),F(),q("ngIf",r.selectedReport==="emprendimiento-stats"),F(),q("ngIf",r.selectedReport==="top-assistance"),F(),q("ngIf",r.selectedReport==="top-absence"))},dependencies:[Vt,Zo,un,Qt,xr,Ec,Ic,wo,Nr,vi,ir],styles:[".admin-reports-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.admin-reports-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#333;font-size:28px;margin-bottom:10px}.admin-reports-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:25px}.admin-reports-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#444;font-size:20px;margin-bottom:20px;border-bottom:2px solid #f0ad4e;padding-bottom:10px}.admin-reports-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#333;font-size:16px;margin:0 0 8px}.admin-reports-container[_ngcontent-%COMP%]   .reports-controls[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:30px;flex-wrap:wrap;align-items:center;background-color:#f5f5f5;padding:15px;border-radius:8px}.admin-reports-container[_ngcontent-%COMP%]   .reports-controls[_ngcontent-%COMP%]   .selector-section[_ngcontent-%COMP%]{flex:1;min-width:250px}.admin-reports-container[_ngcontent-%COMP%]   .reports-controls[_ngcontent-%COMP%]   .selector-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#333;font-weight:500}.admin-reports-container[_ngcontent-%COMP%]   .reports-controls[_ngcontent-%COMP%]   .selector-section[_ngcontent-%COMP%]   .report-selector[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;cursor:pointer;background-color:#fff;transition:border-color .3s}.admin-reports-container[_ngcontent-%COMP%]   .reports-controls[_ngcontent-%COMP%]   .selector-section[_ngcontent-%COMP%]   .report-selector[_ngcontent-%COMP%]:hover{border-color:#f0ad4e}.admin-reports-container[_ngcontent-%COMP%]   .reports-controls[_ngcontent-%COMP%]   .selector-section[_ngcontent-%COMP%]   .report-selector[_ngcontent-%COMP%]:focus{outline:none;border-color:#f0ad4e;box-shadow:0 0 0 3px #f0ad4e1a}.admin-reports-container[_ngcontent-%COMP%]   .reports-controls[_ngcontent-%COMP%]   .export-section[_ngcontent-%COMP%]{display:flex;gap:10px}.admin-reports-container[_ngcontent-%COMP%]   .reports-controls[_ngcontent-%COMP%]   .export-section[_ngcontent-%COMP%]   .btn-export[_ngcontent-%COMP%]{padding:10px 16px;border:none;border-radius:4px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s;color:#fff}.admin-reports-container[_ngcontent-%COMP%]   .reports-controls[_ngcontent-%COMP%]   .export-section[_ngcontent-%COMP%]   .btn-export.btn-csv[_ngcontent-%COMP%]{background-color:#5cb85c}.admin-reports-container[_ngcontent-%COMP%]   .reports-controls[_ngcontent-%COMP%]   .export-section[_ngcontent-%COMP%]   .btn-export.btn-csv[_ngcontent-%COMP%]:hover{background-color:#4cae4c;box-shadow:0 2px 6px #4caf504d}.admin-reports-container[_ngcontent-%COMP%]   .reports-controls[_ngcontent-%COMP%]   .export-section[_ngcontent-%COMP%]   .btn-export.btn-pdf[_ngcontent-%COMP%]{background-color:#d9534f}.admin-reports-container[_ngcontent-%COMP%]   .reports-controls[_ngcontent-%COMP%]   .export-section[_ngcontent-%COMP%]   .btn-export.btn-pdf[_ngcontent-%COMP%]:hover{background-color:#c9302c;box-shadow:0 2px 6px #c9302c4d}.admin-reports-container[_ngcontent-%COMP%]   .reports-controls[_ngcontent-%COMP%]   .export-section[_ngcontent-%COMP%]   .btn-export[_ngcontent-%COMP%]:active{transform:translateY(1px)}.admin-reports-container[_ngcontent-%COMP%]   .report-section[_ngcontent-%COMP%]{margin-bottom:40px;background-color:#fff;padding:20px;border-radius:8px;border:1px solid #eee;box-shadow:0 1px 3px #0000000d}.admin-reports-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto;border-radius:4px;border:1px solid #ddd}.admin-reports-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.admin-reports-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#2c3e50;color:#fff}.admin-reports-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;font-weight:600;border-bottom:2px solid #1a252f}.admin-reports-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #eee;transition:background-color .3s}.admin-reports-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.admin-reports-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.high-attendance[_ngcontent-%COMP%]{background-color:#f0fdf4}.admin-reports-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;color:#333}.admin-reports-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.center[_ngcontent-%COMP%]{text-align:center}.admin-reports-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.success[_ngcontent-%COMP%]{color:#27ae60;font-weight:500}.admin-reports-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.danger[_ngcontent-%COMP%]{color:#e74c3c;font-weight:500}.admin-reports-container[_ngcontent-%COMP%]   .attendance-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:20px;background-color:#e8f5e9;color:#27ae60;font-weight:600;font-size:13px}.admin-reports-container[_ngcontent-%COMP%]   .rankings-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.admin-reports-container[_ngcontent-%COMP%]   .rankings-container[_ngcontent-%COMP%]   .ranking-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:20px;border-radius:8px;box-shadow:0 4px 12px #667eea26;transition:transform .3s,box-shadow .3s;display:flex;gap:15px;align-items:center}.admin-reports-container[_ngcontent-%COMP%]   .rankings-container[_ngcontent-%COMP%]   .ranking-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 20px #667eea40}.admin-reports-container[_ngcontent-%COMP%]   .rankings-container[_ngcontent-%COMP%]   .ranking-card[_ngcontent-%COMP%]   .rank-position[_ngcontent-%COMP%]{font-size:32px;font-weight:700;min-width:50px;text-align:center;opacity:.8}.admin-reports-container[_ngcontent-%COMP%]   .rankings-container[_ngcontent-%COMP%]   .ranking-card[_ngcontent-%COMP%]   .rank-info[_ngcontent-%COMP%]{flex:1}.admin-reports-container[_ngcontent-%COMP%]   .rankings-container[_ngcontent-%COMP%]   .ranking-card[_ngcontent-%COMP%]   .rank-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin-bottom:10px}.admin-reports-container[_ngcontent-%COMP%]   .rankings-container[_ngcontent-%COMP%]   .ranking-card[_ngcontent-%COMP%]   .rank-info[_ngcontent-%COMP%]   .rank-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-size:13px;opacity:.95}.admin-reports-container[_ngcontent-%COMP%]   .rankings-container[_ngcontent-%COMP%]   .ranking-card[_ngcontent-%COMP%]   .rank-info[_ngcontent-%COMP%]   .rank-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:block}.admin-reports-container[_ngcontent-%COMP%]   .rankings-container[_ngcontent-%COMP%]   .ranking-card[_ngcontent-%COMP%]   .rank-info[_ngcontent-%COMP%]   .rank-stats[_ngcontent-%COMP%]   .stat.success[_ngcontent-%COMP%]{color:#90ee90;font-weight:500}.admin-reports-container[_ngcontent-%COMP%]   .rankings-container[_ngcontent-%COMP%]   .ranking-card[_ngcontent-%COMP%]   .rank-info[_ngcontent-%COMP%]   .rank-stats[_ngcontent-%COMP%]   .stat.danger[_ngcontent-%COMP%]{color:#ffb6c1;font-weight:500}.admin-reports-container[_ngcontent-%COMP%]   .rankings-container[_ngcontent-%COMP%]   .ranking-card[_ngcontent-%COMP%]   .rank-percentage[_ngcontent-%COMP%]{font-size:24px;font-weight:700;text-align:right;min-width:60px}@media (max-width: 768px){.admin-reports-container[_ngcontent-%COMP%]{padding:15px}.admin-reports-container[_ngcontent-%COMP%]   .reports-controls[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.admin-reports-container[_ngcontent-%COMP%]   .reports-controls[_ngcontent-%COMP%]   .selector-section[_ngcontent-%COMP%], .admin-reports-container[_ngcontent-%COMP%]   .reports-controls[_ngcontent-%COMP%]   .export-section[_ngcontent-%COMP%]{width:100%}.admin-reports-container[_ngcontent-%COMP%]   .reports-controls[_ngcontent-%COMP%]   .export-section[_ngcontent-%COMP%]{flex-direction:column}.admin-reports-container[_ngcontent-%COMP%]   .reports-controls[_ngcontent-%COMP%]   .export-section[_ngcontent-%COMP%]   .btn-export[_ngcontent-%COMP%]{width:100%}.admin-reports-container[_ngcontent-%COMP%]   .rankings-container[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function q9(n,e){if(n&1&&(R(0,"option",9),N(1),tr(2,"date"),S()),n&2){let t=e.$implicit;q("value",t.id),F(),Ea(" ",nr(2,3,t.date,"dd/MM/yyyy")," - ",t.time," ")}}function G9(n,e){if(n&1&&(R(0,"div",10)(1,"div",11)(2,"span",12),N(3,"Total Asistentes"),S(),R(4,"span",13),N(5),S()(),R(6,"div",11)(7,"span",12),N(8,"Registrados"),S(),R(9,"span",13),N(10),S()(),R(11,"div",11)(12,"span",12),N(13,"Ausentes"),S(),R(14,"span",13),N(15),S()()()),n&2){let t=Z();F(5),Ie(t.filteredAttendees.length),F(5),Ie(t.getCheckedInCount()),F(5),Ie(t.getAbsentCount())}}function W9(n,e){if(n&1){let t=Kt();R(0,"button",23),Te("click",function(){tt(t);let i=Z().$implicit,o=Z(2);return nt(o.markAttended(i))}),N(1," Asisti\xF3 "),S()}}function K9(n,e){if(n&1){let t=Kt();R(0,"button",24),Te("click",function(){tt(t);let i=Z().$implicit,o=Z(2);return nt(o.markNotAttended(i))}),N(1," No Asisti\xF3 "),S()}}function Q9(n,e){if(n&1){let t=Kt();R(0,"button",25),Te("click",function(){tt(t);let i=Z().$implicit,o=Z(2);return nt(o.resetToRegistered(i))}),N(1," Anotado "),S()}}function Y9(n,e){if(n&1&&(R(0,"tr",17)(1,"td"),N(2),S(),R(3,"td")(4,"span",18),N(5),S()(),R(6,"td",19),pe(7,W9,2,0,"button",20)(8,K9,2,0,"button",21)(9,Q9,2,0,"button",22),S()()),n&2){let t=e.$implicit;q("ngClass","status-"+t.status),F(2),Ie(t.nameShop),F(2),q("ngClass","status-"+t.status),F(),Ue(" ",t.status," "),F(2),q("ngIf",t.status!=="Asistio"),F(),q("ngIf",t.status!=="No asistio"),F(),q("ngIf",t.status!=="Anotado")}}function J9(n,e){if(n&1&&(R(0,"div",14)(1,"table",15)(2,"thead")(3,"tr")(4,"th"),N(5,"Emprendimiento"),S(),R(6,"th"),N(7,"Estado"),S(),R(8,"th"),N(9,"Acciones"),S()()(),R(10,"tbody"),pe(11,Y9,10,7,"tr",16),S()()()),n&2){let t=Z();F(11),q("ngForOf",t.filteredAttendees)}}function Z9(n,e){n&1&&(R(0,"p"),N(1,"Selecciona un evento para ver los asistentes."),S())}function X9(n,e){n&1&&(R(0,"p"),N(1,"No hay asistentes registrados para este evento."),S())}function eW(n,e){if(n&1&&(R(0,"div",26),pe(1,Z9,2,0,"p",27)(2,X9,2,0,"p",27),S()),n&2){let t=Z();F(),q("ngIf",!t.selectedEventId),F(),q("ngIf",t.selectedEventId&&t.filteredAttendees.length===0)}}var id=class n{events=[];attendees=[];filteredAttendees=[];selectedEventId="";firestore=M(Xt);ngOnInit(){this.loadEvents(),this.loadAttendees()}loadEvents(){this.firestore.getAllEvents().subscribe(e=>{this.events=e.map(t=>({id:t.id,eventName:t.eventName??t.name,date:t.date??"",time:t.time??"",enabled:t.enabled??!0})).filter(t=>t.enabled).sort((t,r)=>new Date(r.date).getTime()-new Date(t.date).getTime()),this.events.length>0&&(this.selectedEventId=this.events[0].id),this.filterAttendeesByEvent()})}loadAttendees(){this.firestore.getAllInscriptions().subscribe(e=>{this.attendees=e.map(t=>({id:t.id,nameLastName:t.nameLastName??t.userName??"Participante",nameShop:t.nameShop??t.emprendimiento??"",eventId:t.eventId?.toString()??(t.idEvent?String(t.idEvent):""),status:t.status==="Asistio"||t.assisted?"Asistio":t.status==="No asistio"?"No asistio":"Anotado"})),this.filterAttendeesByEvent()},e=>console.error("Error loading inscriptions:",e))}filterAttendeesByEvent(){this.selectedEventId?this.filteredAttendees=this.attendees.filter(e=>e.eventId===this.selectedEventId):this.filteredAttendees=[]}onEventChange(){this.filterAttendeesByEvent()}getCheckedInCount(){return this.filteredAttendees.filter(e=>e.status==="Asistio").length}getAbsentCount(){return this.filteredAttendees.filter(e=>e.status==="No asistio").length}markAttended(e){e.status="Asistio",this.firestore.updateInscription(e.id,{status:"Asistio",assisted:!0}).catch(t=>console.error(t))}markNotAttended(e){e.status="No asistio",this.firestore.updateInscription(e.id,{status:"No asistio",assisted:!1}).catch(t=>console.error(t))}resetToRegistered(e){e.status="Anotado",this.firestore.updateInscription(e.id,{status:"Anotado"}).catch(t=>console.error(t))}getEventName(e){let t=this.events.find(r=>r.id===e);return t?t.eventName:""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ft({type:n,selectors:[["app-admin-attendance"]],decls:15,vars:5,consts:[[1,"admin-attendance-container"],[1,"event-selector-section"],["for","eventSelect"],["id","eventSelect",1,"event-selector",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","attendance-stats",4,"ngIf"],["class","table-container",4,"ngIf"],["class","empty-state",4,"ngIf"],[3,"value"],[1,"attendance-stats"],[1,"stat-card"],[1,"stat-label"],[1,"stat-value"],[1,"table-container"],[1,"attendees-table"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"status-badge",3,"ngClass"],[1,"actions"],["class","btn-attended","title","Marcar como asisti\xF3",3,"click",4,"ngIf"],["class","btn-notattended","title","Marcar como no asisti\xF3",3,"click",4,"ngIf"],["class","btn-reset","title","Volver a anotado",3,"click",4,"ngIf"],["title","Marcar como asisti\xF3",1,"btn-attended",3,"click"],["title","Marcar como no asisti\xF3",1,"btn-notattended",3,"click"],["title","Volver a anotado",1,"btn-reset",3,"click"],[1,"empty-state"],[4,"ngIf"]],template:function(t,r){t&1&&(R(0,"div",0)(1,"h2"),N(2,"Asistencia"),S(),R(3,"p"),N(4,"Panel de seguimiento de asistencia a eventos."),S(),R(5,"div",1)(6,"label",2),N(7,"Selecciona un evento:"),S(),R(8,"select",3),Ln("ngModelChange",function(o){return Xn(r.selectedEventId,o)||(r.selectedEventId=o),o}),Te("change",function(){return r.onEventChange()}),R(9,"option",4),N(10,"-- Seleccionar evento --"),S(),pe(11,q9,3,6,"option",5),S()(),pe(12,G9,16,3,"div",6)(13,J9,12,1,"div",7)(14,eW,3,2,"div",8),S()),t&2&&(F(8),Fn("ngModel",r.selectedEventId),F(3),q("ngForOf",r.events),F(),q("ngIf",r.selectedEventId&&r.filteredAttendees.length>0),F(),q("ngIf",r.selectedEventId&&r.filteredAttendees.length>0),F(),q("ngIf",!r.selectedEventId||r.filteredAttendees.length===0))},dependencies:[Vt,Zo,un,Qt,xr,Ec,Ic,wo,Nr,vi,ir],styles:[".admin-attendance-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}.admin-attendance-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#333;font-size:28px;margin-bottom:10px}.admin-attendance-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:20px}.admin-attendance-container[_ngcontent-%COMP%]   .event-selector-section[_ngcontent-%COMP%]{margin-bottom:30px}.admin-attendance-container[_ngcontent-%COMP%]   .event-selector-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:14px;min-width:fit-content}.admin-attendance-container[_ngcontent-%COMP%]   .event-selector-section[_ngcontent-%COMP%]   .event-selector[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;font-family:inherit;background-color:#fff;cursor:pointer;width:100%}.admin-attendance-container[_ngcontent-%COMP%]   .event-selector-section[_ngcontent-%COMP%]   .event-selector[_ngcontent-%COMP%]:focus{outline:none;border-color:#4caf50;box-shadow:0 0 5px #4caf504d}.admin-attendance-container[_ngcontent-%COMP%]   .attendance-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-bottom:30px}.admin-attendance-container[_ngcontent-%COMP%]   .attendance-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #e0e0e0;border-radius:8px;padding:20px;box-shadow:0 2px 4px #0000001a;display:flex;flex-direction:column;align-items:center}.admin-attendance-container[_ngcontent-%COMP%]   .attendance-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px;color:#999;font-weight:600;text-transform:uppercase;margin-bottom:10px}.admin-attendance-container[_ngcontent-%COMP%]   .attendance-stats[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#4caf50}.admin-attendance-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-bottom:30px}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff;box-shadow:0 2px 8px #0000001a;border-radius:8px;overflow:hidden}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#f5f5f5;border-bottom:2px solid #ddd}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px;text-align:left;font-weight:600;color:#333;font-size:14px}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;border-bottom:1px solid #eee;font-size:14px;color:#666}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s ease}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.status-Anotado[_ngcontent-%COMP%]{opacity:1}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.status-Asistio[_ngcontent-%COMP%]{background-color:#e8f5e9}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.status-No\\ asistio[_ngcontent-%COMP%]{background-color:#ffebee}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   .status-badge.status-Anotado[_ngcontent-%COMP%]{background-color:#2196f3;color:#fff}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   .status-badge.status-Asistio[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   .status-badge.status-No\\ asistio[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 10px;border:none;border-radius:4px;cursor:pointer;font-size:12px;font-weight:600;transition:all .3s ease;white-space:nowrap}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button.btn-attended[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button.btn-attended[_ngcontent-%COMP%]:hover{background-color:#45a049;box-shadow:0 2px 6px #4caf504d}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button.btn-notattended[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button.btn-notattended[_ngcontent-%COMP%]:hover{background-color:#da190b;box-shadow:0 2px 6px #f443364d}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button.btn-reset[_ngcontent-%COMP%]{background-color:#2196f3;color:#fff}.admin-attendance-container[_ngcontent-%COMP%]   .attendees-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button.btn-reset[_ngcontent-%COMP%]:hover{background-color:#0b7dda;box-shadow:0 2px 6px #2196f34d}.admin-attendance-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#999;font-size:16px;background-color:#f9f9f9;border-radius:8px;border:2px dashed #ddd}.admin-attendance-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#999}"]})};function tW(n,e){if(n&1&&(R(0,"div",5)(1,"p"),N(2),S()()),n&2){let t=Z();F(2),Ie(t.confirmationMessage)}}function nW(n,e){if(n&1){let t=Kt();R(0,"button",14),Te("click",function(){tt(t);let i=Z().$implicit,o=Z();return nt(o.signUpForEvent(i))}),N(1," Inscribirse "),S()}}function rW(n,e){if(n&1){let t=Kt();R(0,"button",15),Te("click",function(){tt(t);let i=Z().$implicit,o=Z();return nt(o.cancelSignup(i))}),N(1," Desinscribirse "),S()}}function iW(n,e){if(n&1&&(R(0,"div",6)(1,"div",7)(2,"div",8)(3,"span",9),N(4,"\u{1F4C5} Fecha:"),S(),R(5,"span",10),N(6),tr(7,"date"),S()(),R(8,"div",8)(9,"span",9),N(10,"\u{1F550} Hora:"),S(),R(11,"span",10),N(12),S()()(),R(13,"div",11),pe(14,nW,2,0,"button",12)(15,rW,2,0,"button",13),S()()),n&2){let t=e.$implicit,r=Z();F(6),Ie(nr(7,4,t.date,"dd/MM/yyyy")),F(6),Ie(t.time),F(2),q("ngIf",!r.isSignedUp(t.id)),F(),q("ngIf",r.isSignedUp(t.id))}}function oW(n,e){n&1&&(R(0,"div",16)(1,"p"),N(2,"No hay eventos disponibles en este momento."),S()())}var od=class n{availableEvents=[];userSignups=new Set;showConfirmation=!1;confirmationMessage="";firestore=M(Xt);authService=M(Hn);ngOnInit(){this.loadEnabledEvents(),this.loadUserSignups()}loadEnabledEvents(){this.firestore.getAllEvents().subscribe(e=>{this.availableEvents=e.map(t=>({id:t.id,eventName:t.eventName??t.name??"Evento",date:t.date??(t.eventDate?new Date(t.eventDate.seconds?t.eventDate.seconds*1e3:t.eventDate).toISOString().split("T")[0]:""),time:t.time??"",enabled:t.enabled??!0})).filter(t=>t.enabled).sort((t,r)=>{let i=new Date(`${t.date}T${t.time}`).getTime();return new Date(`${r.date}T${r.time}`).getTime()-i})},e=>{console.error("Error loading events from Firestore:",e)})}loadUserSignups(){let e=this.authService.getCurrentUser();e?.dni&&this.firestore.getUserInscriptions(String(e.dni)).subscribe(t=>{this.userSignups=new Set(t.map(r=>r.eventId?.toString()??String(r.idEvent)))},t=>{console.error("Error loading user signups:",t)})}signUpForEvent(e){let t=this.authService.getCurrentUser();if(!t?.dni){this.showMessage("Debes estar autenticado para inscribirse");return}this.userSignups.has(e.id)?this.showMessage(`Ya est\xE1s inscrito en ${e.eventName}`):this.firestore.createInscription({userId:String(t.dni),eventId:e.id,status:"Anotado",nameLastName:t.nameLastName,nameShop:t.nameShop,createdAt:new Date().toISOString(),eventDate:e.date,time:e.time}).then(()=>{this.userSignups.add(e.id),this.showMessage("\xA1Te has registrado!")}).catch(r=>{console.error("Error creating inscription:",r),this.showMessage("Error al inscribirse. Intenta de nuevo.")})}cancelSignup(e){if(this.userSignups.has(e.id)){let t=this.authService.getCurrentUser();if(!t?.dni)return;this.firestore.getAllInscriptions().subscribe(r=>{let i=r.find(o=>o.eventId===e.id&&o.userId===String(t.dni));i&&this.firestore.deleteInscription(i.id).then(()=>{this.userSignups.delete(e.id),this.showMessage("Te has dado de baja")}).catch(o=>{console.error("Error deleting inscription:",o),this.showMessage("Error al desinscribirse. Intenta de nuevo.")})},r=>{console.error("Error fetching inscriptions:",r)})}}isSignedUp(e){return this.userSignups.has(e)}showMessage(e){this.confirmationMessage=e,this.showConfirmation=!0,setTimeout(()=>{this.showConfirmation=!1},3e3)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ft({type:n,selectors:[["app-user-signup"]],decls:9,vars:3,consts:[[1,"user-signup-container"],["class","confirmation-dialog",4,"ngIf"],[1,"events-grid"],["class","event-card",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"confirmation-dialog"],[1,"event-card"],[1,"event-details"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],[1,"card-actions"],["class","btn-signup",3,"click",4,"ngIf"],["class","btn-cancel",3,"click",4,"ngIf"],[1,"btn-signup",3,"click"],[1,"btn-cancel",3,"click"],[1,"empty-state"]],template:function(t,r){t&1&&(R(0,"div",0)(1,"h2"),N(2,"Inscribirse"),S(),R(3,"p"),N(4,"Reg\xEDstrate en los eventos disponibles."),S(),pe(5,tW,3,1,"div",1),R(6,"div",2),pe(7,iW,16,7,"div",3),S(),pe(8,oW,3,0,"div",4),S()),t&2&&(F(5),q("ngIf",r.showConfirmation),F(2),q("ngForOf",r.availableEvents),F(),q("ngIf",r.availableEvents.length===0))},dependencies:[Vt,un,Qt,xr,ir],styles:[".user-signup-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.user-signup-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#333;font-size:28px;margin-bottom:10px}.user-signup-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:20px}.user-signup-container[_ngcontent-%COMP%]   .confirmation-dialog[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:15px 20px;border-radius:4px;margin-bottom:20px;animation:_ngcontent-%COMP%_slideIn .3s ease}.user-signup-container[_ngcontent-%COMP%]   .confirmation-dialog[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#fff}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.user-signup-container[_ngcontent-%COMP%]   .events-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;margin-bottom:30px}.user-signup-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #e0e0e0;border-radius:8px;padding:20px;box-shadow:0 2px 8px #0000001a;transition:all .3s ease;display:flex;flex-direction:column}.user-signup-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-4px)}.user-signup-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]   .event-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:15px}.user-signup-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]   .event-card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333;font-size:18px;font-weight:600;flex-grow:1}.user-signup-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]   .event-card-header[_ngcontent-%COMP%]   .event-id[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#666;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:600;white-space:nowrap;margin-left:10px}.user-signup-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]   .event-details[_ngcontent-%COMP%]{margin-bottom:20px;flex-grow:1}.user-signup-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]   .event-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;margin-bottom:10px;font-size:14px}.user-signup-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]   .event-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.user-signup-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]   .event-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-weight:600;color:#555;min-width:80px}.user-signup-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]   .event-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{color:#333}.user-signup-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.user-signup-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:10px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:600;transition:all .3s ease}.user-signup-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   button.btn-signup[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.user-signup-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   button.btn-signup[_ngcontent-%COMP%]:hover{background-color:#45a049;box-shadow:0 2px 6px #4caf504d}.user-signup-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   button.btn-signup[_ngcontent-%COMP%]:active{transform:scale(.98)}.user-signup-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   button.btn-cancel[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.user-signup-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   button.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#da190b;box-shadow:0 2px 6px #f443364d}.user-signup-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   button.btn-cancel[_ngcontent-%COMP%]:active{transform:scale(.98)}.user-signup-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#999;font-size:16px;background-color:#f9f9f9;border-radius:8px;border:2px dashed #ddd}.user-signup-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#999}"]})};var sW=n=>({"disabled-event":n});function aW(n,e){if(n&1&&(R(0,"div",13),N(1),S()),n&2){let t=Z();q("ngClass","message-"+t.messageType),F(),Ue(" ",t.message," ")}}function cW(n,e){if(n&1&&(R(0,"div",16)(1,"div",17)(2,"h3"),N(3),S(),R(4,"span",18),N(5),S()(),R(6,"div",19)(7,"div",20)(8,"span",21),N(9,"\u{1F4C5} Fecha"),S(),R(10,"span",22),N(11),tr(12,"date"),S()()()()),n&2){let t=e.$implicit,r=Z(2);q("ngClass",Ia(9,sW,!t.enabled)),F(3),Ie(t.eventName),F(),q("ngClass","status-"+r.getStatusColor(t.status)),F(),Ue(" ",t.status," "),F(6),Ea(" ",nr(12,6,t.eventDate,"dd/MM/yyyy")," \u{1F550} ",t.time)}}function uW(n,e){if(n&1&&(R(0,"div",14),pe(1,cW,13,11,"div",15),S()),n&2){let t=Z();F(),q("ngForOf",t.filteredSignups)}}function lW(n,e){n&1&&(R(0,"div",23)(1,"p"),N(2,"No hay inscripciones que mostrar."),S(),R(3,"p",24),N(4,"\xA1Reg\xEDstrate en eventos para ver tus inscripciones!"),S()())}var sd=class n{userSignups=[];filteredSignups=[];selectedFilter="all";message="";messageType="success";firestoreService=M(Xt);authService=M(Hn);ngOnInit(){this.authService.currentUser$.subscribe(e=>{e&&e.dni?this.loadUserSignups(e.dni):(this.userSignups=[],this.filteredSignups=[])})}loadUserSignups(e){this.firestoreService.getUserInscriptions(String(e)).subscribe(t=>{this.userSignups=t.map(r=>({id:r.id,eventId:r.eventId?.toString()??(r.idEvent?String(r.idEvent):""),eventName:r.eventName??r.nameShop??"Evento",eventDate:r.eventDate?new Date(r.eventDate.seconds?r.eventDate.seconds*1e3:r.eventDate).toISOString():r.fecha??"",time:r.time??"",enabled:r.enabled??!0,status:r.status??(r.assisted?"attended":"confirmed"),registrationDate:r.registrationDate??r.createdAt??new Date().toISOString()})),this.filterSignups()},t=>{console.error("Error loading user inscriptions:",t),this.userSignups=[],this.filteredSignups=[]})}filterSignups(){switch(this.selectedFilter){case"enabled":this.filteredSignups=this.userSignups.filter(e=>e.enabled);break;case"disabled":this.filteredSignups=this.userSignups.filter(e=>!e.enabled);break;case"confirmed":this.filteredSignups=this.userSignups.filter(e=>e.status==="confirmed");break;case"pending":this.filteredSignups=this.userSignups.filter(e=>e.status==="pending");break;case"attended":this.filteredSignups=this.userSignups.filter(e=>e.status==="attended");break;default:this.filteredSignups=[...this.userSignups].sort((e,t)=>new Date(t.registrationDate).getTime()-new Date(e.registrationDate).getTime())}}onFilterChange(){this.filterSignups(),console.log(this.userSignups,this.filteredSignups)}cancelSignup(e){if(!e.enabled){this.showMessage("No puedes cancelar un evento deshabilitado.","error");return}this.firestoreService.deleteInscription(e.id).then(()=>{this.showMessage("Inscripci\xF3n cancelada correctamente.","success");let t=this.authService.getCurrentUser();t&&t.dni&&this.loadUserSignups(t.dni)}).catch(t=>{console.error("Error deleting inscription:",t),this.showMessage("Error al cancelar la inscripci\xF3n.","error")})}showMessage(e,t){this.message=e,this.messageType=t,setTimeout(()=>{this.message=""},3e3)}getStatusColor(e){switch(e){case"confirmed":return"confirmed";case"pending":return"pending";case"attended":return"attended";default:return"pending"}}formatDate(e){return new Date(e).toLocaleString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ft({type:n,selectors:[["app-user-my-signups"]],decls:24,vars:4,consts:[[1,"user-my-signups-container"],[1,"filter-section"],["for","filterSelect"],["id","filterSelect",1,"filter-select",3,"ngModelChange","change","ngModel"],["value","all"],["value","enabled"],["value","disabled"],["value","confirmed"],["value","pending"],["value","attended"],["class","message",3,"ngClass",4,"ngIf"],["class","signups-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"message",3,"ngClass"],[1,"signups-grid"],["class","signup-card",3,"ngClass",4,"ngFor","ngForOf"],[1,"signup-card",3,"ngClass"],[1,"card-header"],[1,"status-badge",3,"ngClass"],[1,"card-body"],[1,"event-detail"],[1,"detail-label"],[1,"detail-value"],[1,"empty-state"],[1,"sub-text"]],template:function(t,r){t&1&&(R(0,"div",0)(1,"h2"),N(2,"Mis Inscripciones"),S(),R(3,"p"),N(4,"Visualiza tus eventos registrados."),S(),R(5,"div",1)(6,"label",2),N(7,"Filtrar por:"),S(),R(8,"select",3),Ln("ngModelChange",function(o){return Xn(r.selectedFilter,o)||(r.selectedFilter=o),o}),Te("change",function(){return r.onFilterChange()}),R(9,"option",4),N(10,"Todos"),S(),R(11,"option",5),N(12,"Eventos Activos"),S(),R(13,"option",6),N(14,"Eventos Cerrados"),S(),R(15,"option",7),N(16,"Confirmado"),S(),R(17,"option",8),N(18,"Pendiente"),S(),R(19,"option",9),N(20,"Asistido"),S()()(),pe(21,aW,2,2,"div",10)(22,uW,2,1,"div",11)(23,lW,5,0,"div",12),S()),t&2&&(F(8),Fn("ngModel",r.selectedFilter),F(13),q("ngIf",r.message),F(),q("ngIf",r.filteredSignups.length>0),F(),q("ngIf",r.filteredSignups.length===0))},dependencies:[Vt,Zo,un,Qt,xr,Ec,Ic,wo,Nr,vi,ir],styles:[".user-my-signups-container[_ngcontent-%COMP%]{padding:20px;max-width:1000px;margin:0 auto}.user-my-signups-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#333;font-size:28px;margin-bottom:10px}.user-my-signups-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#666;margin-bottom:25px}.user-my-signups-container[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]{margin-bottom:25px;padding:15px;background-color:#f5f5f5;border-radius:8px;display:flex;align-items:center;gap:15px}.user-my-signups-container[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#333;font-weight:500;white-space:nowrap}.user-my-signups-container[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;cursor:pointer;background-color:#fff;transition:border-color .3s}.user-my-signups-container[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]:hover{border-color:#4caf50}.user-my-signups-container[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#4caf50;box-shadow:0 0 0 3px #4caf501a}.user-my-signups-container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding:12px 16px;border-radius:4px;margin-bottom:20px;font-weight:500;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.user-my-signups-container[_ngcontent-%COMP%]   .message.message-success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.user-my-signups-container[_ngcontent-%COMP%]   .message.message-error[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.user-my-signups-container[_ngcontent-%COMP%]   .signups-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px;margin-bottom:30px}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;border:1px solid #eee;box-shadow:0 2px 8px #00000014;overflow:hidden;transition:all .3s ease;display:flex;flex-direction:column}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px #0000001f;transform:translateY(-4px)}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card.disabled-event[_ngcontent-%COMP%]{opacity:.7;background-color:#fafafa}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card.disabled-event[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#f0f0f0}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:16px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;display:flex;justify-content:space-between;align-items:flex-start;gap:10px}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;flex:1}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;white-space:nowrap;text-transform:uppercase}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .status-badge.status-confirmed[_ngcontent-%COMP%]{background-color:#4caf5040;color:#f0f0f0}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .status-badge.status-pending[_ngcontent-%COMP%]{background-color:#ffc10740;color:#f0f0f0}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .status-badge.status-attended[_ngcontent-%COMP%]{background-color:#2196f340;color:#f0f0f0}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:20px;flex:1}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .event-detail[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;gap:10px;margin-bottom:12px;font-size:14px}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .event-detail[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-weight:600;color:#555;min-width:100px}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .event-detail[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{color:#333;text-transform:capitalize}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .event-status[_ngcontent-%COMP%]{margin-top:16px;padding:10px 12px;border-radius:4px;font-size:13px;font-weight:500;text-align:center}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .event-status.status-active[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .event-status.status-inactive[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{padding:12px 16px;border-top:1px solid #eee;background-color:#fafafa}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{width:100%;padding:10px 16px;background-color:#f44336;color:#fff;border:none;border-radius:4px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background-color:#d32f2f;box-shadow:0 2px 6px #f443364d}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:active{transform:translateY(1px)}.user-my-signups-container[_ngcontent-%COMP%]   .signup-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .btn-closed[_ngcontent-%COMP%]{width:100%;padding:10px 16px;background-color:#ccc;color:#666;border:none;border-radius:4px;font-size:14px;font-weight:500;cursor:not-allowed}.user-my-signups-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#999}.user-my-signups-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin:10px 0}.user-my-signups-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p.sub-text[_ngcontent-%COMP%]{font-size:14px;color:#bbb}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.user-my-signups-container[_ngcontent-%COMP%]{padding:15px}.user-my-signups-container[_ngcontent-%COMP%]   .signups-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.user-my-signups-container[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.user-my-signups-container[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]{width:100%}}"]})};function dW(n,e){if(n&1&&(R(0,"p",16),N(1),S()),n&2){let t=Z(2);F(),Ie(t.currentUser.nameShop)}}function hW(n,e){if(n&1){let t=Kt();R(0,"div",11)(1,"div",12)(2,"p",13),N(3),S(),pe(4,dW,2,1,"p",14),S(),R(5,"button",15),Te("click",function(){tt(t);let i=Z();return nt(i.logout())}),N(6,"Cerrar Sesi\xF3n"),S()()}if(n&2){let t=Z();F(3),Ie(t.currentUser.nameLastName),F(),q("ngIf",!t.currentUser.isAdmin)}}function fW(n,e){if(n&1){let t=Kt();R(0,"button",17),Te("click",function(){let i=tt(t).$implicit,o=Z();return nt(o.selectTab(i.value))}),N(1),S()}if(n&2){let t=e.$implicit,r=Z();kn("active",r.selectedTab===t.value),F(),Ue(" ",t.label," ")}}function pW(n,e){n&1&&(zi(0),Dt(1,"app-admin-dates"),qi())}function gW(n,e){n&1&&(zi(0),Dt(1,"app-admin-reports"),qi())}function mW(n,e){n&1&&(zi(0),Dt(1,"app-admin-attendance"),qi())}function yW(n,e){n&1&&(zi(0),Dt(1,"app-user-signup"),qi())}function vW(n,e){n&1&&(zi(0),Dt(1,"app-user-my-signups"),qi())}var pm=class n{authService=M(Hn);router=M(wr);currentUser=null;selectedTab="";tabs=[];destroy$=new Qe;adminTabs=[{label:"Fechas",value:"dates",component:nd},{label:"Asistencia",value:"attendance",component:id},{label:"Reportes",value:"reports",component:rd}];userTabs=[{label:"Inscribirse",value:"signup",component:od},{label:"Mis Inscripciones",value:"my-signups",component:sd}];ngOnInit(){this.authService.currentUser$.pipe(Zs(this.destroy$)).subscribe(e=>{this.currentUser=e,e?.isAdmin?this.tabs=this.adminTabs:this.tabs=this.userTabs,this.tabs.length>0&&!this.selectedTab&&(this.selectedTab=this.tabs[0].value)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}selectTab(e){this.selectedTab=e}logout(){this.authService.logout(),this.router.navigate(["/login"])}getComponentForTab(e){return this.tabs.find(r=>r.value===e)?.component}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ft({type:n,selectors:[["app-home"]],decls:17,vars:7,consts:[[1,"home-container"],[1,"navbar"],[1,"navbar-inner"],[1,"navbar-title"],["class","navbar-user",4,"ngIf"],[1,"main-content"],[1,"tabs-container"],["role","tablist","aria-label","Secciones",1,"tabs"],["class","tab-button","type","button",3,"active","click",4,"ngFor","ngForOf"],[1,"tab-content"],[4,"ngIf"],[1,"navbar-user"],[1,"user-info"],[1,"user-name"],["class","shop-name",4,"ngIf"],[1,"logout-button",3,"click"],[1,"shop-name"],["type","button",1,"tab-button",3,"click"]],template:function(t,r){t&1&&(R(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"h1"),N(5,"Paseo del Artesano"),S()(),pe(6,hW,7,2,"div",4),S()(),R(7,"main",5)(8,"div",6)(9,"div",7),pe(10,fW,2,3,"button",8),S()(),R(11,"section",9),pe(12,pW,2,0,"ng-container",10)(13,gW,2,0,"ng-container",10)(14,mW,2,0,"ng-container",10)(15,yW,2,0,"ng-container",10)(16,vW,2,0,"ng-container",10),S()()()),t&2&&(F(6),q("ngIf",r.currentUser),F(4),q("ngForOf",r.tabs),F(2),q("ngIf",r.selectedTab==="dates"),F(),q("ngIf",r.selectedTab==="reports"),F(),q("ngIf",r.selectedTab==="attendance"),F(),q("ngIf",r.selectedTab==="signup"),F(),q("ngIf",r.selectedTab==="my-signups"))},dependencies:[Vt,un,Qt,nd,rd,id,od,sd],styles:['@charset "UTF-8";.home-container[_ngcontent-%COMP%]{min-height:100dvh;width:100%;display:flex;flex-direction:column;background:#f6f7fb}.navbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#234b2a,#2f9c19c9);color:#fff;box-shadow:0 2px 8px #00000026}.navbar-inner[_ngcontent-%COMP%]{margin:0;padding:14px clamp(12px,3vw,20px);display:flex;align-items:center;justify-content:space-between;gap:12px}.navbar-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-weight:700;font-size:clamp(18px,2.2vw,24px);line-height:1.2}.navbar-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.user-info[_ngcontent-%COMP%]{text-align:right}.user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.user-info[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.user-info[_ngcontent-%COMP%]   .shop-name[_ngcontent-%COMP%]{font-size:12px;opacity:.9}.logout-button[_ngcontent-%COMP%]{padding:10px 14px;background-color:#ffffff2e;color:#fff;border:1px solid rgba(255,255,255,.28);border-radius:10px;font-size:14px;cursor:pointer;transition:transform .08s ease,background-color .2s ease}.logout-button[_ngcontent-%COMP%]:hover{background-color:#ffffff47}.logout-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.main-content[_ngcontent-%COMP%]{flex:1;width:100%;max-width:1200px;margin:0 auto;display:flex;flex-direction:column;gap:12px}.tabs-container[_ngcontent-%COMP%]{background:#fff;border:1px solid #ececf2;border-radius:12px;overflow:hidden}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:thin;scroll-snap-type:x mandatory;border-bottom:1px solid #ececf2}.tab-button[_ngcontent-%COMP%]{flex:0 0 auto;scroll-snap-align:start;padding:12px 14px;background:none;border:none;color:#666;font-size:14px;font-weight:600;cursor:pointer;border-bottom:3px solid transparent;transition:color .2s ease,border-color .2s ease,background-color .2s ease}.tab-button[_ngcontent-%COMP%]:hover{color:#333;background:#667eea0f}.tab-button.active[_ngcontent-%COMP%]{color:#667eea;border-bottom-color:#667eea;background:#667eea14}.tab-content[_ngcontent-%COMP%]{flex:1;background:#fff;border:1px solid #ececf2;border-radius:12px;box-shadow:0 1px 3px #00000014}@media (max-width: 768px){.navbar-inner[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;text-align:center}.navbar-user[_ngcontent-%COMP%]{width:100%;flex-direction:column;align-items:stretch;gap:10px}.user-info[_ngcontent-%COMP%]{text-align:center}.logout-button[_ngcontent-%COMP%]{width:100%}.tab-button[_ngcontent-%COMP%]{padding:10px 12px;font-size:13px}}']})};var Uk=(n,e)=>{let t=M(In);if(!Yi(t))return!0;let r=M(Hn),i=M(wr);return r.currentUser$.pipe(Wn(1),ue(o=>o?!0:i.createUrlTree(["/login"],{queryParams:{returnUrl:e.url}})))};var jk=[{path:"login",component:fm},{path:"home",component:pm,canActivate:[Uk]},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"**",redirectTo:"/login"}];var Bk={apiKey:"AIzaSyAag2h--TQZSJGbKX6j4geAvoc1xbInd9s",authDomain:"paseo-artesanos.firebaseapp.com",projectId:"paseo-artesanos",storageBucket:"paseo-artesanos.firebasestorage.app",messagingSenderId:"498125734272",appId:"1:498125734272:web:da45b0dd12ee1327048165",measurementId:"G-01THT7S2QL"};var $k={providers:[cv(),H_({eventCoalescing:!0}),YE(jk),ZR(JR()),wO(()=>CO(Bk)),nk(()=>rk()),wN(()=>Qp())]};var gm=class n{title="paseo-artesanos";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ft({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&Dt(0,"router-outlet")},dependencies:[nl],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:#f5f5f5}[_nghost-%COMP%]{width:100%;height:100%;display:block}"]})};CE(gm,$k).catch(n=>console.error(n));
